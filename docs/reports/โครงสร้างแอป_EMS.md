# à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™ EMS WeCare

**à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ˆà¸±à¸”à¸—à¸³**: 16 à¸¡à¸à¸£à¸²à¸„à¸¡ 2569  
**à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™**: 4.0  
**à¸ªà¸–à¸²à¸™à¸°**: à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ˆà¸£à¸´à¸‡ (Production Ready)

---

## ğŸ“‹ à¸ªà¸²à¸£à¸šà¸±à¸

1. [à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š](#à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š)
2. [à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š](#à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š)
3. [à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ](#à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ)
4. [à¹‚à¸¡à¸”à¸¹à¸¥à¸«à¸¥à¸±à¸](#à¹‚à¸¡à¸”à¸¹à¸¥à¸«à¸¥à¸±à¸)
5. [à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥](#à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
6. [API Endpoints](#api-endpoints)
7. [à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥](#à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)

---

## ğŸ¯ à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š

### à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ
à¸£à¸°à¸šà¸šà¸šà¸£à¸´à¸«à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸–à¸à¸¢à¸²à¸šà¸²à¸¥à¸‰à¸¸à¸à¹€à¸‰à¸´à¸™ (Emergency Medical Services) à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£:
- à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸à¸£à¸–à¸à¸¢à¸²à¸šà¸²à¸¥
- à¸à¸²à¸£à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡à¸„à¸™à¸‚à¸±à¸š
- à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸° Real-time
- à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢

### à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸«à¸¥à¸±à¸ (User Roles)
1. **Community (à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™/à¸­à¸²à¸ªà¸²)** - à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢, à¹€à¸£à¸µà¸¢à¸à¸£à¸–
2. **Officer/Radio Center (à¸¨à¸¹à¸™à¸¢à¹Œà¸§à¸´à¸—à¸¢à¸¸)** - à¸£à¸±à¸šà¹à¸ˆà¹‰à¸‡à¹€à¸«à¸•à¸¸, à¸ˆà¹ˆà¸²à¸¢à¸‡à¸²à¸™
3. **Driver (à¸„à¸™à¸‚à¸±à¸šà¸£à¸–)** - à¸£à¸±à¸šà¸‡à¸²à¸™, à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°
4. **Admin (à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š)** - à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰, à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
5. **Executive (à¸œà¸¹à¹‰à¸šà¸£à¸´à¸«à¸²à¸£)** - à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™, à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥
6. **Developer (à¸™à¸±à¸à¸à¸±à¸’à¸™à¸²)** - à¸”à¸¹ Logs, Debug

---

## ğŸ—ï¸ à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š

### à¹à¸šà¸šà¸ˆà¸³à¸¥à¸­à¸‡ (Architecture Pattern)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (React SPA)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Pages   â”‚  â”‚Componentsâ”‚  â”‚ Services â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†• HTTP/REST + Socket.io
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Backend (Node.js + Express)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Routes  â”‚  â”‚Middlewareâ”‚  â”‚ Services â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†• SQL Queries
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Database (SQLite)                    â”‚
â”‚  13 Tables + Indexes + Foreign Keys            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰

#### Frontend
- **Framework**: React 19 + TypeScript
- **Build Tool**: Vite 6
- **Routing**: React Router DOM v7
- **Maps**: Leaflet + React-Leaflet
- **Styling**: Tailwind CSS + Vanilla CSS
- **Real-time**: Socket.io-client
- **Date/Time**: Dayjs

#### Backend
- **Runtime**: Node.js
- **Framework**: Express.js + TypeScript
- **Database**: SQLite (better-sqlite3)
- **Authentication**: JWT + Bcrypt
- **Security**: Helmet, CORS, CSURF
- **Validation**: Express-validator, Joi
- **Real-time**: Socket.io

---

## ğŸ“ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ

### Frontend (`d:\EMS`)
```
EMS/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/              # à¸«à¸™à¹‰à¸²à¸ˆà¸­à¸«à¸¥à¸±à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (34 à¹„à¸Ÿà¸¥à¹Œ)
â”‚   â”‚   â”œâ”€â”€ CommunityDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ CommunityRegisterPatientPage.tsx
â”‚   â”‚   â”œâ”€â”€ CommunityRequestRidePage.tsx
â”‚   â”‚   â”œâ”€â”€ ManagePatientsPage.tsx
â”‚   â”‚   â”œâ”€â”€ ManageRidesPage.tsx
â”‚   â”‚   â”œâ”€â”€ DriverTodayJobsPage.tsx
â”‚   â”‚   â”œâ”€â”€ OfficeDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ AdminDashboardPage.tsx
â”‚   â”‚   â””â”€â”€ ... (26 à¹„à¸Ÿà¸¥à¹Œà¸­à¸·à¹ˆà¸™à¹†)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/           # API Services
â”‚   â”‚   â”œâ”€â”€ api.ts          # Centralized API client
â”‚   â”‚   â”œâ”€â”€ geminiService.ts # AI Route Optimization
â”‚   â”‚   â”œâ”€â”€ socketService.ts # Real-time updates
â”‚   â”‚   â””â”€â”€ dashboardService.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/              # Utility Functions
â”‚   â”‚   â”œâ”€â”€ mappers.ts      # DB â†” Domain mapping
â”‚   â”‚   â”œâ”€â”€ dateUtils.ts    # Date formatting
â”‚   â”‚   â””â”€â”€ validation.ts   # Input validation
â”‚   â”‚
â”‚   â””â”€â”€ static/             # Legacy/Static files
â”‚
â”œâ”€â”€ components/             # Reusable Components (167 à¹„à¸Ÿà¸¥à¹Œ)
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ AuthenticatedLayout.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â””â”€â”€ TopHeader.tsx
â”‚   â”œâ”€â”€ modals/
â”‚   â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ driver/
â”‚
â”œâ”€â”€ types.ts                # TypeScript Interfaces
â”œâ”€â”€ App.tsx                 # Root Component
â”œâ”€â”€ index.html              # HTML Entry
â””â”€â”€ vite.config.ts          # Vite Configuration
```

### Backend (`d:\EMS\wecare-backend`)
```
wecare-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts            # Server Entry Point
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/             # API Routes (21 à¹„à¸Ÿà¸¥à¹Œ)
â”‚   â”‚   â”œâ”€â”€ auth.ts         # Login, Register
â”‚   â”‚   â”œâ”€â”€ patients.ts     # Patient CRUD
â”‚   â”‚   â”œâ”€â”€ rides.ts        # Ride Management
â”‚   â”‚   â”œâ”€â”€ drivers.ts      # Driver Management
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/         # Middleware (10 à¹„à¸Ÿà¸¥à¹Œ)
â”‚   â”‚   â”œâ”€â”€ auth.ts         # JWT Verification
â”‚   â”‚   â”œâ”€â”€ rbac.ts         # Role-Based Access Control
â”‚   â”‚   â”œâ”€â”€ validation.ts   # Input Validation
â”‚   â”‚   â””â”€â”€ errorHandler.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/           # Business Logic
â”‚   â”‚   â”œâ”€â”€ patientService.ts
â”‚   â”‚   â”œâ”€â”€ rideService.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                 # Database Layer
â”‚   â”‚   â”œâ”€â”€ connection.ts   # SQLite Connection
â”‚   â”‚   â”œâ”€â”€ queries.ts      # SQL Queries
â”‚   â”‚   â””â”€â”€ migrations/     # Schema Migrations
â”‚   â”‚
â”‚   â””â”€â”€ utils/              # Utilities
â”‚       â”œâ”€â”€ logger.ts
â”‚       â””â”€â”€ helpers.ts
â”‚
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ wecare.db           # SQLite Database File
â”‚   â”œâ”€â”€ schema.sql          # Database Schema
â”‚   â””â”€â”€ data/               # Seed Data (JSON)
â”‚
â””â”€â”€ scripts/                # Utility Scripts
    â”œâ”€â”€ check-schema.js
    â””â”€â”€ verify-patient-type.js
```

---

## ğŸ§© à¹‚à¸¡à¸”à¸¹à¸¥à¸«à¸¥à¸±à¸ (Core Modules)

### 1. Community Module (à¹‚à¸¡à¸”à¸¹à¸¥à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™)
**à¸«à¸™à¹‰à¸²à¸ˆà¸­**:
- `CommunityDashboard.tsx` - à¹à¸”à¸Šà¸šà¸­à¸£à¹Œà¸”à¸«à¸¥à¸±à¸
- `CommunityRegisterPatientPage.tsx` - à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ (5 à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™)
- `CommunityRequestRidePage.tsx` - à¹€à¸£à¸µà¸¢à¸à¸£à¸–à¸à¸¢à¸²à¸šà¸²à¸¥
- `ManagePatientsPage.tsx` - à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
- `ManageRidesPage.tsx` - à¸”à¸¹à¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¹€à¸”à¸´à¸™à¸—à¸²à¸‡
- `PatientDetailPage.tsx` - à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸**:
- âœ… à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹à¸šà¸š Wizard 5 à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™
- âœ… à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸ à¸²à¸à¹à¸¥à¸°à¹€à¸­à¸à¸ªà¸²à¸£
- âœ… à¹€à¸¥à¸·à¸­à¸à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸šà¸™à¹à¸œà¸™à¸—à¸µà¹ˆ
- âœ… Auto-populate à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸£à¸µà¸¢à¸à¸£à¸–
- âœ… Data Isolation (à¹€à¸«à¹‡à¸™à¹€à¸‰à¸à¸²à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡)

### 2. Officer/Radio Center Module (à¹‚à¸¡à¸”à¸¹à¸¥à¸¨à¸¹à¸™à¸¢à¹Œà¸§à¸´à¸—à¸¢à¸¸)
**à¸«à¸™à¹‰à¸²à¸ˆà¸­**:
- `OfficeDashboard.tsx` - à¹à¸”à¸Šà¸šà¸­à¸£à¹Œà¸”à¸¨à¸¹à¸™à¸¢à¹Œà¸„à¸§à¸šà¸„à¸¸à¸¡
- `OfficeManageRidesPage.tsx` - à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸³à¸‚à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- `OfficeManagePatientsPage.tsx` - à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
- `OfficeManageDriversPage.tsx` - à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸™à¸‚à¸±à¸š
- `MapCommandPage.tsx` - à¹à¸œà¸™à¸—à¸µà¹ˆà¸„à¸§à¸šà¸„à¸¸à¸¡ Real-time

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸**:
- âœ… à¸£à¸±à¸šà¹à¸ˆà¹‰à¸‡à¹€à¸«à¸•à¸¸ Real-time (Socket.io)
- âœ… à¸ˆà¹ˆà¸²à¸¢à¸‡à¸²à¸™à¹ƒà¸«à¹‰à¸„à¸™à¸‚à¸±à¸š (Dispatch)
- âœ… à¸•à¸´à¸”à¸•à¸²à¸¡à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸£à¸– Real-time
- âœ… à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹à¸¥à¸°à¸„à¸™à¸‚à¸±à¸š

### 3. Driver Module (à¹‚à¸¡à¸”à¸¹à¸¥à¸„à¸™à¸‚à¸±à¸š)
**à¸«à¸™à¹‰à¸²à¸ˆà¸­**:
- `DriverTodayJobsPage.tsx` - à¸‡à¸²à¸™à¸§à¸±à¸™à¸™à¸µà¹‰
- `DriverHistoryPage.tsx` - à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™
- `DriverProfilePage.tsx` - à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸**:
- âœ… à¸£à¸±à¸šà¸‡à¸²à¸™à¹à¸¥à¸°à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°
- âœ… AI Route Optimization (Gemini)
- âœ… à¸ªà¹ˆà¸‡à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡ Real-time
- âœ… à¸”à¸¹à¸›à¸à¸´à¸—à¸´à¸™à¸‡à¸²à¸™

### 4. Admin Module (à¹‚à¸¡à¸”à¸¹à¸¥à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š)
**à¸«à¸™à¹‰à¸²à¸ˆà¸­**:
- `AdminDashboardPage.tsx` - à¹à¸”à¸Šà¸šà¸­à¸£à¹Œà¸”à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥
- `AdminUserManagementPage.tsx` - à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
- `AdminAuditLogsPage.tsx` - à¸”à¸¹ Audit Logs
- `AdminSystemSettingsPage.tsx` - à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸š

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸**:
- âœ… CRUD à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸¸à¸ Role
- âœ… à¸”à¸¹ Audit Logs à¸à¸£à¹‰à¸­à¸¡ Hash Chain
- âœ… à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Google Maps API Key
- âœ… à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹ˆà¸²à¸§à¸ªà¸²à¸£

### 5. Executive Module (à¹‚à¸¡à¸”à¸¹à¸¥à¸œà¸¹à¹‰à¸šà¸£à¸´à¸«à¸²à¸£)
**à¸«à¸™à¹‰à¸²à¸ˆà¸­**:
- `ExecutiveDashboardPage.tsx` - Dashboard à¸ªà¸³à¸«à¸£à¸±à¸šà¸œà¸¹à¹‰à¸šà¸£à¸´à¸«à¸²à¸£

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸**:
- âœ… à¸£à¸²à¸¢à¸‡à¸²à¸™à¸ªà¸–à¸´à¸•à¸´
- âœ… à¸à¸£à¸²à¸Ÿà¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ
- âœ… Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

---

## ğŸ—„ï¸ à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

### à¸£à¸°à¸šà¸šà¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- **Engine**: SQLite
- **Library**: better-sqlite3
- **à¹„à¸Ÿà¸¥à¹Œ**: `wecare-backend/db/wecare.db`
- **Schema**: `wecare-backend/db/schema.sql`

### à¸•à¸²à¸£à¸²à¸‡à¸«à¸¥à¸±à¸ (13 à¸•à¸²à¸£à¸²à¸‡)

#### 1. users
```sql
- id (TEXT, PK)
- email (TEXT, UNIQUE)
- password (TEXT, hashed)
- role (TEXT: DEVELOPER, admin, OFFICER, driver, community, EXECUTIVE)
- full_name (TEXT)
- status (TEXT: Active, Inactive)
```

#### 2. patients
```sql
- id (TEXT, PK)
- full_name (TEXT)
- national_id (TEXT, UNIQUE)
- dob (TEXT)
- age (INTEGER)
- gender (TEXT)
- blood_type, rh_factor, health_coverage
- contact_phone (TEXT)
- id_card_* (à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸•à¸²à¸¡à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™)
- current_* (à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™)
- latitude, longitude (TEXT)
- patient_types (JSON)
- chronic_diseases (JSON)
- allergies (JSON)
- profile_image_url (TEXT)
- created_by (FK â†’ users.id)
```

#### 3. rides
```sql
- id (TEXT, PK)
- patient_id (FK â†’ patients.id)
- patient_name, patient_phone
- driver_id (FK â†’ drivers.id)
- driver_name
- pickup_location, destination
- pickup_lat, pickup_lng
- appointment_time
- status (PENDING, ASSIGNED, IN_PROGRESS, COMPLETED, CANCELLED)
- trip_type, special_needs (JSON)
- created_by (FK â†’ users.id)
```

#### 4. drivers
```sql
- id (TEXT, PK)
- user_id (FK â†’ users.id)
- full_name, phone
- license_number, license_expiry
- status (AVAILABLE, ON_DUTY, OFF_DUTY)
- total_trips, trips_this_month
```

#### 5. vehicles
```sql
- id (TEXT, PK)
- license_plate (UNIQUE)
- vehicle_type_id (FK)
- brand, model, year, color
- status (AVAILABLE, IN_USE, MAINTENANCE)
```

#### 6. audit_logs (à¸à¸£à¹‰à¸­à¸¡ Hash Chain)
```sql
- id (INTEGER, PK, AUTOINCREMENT)
- user_id, user_email, user_role
- action (TEXT)
- resource_type, resource_id
- details (JSON)
- timestamp (TEXT)
- hash (TEXT) - SHA-256 à¸‚à¸­à¸‡ log à¸™à¸µà¹‰
- previous_hash (TEXT) - Hash à¸‚à¸­à¸‡ log à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²
- sequence_number (INTEGER)
```

**à¸•à¸²à¸£à¸²à¸‡à¸­à¸·à¹ˆà¸™à¹†**: teams, news, vehicle_types, ride_events, driver_locations, map_data, system_settings

---

## ğŸ”Œ API Endpoints

### Authentication
```
POST   /api/auth/login          - à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
POST   /api/auth/register       - à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™
GET    /api/auth/me             - à¸”à¸¹à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
PUT    /api/auth/profile        - à¹à¸à¹‰à¹„à¸‚à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
POST   /api/auth/change-password - à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™
```

### Patients
```
GET    /api/patients            - à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ (à¸à¸£à¹‰à¸­à¸¡ Pagination)
GET    /api/patients/:id        - à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
POST   /api/patients            - à¸ªà¸£à¹‰à¸²à¸‡à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹ƒà¸«à¸¡à¹ˆ
PUT    /api/patients/:id        - à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
DELETE /api/patients/:id        - à¸¥à¸šà¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
```

### Rides
```
GET    /api/rides               - à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£ Rides (à¸à¸£à¹‰à¸­à¸¡ Pagination)
GET    /api/rides/:id           - à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” Ride
POST   /api/rides               - à¸ªà¸£à¹‰à¸²à¸‡ Ride à¹ƒà¸«à¸¡à¹ˆ
PUT    /api/rides/:id           - à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸° Ride
DELETE /api/rides/:id           - à¸¢à¸à¹€à¸¥à¸´à¸ Ride
```

### Drivers
```
GET    /api/drivers             - à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£à¸„à¸™à¸‚à¸±à¸š
GET    /api/drivers/available   - à¸”à¸¹à¸„à¸™à¸‚à¸±à¸šà¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡
GET    /api/drivers/my-rides    - à¸”à¸¹à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸‰à¸±à¸™ (Driver)
GET    /api/drivers/my-profile  - à¸”à¸¹à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ (Driver)
PUT    /api/drivers/my-profile  - à¹à¸à¹‰à¹„à¸‚à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ (Driver)
PUT    /api/driver-locations/:id - à¸­à¸±à¸›à¹€à¸”à¸•à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡
```

---

## ğŸ”„ à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Data Flow)

### 1. à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
```
User (Community) 
  â†’ CommunityRegisterPatientPage.tsx
  â†’ Wizard 5 à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ (Step1-5)
  â†’ handleWizardComplete()
  â†’ patientsAPI.createPatient()
  â†’ POST /api/patients
  â†’ Backend: routes/patients.ts
  â†’ Validation (Joi)
  â†’ INSERT INTO patients
  â†’ Return patient_id
  â†’ Frontend: à¹à¸ªà¸”à¸‡à¸œà¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

### 2. à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸à¸£à¸–à¸à¸¢à¸²à¸šà¸²à¸¥
```
User (Community)
  â†’ CommunityRequestRidePage.tsx
  â†’ à¹€à¸¥à¸·à¸­à¸à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ (Auto-populate à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
  â†’ à¸à¸£à¸­à¸à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡
  â†’ handleSubmit()
  â†’ ridesAPI.createRide()
  â†’ POST /api/rides
  â†’ Backend: routes/rides.ts
  â†’ Generate RIDE-XXX ID
  â†’ INSERT INTO rides
  â†’ Socket.io Emit 'new_ride'
  â†’ Officer Dashboard à¸£à¸±à¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™
```

### 3. à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢à¸‡à¸²à¸™ (Dispatch)
```
Officer
  â†’ OfficeManageRidesPage.tsx
  â†’ à¹€à¸¥à¸·à¸­à¸ Ride + à¹€à¸¥à¸·à¸­à¸ Driver
  â†’ handleDispatch()
  â†’ ridesAPI.updateRideStatus(id, 'ASSIGNED', driver_id)
  â†’ PUT /api/rides/:id
  â†’ Backend: UPDATE rides SET status='ASSIGNED', driver_id=?
  â†’ Socket.io Emit 'ride_assigned'
  â†’ Driver Dashboard à¸£à¸±à¸šà¸‡à¸²à¸™à¹ƒà¸«à¸¡à¹ˆ
```

### 4. Real-time Tracking
```
Driver
  â†’ DriverLocationTracker Component
  â†’ navigator.geolocation.watchPosition()
  â†’ driversAPI.updateLocation(lat, lng)
  â†’ PUT /api/driver-locations/:id
  â†’ Backend: INSERT INTO driver_locations
  â†’ Socket.io Emit 'driver_location_update'
  â†’ Officer MapCommandPage à¸­à¸±à¸›à¹€à¸”à¸•à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸šà¸™à¹à¸œà¸™à¸—à¸µà¹ˆ
```

---

## ğŸ” à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ (Security)

### Frontend
- âœ… JWT Token à¹ƒà¸™ localStorage
- âœ… CSRF Token à¸ªà¸³à¸«à¸£à¸±à¸š POST/PUT/DELETE
- âœ… Input Validation (Client-side)
- âœ… Role-Based UI Rendering

### Backend
- âœ… JWT Authentication
- âœ… Bcrypt Password Hashing
- âœ… RBAC (Role-Based Access Control)
- âœ… Input Validation (Joi + Express-validator)
- âœ… CSRF Protection
- âœ… Helmet (Security Headers)
- âœ… CORS Configuration
- âœ… Audit Logs à¸à¸£à¹‰à¸­à¸¡ Hash Chain

---

## ğŸ“Š à¸ªà¸–à¸´à¸•à¸´à¹‚à¸„à¸£à¸‡à¸à¸²à¸£

- **Frontend Pages**: 34 à¹„à¸Ÿà¸¥à¹Œ
- **Components**: 167 à¹„à¸Ÿà¸¥à¹Œ
- **Backend Routes**: 21 à¹„à¸Ÿà¸¥à¹Œ
- **Database Tables**: 13 à¸•à¸²à¸£à¸²à¸‡
- **API Endpoints**: 50+ endpoints
- **User Roles**: 6 roles
- **Test Scripts**: 149 à¹„à¸Ÿà¸¥à¹Œ (archived)

---

## ğŸ“ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸ˆà¸±à¸”à¸—à¸³à¸‚à¸¶à¹‰à¸™à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸à¹ˆà¸²à¸¢à¸—à¸”à¸ªà¸­à¸š (QA Team) à¹à¸¥à¸°à¸—à¸µà¸¡à¸à¸±à¸’à¸™à¸²à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š EMS WeCare à¸­à¸¢à¹ˆà¸²à¸‡à¸Šà¸±à¸”à¹€à¸ˆà¸™

à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡:
- **Database Schema**: `wecare-backend/db/schema.sql`
- **API Documentation**: `api_requirements.md`
- **UI Guidelines**: `UI_COMPONENT_GUIDELINES.md`
- **Test Plan**: `QA-COMMUNITY-TEST-PLAN.ps1`
