# Debug: ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏µ‡∏î‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Login

## ‡∏Å‡∏≤‡∏£ Debug

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏¥‡∏î Browser Console
1. ‡∏Å‡∏î F12 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î Developer Tools
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà tab "Console"
3. ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
4. ‡∏î‡∏π log messages

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Network Tab
1. ‡πÄ‡∏õ‡∏¥‡∏î Developer Tools (F12)
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà tab "Network"
3. ‡∏Å‡∏î "Clear" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡πâ‡∏≤‡∏á logs
4. ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
5. ‡∏î‡∏π request ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ:
   - ‡∏ä‡∏∑‡πà‡∏≠ request: `profile`
   - Method: `PUT`
   - Status Code: ‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô 200, 401, 403, ‡∏´‡∏£‡∏∑‡∏≠ 500

### Log Messages ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô

#### ‚úÖ ‡∏Å‡∏£‡∏ì‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
```
üîÑ Saving profile... {name: "...", phone: "...", hasImage: true}
üì§ API Request: PUT /auth/profile
üì• API Response: 200 OK
‚úÖ Profile update response: {id: "...", name: "...", profileImageUrl: "..."}
üíæ localStorage updated
```

#### ‚ùå ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
```
üîÑ Saving profile... {name: "...", phone: "...", hasImage: true}
üì§ API Request: PUT /auth/profile
üì• API Response: 401 Unauthorized
‚ùå Profile save error: Session expired. Please login again.
```

## ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ

### 1. Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** Status Code 401
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** JWT token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (default: 7 ‡∏ß‡∏±‡∏ô)
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** Login ‡πÉ‡∏´‡∏°‡πà

### 2. CSRF Token Invalid
**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** Status Code 403
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** CSRF token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** Refresh ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß login ‡πÉ‡∏´‡∏°‡πà

### 3. Response Format ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** Response ‡πÄ‡∏õ‡πá‡∏ô HTML ‡πÅ‡∏ó‡∏ô JSON
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Backend error ‡∏´‡∏£‡∏∑‡∏≠ redirect
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö backend logs

### 4. SQL Injection Middleware Block
**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** Status Code 400, error: "Invalid input detected"
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Middleware ‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤ base64 ‡πÄ‡∏õ‡πá‡∏ô SQL injection
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô sqlInjectionPrevention.ts

### 5. Response Parsing Error
**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** Frontend ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ parse response
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Backend ‡∏™‡πà‡∏á snake_case ‡πÅ‡∏ï‡πà frontend ‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á camelCase
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô auth.ts

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Backend

### ‡∏î‡∏π Backend Logs
```powershell
# ‡∏î‡∏π terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô backend
# ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:
[timestamp] PUT /auth/profile - Origin: http://localhost:5173
```

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Response
```powershell
# Test API ‡∏î‡πâ‡∏ß‡∏¢ curl
curl -X PUT http://localhost:3001/auth/profile \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name":"Test User","phone":"0812345678"}'
```

## ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏ñ‡πâ‡∏≤ Status Code 401
```typescript
// ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏ï‡πâ‡∏≠‡∏á login ‡πÉ‡∏´‡∏°‡πà
// ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ - ‡πÄ‡∏õ‡πá‡∏ô security feature
```

### ‡∏ñ‡πâ‡∏≤ Status Code 400
```typescript
// ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Validation error ‡∏´‡∏£‡∏∑‡∏≠ SQL injection block
// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö middleware
// ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß - isBase64Data() function
```

### ‡∏ñ‡πâ‡∏≤ Status Code 500
```typescript
// ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Backend error
// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö backend logs
// ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô database error ‡∏´‡∏£‡∏∑‡∏≠ code error
```

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà

1. **Clear Browser Cache**
   ```
   Ctrl + Shift + Delete
   ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: Cookies and other site data
   ```

2. **Logout ‡πÅ‡∏•‡∏∞ Login ‡πÉ‡∏´‡∏°‡πà**
   - ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ token ‡πÉ‡∏´‡∏°‡πà

3. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ**
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å (< 100KB) ‡∏Å‡πà‡∏≠‡∏ô
   - ‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Ñ‡πà‡∏≠‡∏¢‡∏•‡∏≠‡∏á‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô

4. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console Logs**
   - ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ error ‡∏≠‡∏∞‡πÑ‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

## Expected Behavior

### ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô
1. ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‚Üí ‡πÅ‡∏™‡∏î‡∏á "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"
3. **‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°** (‡πÑ‡∏°‡πà‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å)
4. ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
5. Reload ‡∏´‡∏ô‡πâ‡∏≤ ‚Üí ‡∏£‡∏π‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà

### ‚ùå ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô
1. ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‚Üí **‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Login**
3. ‡∏ï‡πâ‡∏≠‡∏á login ‡πÉ‡∏´‡∏°‡πà
4. ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏≤‡∏¢‡πÑ‡∏õ

## ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

1. `src/pages/CommunityProfilePage.tsx` - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° logging ‡πÅ‡∏•‡πâ‡∏ß
2. `src/services/api.ts` - ‡∏°‡∏µ error handling
3. `wecare-backend/src/routes/auth.ts` - ‚úÖ ‡πÅ‡∏õ‡∏•‡∏á response ‡πÅ‡∏•‡πâ‡∏ß
4. `wecare-backend/src/middleware/sqlInjectionPrevention.ts` - ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï base64 ‡πÅ‡∏•‡πâ‡∏ß

## ‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:

1. **Console Logs** (copy ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
2. **Network Tab** - screenshot ‡∏Ç‡∏≠‡∏á request/response
3. **‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û** ‡∏ó‡∏µ‡πà‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î
4. **Browser** ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (Chrome, Firefox, Edge)
5. **User Role** ‡∏ó‡∏µ‡πà login (admin, community, etc.)

## ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
üîç ‡∏Å‡∏≥‡∏•‡∏±‡∏á debug - ‡∏£‡∏≠ console logs ‡∏à‡∏≤‡∏Å SA
