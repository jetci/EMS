(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function Ds(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Fc={exports:{}},Na={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function bv(){if(qh)return Na;qh=1;var a=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function s(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:a,type:r,key:h,ref:o!==void 0?o:null,props:u}}return Na.Fragment=l,Na.jsx=s,Na.jsxs=s,Na}var Gh;function Nv(){return Gh||(Gh=1,Fc.exports=bv()),Fc.exports}var t=Nv(),Yc={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function jv(){if(Hh)return be;Hh=1;var a=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,_={};function M(D,ee,Q){this.props=D,this.context=ee,this.refs=_,this.updater=Q||C}M.prototype.isReactComponent={},M.prototype.setState=function(D,ee){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ee,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=M.prototype;function I(D,ee,Q){this.props=D,this.context=ee,this.refs=_,this.updater=Q||C}var V=I.prototype=new k;V.constructor=I,A(V,M.prototype),V.isPureReactComponent=!0;var B=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function W(D,ee,Q,ie,re,de){return Q=de.ref,{$$typeof:a,type:D,key:ee,ref:Q!==void 0?Q:null,props:de}}function z(D,ee){return W(D.type,ee,void 0,void 0,void 0,D.props)}function H(D){return typeof D=="object"&&D!==null&&D.$$typeof===a}function Z(D){var ee={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return ee[Q]})}var U=/\/+/g;function ae(D,ee){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):ee.toString(36)}function $(){}function P(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then($,$):(D.status="pending",D.then(function(ee){D.status==="pending"&&(D.status="fulfilled",D.value=ee)},function(ee){D.status==="pending"&&(D.status="rejected",D.reason=ee)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function E(D,ee,Q,ie,re){var de=typeof D;(de==="undefined"||de==="boolean")&&(D=null);var xe=!1;if(D===null)xe=!0;else switch(de){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(D.$$typeof){case a:case l:xe=!0;break;case v:return xe=D._init,E(xe(D._payload),ee,Q,ie,re)}}if(xe)return re=re(D),xe=ie===""?"."+ae(D,0):ie,B(re)?(Q="",xe!=null&&(Q=xe.replace(U,"$&/")+"/"),E(re,ee,Q,"",function(rt){return rt})):re!=null&&(H(re)&&(re=z(re,Q+(re.key==null||D&&D.key===re.key?"":(""+re.key).replace(U,"$&/")+"/")+xe)),ee.push(re)),1;xe=0;var qe=ie===""?".":ie+":";if(B(D))for(var Ae=0;Ae<D.length;Ae++)ie=D[Ae],de=qe+ae(ie,Ae),xe+=E(ie,ee,Q,de,re);else if(Ae=w(D),typeof Ae=="function")for(D=Ae.call(D),Ae=0;!(ie=D.next()).done;)ie=ie.value,de=qe+ae(ie,Ae++),xe+=E(ie,ee,Q,de,re);else if(de==="object"){if(typeof D.then=="function")return E(P(D),ee,Q,ie,re);throw ee=String(D),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return xe}function S(D,ee,Q){if(D==null)return D;var ie=[],re=0;return E(D,ie,"","",function(de){return ee.call(Q,de,re++)}),ie}function q(D){if(D._status===-1){var ee=D._result;ee=ee(),ee.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=ee)}if(D._status===1)return D._result.default;throw D._result}var X=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function oe(){}return be.Children={map:S,forEach:function(D,ee,Q){S(D,function(){ee.apply(this,arguments)},Q)},count:function(D){var ee=0;return S(D,function(){ee++}),ee},toArray:function(D){return S(D,function(ee){return ee})||[]},only:function(D){if(!H(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},be.Component=M,be.Fragment=s,be.Profiler=o,be.PureComponent=I,be.StrictMode=r,be.Suspense=y,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return L.H.useMemoCache(D)}},be.cache=function(D){return function(){return D.apply(null,arguments)}},be.cloneElement=function(D,ee,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=A({},D.props),re=D.key,de=void 0;if(ee!=null)for(xe in ee.ref!==void 0&&(de=void 0),ee.key!==void 0&&(re=""+ee.key),ee)!te.call(ee,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ee.ref===void 0||(ie[xe]=ee[xe]);var xe=arguments.length-2;if(xe===1)ie.children=Q;else if(1<xe){for(var qe=Array(xe),Ae=0;Ae<xe;Ae++)qe[Ae]=arguments[Ae+2];ie.children=qe}return W(D.type,re,void 0,void 0,de,ie)},be.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},be.createElement=function(D,ee,Q){var ie,re={},de=null;if(ee!=null)for(ie in ee.key!==void 0&&(de=""+ee.key),ee)te.call(ee,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(re[ie]=ee[ie]);var xe=arguments.length-2;if(xe===1)re.children=Q;else if(1<xe){for(var qe=Array(xe),Ae=0;Ae<xe;Ae++)qe[Ae]=arguments[Ae+2];re.children=qe}if(D&&D.defaultProps)for(ie in xe=D.defaultProps,xe)re[ie]===void 0&&(re[ie]=xe[ie]);return W(D,de,void 0,void 0,null,re)},be.createRef=function(){return{current:null}},be.forwardRef=function(D){return{$$typeof:p,render:D}},be.isValidElement=H,be.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:q}},be.memo=function(D,ee){return{$$typeof:x,type:D,compare:ee===void 0?null:ee}},be.startTransition=function(D){var ee=L.T,Q={};L.T=Q;try{var ie=D(),re=L.S;re!==null&&re(Q,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(oe,X)}catch(de){X(de)}finally{L.T=ee}},be.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},be.use=function(D){return L.H.use(D)},be.useActionState=function(D,ee,Q){return L.H.useActionState(D,ee,Q)},be.useCallback=function(D,ee){return L.H.useCallback(D,ee)},be.useContext=function(D){return L.H.useContext(D)},be.useDebugValue=function(){},be.useDeferredValue=function(D,ee){return L.H.useDeferredValue(D,ee)},be.useEffect=function(D,ee,Q){var ie=L.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(D,ee)},be.useId=function(){return L.H.useId()},be.useImperativeHandle=function(D,ee,Q){return L.H.useImperativeHandle(D,ee,Q)},be.useInsertionEffect=function(D,ee){return L.H.useInsertionEffect(D,ee)},be.useLayoutEffect=function(D,ee){return L.H.useLayoutEffect(D,ee)},be.useMemo=function(D,ee){return L.H.useMemo(D,ee)},be.useOptimistic=function(D,ee){return L.H.useOptimistic(D,ee)},be.useReducer=function(D,ee,Q){return L.H.useReducer(D,ee,Q)},be.useRef=function(D){return L.H.useRef(D)},be.useState=function(D){return L.H.useState(D)},be.useSyncExternalStore=function(D,ee,Q){return L.H.useSyncExternalStore(D,ee,Q)},be.useTransition=function(){return L.H.useTransition()},be.version="19.1.1",be}var Fh;function Mu(){return Fh||(Fh=1,Yc.exports=jv()),Yc.exports}var j=Mu();const it=Ds(j);var $c={exports:{}},ja={},Kc={exports:{}},Jc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function wv(){return Yh||(Yh=1,(function(a){function l(S,q){var X=S.length;S.push(q);e:for(;0<X;){var oe=X-1>>>1,D=S[oe];if(0<o(D,q))S[oe]=q,S[X]=D,X=oe;else break e}}function s(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var q=S[0],X=S.pop();if(X!==q){S[0]=X;e:for(var oe=0,D=S.length,ee=D>>>1;oe<ee;){var Q=2*(oe+1)-1,ie=S[Q],re=Q+1,de=S[re];if(0>o(ie,X))re<D&&0>o(de,ie)?(S[oe]=de,S[re]=X,oe=re):(S[oe]=ie,S[Q]=X,oe=Q);else if(re<D&&0>o(de,X))S[oe]=de,S[re]=X,oe=re;else break e}}return q}function o(S,q){var X=S.sortIndex-q.sortIndex;return X!==0?X:S.id-q.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();a.unstable_now=function(){return h.now()-p}}var y=[],x=[],v=1,b=null,w=3,C=!1,A=!1,_=!1,M=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function B(S){for(var q=s(x);q!==null;){if(q.callback===null)r(x);else if(q.startTime<=S)r(x),q.sortIndex=q.expirationTime,l(y,q);else break;q=s(x)}}function L(S){if(_=!1,B(S),!A)if(s(y)!==null)A=!0,te||(te=!0,ae());else{var q=s(x);q!==null&&E(L,q.startTime-S)}}var te=!1,W=-1,z=5,H=-1;function Z(){return M?!0:!(a.unstable_now()-H<z)}function U(){if(M=!1,te){var S=a.unstable_now();H=S;var q=!0;try{e:{A=!1,_&&(_=!1,I(W),W=-1),C=!0;var X=w;try{t:{for(B(S),b=s(y);b!==null&&!(b.expirationTime>S&&Z());){var oe=b.callback;if(typeof oe=="function"){b.callback=null,w=b.priorityLevel;var D=oe(b.expirationTime<=S);if(S=a.unstable_now(),typeof D=="function"){b.callback=D,B(S),q=!0;break t}b===s(y)&&r(y),B(S)}else r(y);b=s(y)}if(b!==null)q=!0;else{var ee=s(x);ee!==null&&E(L,ee.startTime-S),q=!1}}break e}finally{b=null,w=X,C=!1}q=void 0}}finally{q?ae():te=!1}}}var ae;if(typeof V=="function")ae=function(){V(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,P=$.port2;$.port1.onmessage=U,ae=function(){P.postMessage(null)}}else ae=function(){k(U,0)};function E(S,q){W=k(function(){S(a.unstable_now())},q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(S){S.callback=null},a.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<S?Math.floor(1e3/S):5},a.unstable_getCurrentPriorityLevel=function(){return w},a.unstable_next=function(S){switch(w){case 1:case 2:case 3:var q=3;break;default:q=w}var X=w;w=q;try{return S()}finally{w=X}},a.unstable_requestPaint=function(){M=!0},a.unstable_runWithPriority=function(S,q){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var X=w;w=S;try{return q()}finally{w=X}},a.unstable_scheduleCallback=function(S,q,X){var oe=a.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?oe+X:oe):X=oe,S){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=X+D,S={id:v++,callback:q,priorityLevel:S,startTime:X,expirationTime:D,sortIndex:-1},X>oe?(S.sortIndex=X,l(x,S),s(y)===null&&S===s(x)&&(_?(I(W),W=-1):_=!0,E(L,X-oe))):(S.sortIndex=D,l(y,S),A||C||(A=!0,te||(te=!0,ae()))),S},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(S){var q=w;return function(){var X=w;w=q;try{return S.apply(this,arguments)}finally{w=X}}}})(Jc)),Jc}var $h;function Cv(){return $h||($h=1,Kc.exports=wv()),Kc.exports}var Xc={exports:{}},ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh;function Tv(){if(Kh)return ut;Kh=1;var a=Mu();function l(y){var x="https://react.dev/errors/"+y;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(l(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,x,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:x,implementation:v}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,x){if(y==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ut.createPortal=function(y,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(l(299));return u(y,x,null,v)},ut.flushSync=function(y){var x=h.T,v=r.p;try{if(h.T=null,r.p=2,y)return y()}finally{h.T=x,r.p=v,r.d.f()}},ut.preconnect=function(y,x){typeof y=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(y,x))},ut.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},ut.preinit=function(y,x){if(typeof y=="string"&&x&&typeof x.as=="string"){var v=x.as,b=p(v,x.crossOrigin),w=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?r.d.S(y,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:C}):v==="script"&&r.d.X(y,{crossOrigin:b,integrity:w,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},ut.preinitModule=function(y,x){if(typeof y=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=p(x.as,x.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(y)},ut.preload=function(y,x){if(typeof y=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,b=p(v,x.crossOrigin);r.d.L(y,v,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},ut.preloadModule=function(y,x){if(typeof y=="string")if(x){var v=p(x.as,x.crossOrigin);r.d.m(y,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(y)},ut.requestFormReset=function(y){r.d.r(y)},ut.unstable_batchedUpdates=function(y,x){return y(x)},ut.useFormState=function(y,x,v){return h.H.useFormState(y,x,v)},ut.useFormStatus=function(){return h.H.useHostTransitionStatus()},ut.version="19.1.1",ut}var Jh;function Sv(){if(Jh)return Xc.exports;Jh=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),Xc.exports=Tv(),Xc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function Ev(){if(Xh)return ja;Xh=1;var a=Cv(),l=Mu(),s=Sv();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(r(188))}function y(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,c=n;;){var d=i.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){i=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===i)return p(d),e;if(g===c)return p(d),n;g=g.sibling}throw Error(r(188))}if(i.return!==c.return)i=d,c=g;else{for(var N=!1,T=d.child;T;){if(T===i){N=!0,i=d,c=g;break}if(T===c){N=!0,c=d,i=g;break}T=T.sibling}if(!N){for(T=g.child;T;){if(T===i){N=!0,i=g,c=d;break}if(T===c){N=!0,c=g,i=d;break}T=T.sibling}if(!N)throw Error(r(189))}}if(i.alternate!==c)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),V=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var $=Symbol.for("react.client.reference");function P(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case M:return"Profiler";case _:return"StrictMode";case L:return"Suspense";case te:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case V:return(e.displayName||"Context")+".Provider";case I:return(e._context.displayName||"Context")+".Consumer";case B:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return n=e.displayName||null,n!==null?n:P(e.type)||"Memo";case z:n=e._payload,e=e._init;try{return P(e(n))}catch{}}return null}var E=Array.isArray,S=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},oe=[],D=-1;function ee(e){return{current:e}}function Q(e){0>D||(e.current=oe[D],oe[D]=null,D--)}function ie(e,n){D++,oe[D]=e.current,e.current=n}var re=ee(null),de=ee(null),xe=ee(null),qe=ee(null);function Ae(e,n){switch(ie(xe,n),ie(de,e),ie(re,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?gh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=gh(n),e=ph(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(re),ie(re,e)}function rt(){Q(re),Q(de),Q(xe)}function Ze(e){e.memoizedState!==null&&ie(qe,e);var n=re.current,i=ph(n,e.type);n!==i&&(ie(de,e),ie(re,i))}function jt(e){de.current===e&&(Q(re),Q(de)),qe.current===e&&(Q(qe),ga._currentValue=X)}var fn=Object.prototype.hasOwnProperty,In=a.unstable_scheduleCallback,Rr=a.unstable_cancelCallback,Qp=a.unstable_shouldYield,Wp=a.unstable_requestPaint,Wt=a.unstable_now,e0=a.unstable_getCurrentPriorityLevel,Ju=a.unstable_ImmediatePriority,Xu=a.unstable_UserBlockingPriority,Ua=a.unstable_NormalPriority,t0=a.unstable_LowPriority,Zu=a.unstable_IdlePriority,n0=a.log,s0=a.unstable_setDisableYieldValue,Cl=null,wt=null;function kn(e){if(typeof n0=="function"&&s0(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Cl,e)}catch{}}var Ct=Math.clz32?Math.clz32:i0,l0=Math.log,a0=Math.LN2;function i0(e){return e>>>=0,e===0?32:31-(l0(e)/a0|0)|0}var Oa=256,Pa=4194304;function cs(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ba(e,n,i){var c=e.pendingLanes;if(c===0)return 0;var d=0,g=e.suspendedLanes,N=e.pingedLanes;e=e.warmLanes;var T=c&134217727;return T!==0?(c=T&~g,c!==0?d=cs(c):(N&=T,N!==0?d=cs(N):i||(i=T&~e,i!==0&&(d=cs(i))))):(T=c&~g,T!==0?d=cs(T):N!==0?d=cs(N):i||(i=c&~e,i!==0&&(d=cs(i)))),d===0?0:n!==0&&n!==d&&(n&g)===0&&(g=d&-d,i=n&-n,g>=i||g===32&&(i&4194048)!==0)?n:d}function Tl(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function r0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qu(){var e=Oa;return Oa<<=1,(Oa&4194048)===0&&(Oa=256),e}function Wu(){var e=Pa;return Pa<<=1,(Pa&62914560)===0&&(Pa=4194304),e}function Ir(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Sl(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function o0(e,n,i,c,d,g){var N=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var T=e.entanglements,R=e.expirationTimes,Y=e.hiddenUpdates;for(i=N&~i;0<i;){var ne=31-Ct(i),le=1<<ne;T[ne]=0,R[ne]=-1;var K=Y[ne];if(K!==null)for(Y[ne]=null,ne=0;ne<K.length;ne++){var J=K[ne];J!==null&&(J.lane&=-536870913)}i&=~le}c!==0&&ed(e,c,0),g!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=g&~(N&~n))}function ed(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Ct(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|i&4194090}function td(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var c=31-Ct(i),d=1<<c;d&n|e[c]&n&&(e[c]|=n),i&=~d}}function kr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Lr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nd(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Uh(e.type))}function c0(e,n){var i=q.p;try{return q.p=e,n()}finally{q.p=i}}var Ln=Math.random().toString(36).slice(2),ot="__reactFiber$"+Ln,xt="__reactProps$"+Ln,ks="__reactContainer$"+Ln,Ur="__reactEvents$"+Ln,u0="__reactListeners$"+Ln,d0="__reactHandles$"+Ln,sd="__reactResources$"+Ln,El="__reactMarker$"+Ln;function Or(e){delete e[ot],delete e[xt],delete e[Ur],delete e[u0],delete e[d0]}function Ls(e){var n=e[ot];if(n)return n;for(var i=e.parentNode;i;){if(n=i[ks]||i[ot]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Nh(e);e!==null;){if(i=e[ot])return i;e=Nh(e)}return n}e=i,i=e.parentNode}return null}function Us(e){if(e=e[ot]||e[ks]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Al(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Os(e){var n=e[sd];return n||(n=e[sd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Qe(e){e[El]=!0}var ld=new Set,ad={};function us(e,n){Ps(e,n),Ps(e+"Capture",n)}function Ps(e,n){for(ad[e]=n,e=0;e<n.length;e++)ld.add(n[e])}var f0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),id={},rd={};function m0(e){return fn.call(rd,e)?!0:fn.call(id,e)?!1:f0.test(e)?rd[e]=!0:(id[e]=!0,!1)}function Va(e,n,i){if(m0(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function za(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function mn(e,n,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+c)}}var Pr,od;function Bs(e){if(Pr===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Pr=n&&n[1]||"",od=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pr+e+od}var Br=!1;function Vr(e,n){if(!e||Br)return"";Br=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var K=J}Reflect.construct(e,[],le)}else{try{le.call()}catch(J){K=J}e.call(le.prototype)}}else{try{throw Error()}catch(J){K=J}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),N=g[0],T=g[1];if(N&&T){var R=N.split(`
`),Y=T.split(`
`);for(d=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(c===R.length||d===Y.length)for(c=R.length-1,d=Y.length-1;1<=c&&0<=d&&R[c]!==Y[d];)d--;for(;1<=c&&0<=d;c--,d--)if(R[c]!==Y[d]){if(c!==1||d!==1)do if(c--,d--,0>d||R[c]!==Y[d]){var ne=`
`+R[c].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=c&&0<=d);break}}}finally{Br=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Bs(i):""}function h0(e){switch(e.tag){case 26:case 27:case 5:return Bs(e.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 15:return Vr(e.type,!1);case 11:return Vr(e.type.render,!1);case 1:return Vr(e.type,!0);case 31:return Bs("Activity");default:return""}}function cd(e){try{var n="";do n+=h0(e),e=e.return;while(e);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ud(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function x0(e){var n=ud(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,g=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(N){c=""+N,g.call(this,N)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(N){c=""+N},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function qa(e){e._valueTracker||(e._valueTracker=x0(e))}function dd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return e&&(c=ud(e)?e.checked?"true":"false":e.value),e=c,e!==i?(n.setValue(e),!0):!1}function Ga(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var g0=/[\n"\\]/g;function kt(e){return e.replace(g0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function zr(e,n,i,c,d,g,N,T){e.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.type=N:e.removeAttribute("type"),n!=null?N==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+It(n)):e.value!==""+It(n)&&(e.value=""+It(n)):N!=="submit"&&N!=="reset"||e.removeAttribute("value"),n!=null?qr(e,N,It(n)):i!=null?qr(e,N,It(i)):c!=null&&e.removeAttribute("value"),d==null&&g!=null&&(e.defaultChecked=!!g),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+It(T):e.removeAttribute("name")}function fd(e,n,i,c,d,g,N,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||n!=null))return;i=i!=null?""+It(i):"",n=n!=null?""+It(n):i,T||n===e.value||(e.value=n),e.defaultValue=n}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=T?e.checked:!!c,e.defaultChecked=!!c,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(e.name=N)}function qr(e,n,i){n==="number"&&Ga(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Vs(e,n,i,c){if(e=e.options,n){n={};for(var d=0;d<i.length;d++)n["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=n.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&c&&(e[i].defaultSelected=!0)}else{for(i=""+It(i),n=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,c&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function md(e,n,i){if(n!=null&&(n=""+It(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+It(i):""}function hd(e,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(r(92));if(E(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=It(n),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c)}function zs(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var p0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xd(e,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,i):typeof i!="number"||i===0||p0.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function gd(e,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var d in n)c=n[d],n.hasOwnProperty(d)&&i[d]!==c&&xd(e,d,c)}else for(var g in n)n.hasOwnProperty(g)&&xd(e,g,n[g])}function Gr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),v0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(e){return v0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Hr=null;function Fr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qs=null,Gs=null;function pd(e){var n=Us(e);if(n&&(e=n.stateNode)){var i=e[xt]||null;e:switch(e=n.stateNode,n.type){case"input":if(zr(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+kt(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==e&&c.form===e.form){var d=c[xt]||null;if(!d)throw Error(r(90));zr(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===e.form&&dd(c)}break e;case"textarea":md(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Vs(e,!!i.multiple,n,!1)}}}var Yr=!1;function yd(e,n,i){if(Yr)return e(n,i);Yr=!0;try{var c=e(n);return c}finally{if(Yr=!1,(qs!==null||Gs!==null)&&(Mi(),qs&&(n=qs,e=Gs,Gs=qs=null,pd(n),e)))for(n=0;n<e.length;n++)pd(e[n])}}function Ml(e,n){var i=e.stateNode;if(i===null)return null;var c=i[xt]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(hn)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){$r=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{$r=!1}var Un=null,Kr=null,Fa=null;function vd(){if(Fa)return Fa;var e,n=Kr,i=n.length,c,d="value"in Un?Un.value:Un.textContent,g=d.length;for(e=0;e<i&&n[e]===d[e];e++);var N=i-e;for(c=1;c<=N&&n[i-c]===d[g-c];c++);return Fa=d.slice(e,1<c?1-c:void 0)}function Ya(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function bd(){return!1}function gt(e){function n(i,c,d,g,N){this._reactName=i,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=N,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(i=e[T],this[T]=i?i(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$a:bd,this.isPropagationStopped=bd,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),n}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=gt(ds),Dl=v({},ds,{view:0,detail:0}),b0=gt(Dl),Jr,Xr,Rl,Ja=v({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rl&&(Rl&&e.type==="mousemove"?(Jr=e.screenX-Rl.screenX,Xr=e.screenY-Rl.screenY):Xr=Jr=0,Rl=e),Jr)},movementY:function(e){return"movementY"in e?e.movementY:Xr}}),Nd=gt(Ja),N0=v({},Ja,{dataTransfer:0}),j0=gt(N0),w0=v({},Dl,{relatedTarget:0}),Zr=gt(w0),C0=v({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),T0=gt(C0),S0=v({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),E0=gt(S0),A0=v({},ds,{data:0}),jd=gt(A0),M0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=D0[e])?!!n[e]:!1}function Qr(){return R0}var I0=v({},Dl,{key:function(e){if(e.key){var n=M0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(e){return e.type==="keypress"?Ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k0=gt(I0),L0=v({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wd=gt(L0),U0=v({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),O0=gt(U0),P0=v({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=gt(P0),V0=v({},Ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),z0=gt(V0),q0=v({},ds,{newState:0,oldState:0}),G0=gt(q0),H0=[9,13,27,32],Wr=hn&&"CompositionEvent"in window,Il=null;hn&&"documentMode"in document&&(Il=document.documentMode);var F0=hn&&"TextEvent"in window&&!Il,Cd=hn&&(!Wr||Il&&8<Il&&11>=Il),Td=" ",Sd=!1;function Ed(e,n){switch(e){case"keyup":return H0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hs=!1;function Y0(e,n){switch(e){case"compositionend":return Ad(n);case"keypress":return n.which!==32?null:(Sd=!0,Td);case"textInput":return e=n.data,e===Td&&Sd?null:e;default:return null}}function $0(e,n){if(Hs)return e==="compositionend"||!Wr&&Ed(e,n)?(e=vd(),Fa=Kr=Un=null,Hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Cd&&n.locale!=="ko"?null:n.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!K0[e.type]:n==="textarea"}function _d(e,n,i,c){qs?Gs?Gs.push(c):Gs=[c]:qs=c,n=Li(n,"onChange"),0<n.length&&(i=new Ka("onChange","change",null,i,c),e.push({event:i,listeners:n}))}var kl=null,Ll=null;function J0(e){dh(e,0)}function Xa(e){var n=Al(e);if(dd(n))return e}function Dd(e,n){if(e==="change")return n}var Rd=!1;if(hn){var eo;if(hn){var to="oninput"in document;if(!to){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),to=typeof Id.oninput=="function"}eo=to}else eo=!1;Rd=eo&&(!document.documentMode||9<document.documentMode)}function kd(){kl&&(kl.detachEvent("onpropertychange",Ld),Ll=kl=null)}function Ld(e){if(e.propertyName==="value"&&Xa(Ll)){var n=[];_d(n,Ll,e,Fr(e)),yd(J0,n)}}function X0(e,n,i){e==="focusin"?(kd(),kl=n,Ll=i,kl.attachEvent("onpropertychange",Ld)):e==="focusout"&&kd()}function Z0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xa(Ll)}function Q0(e,n){if(e==="click")return Xa(n)}function W0(e,n){if(e==="input"||e==="change")return Xa(n)}function ey(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Tt=typeof Object.is=="function"?Object.is:ey;function Ul(e,n){if(Tt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var d=i[c];if(!fn.call(n,d)||!Tt(e[d],n[d]))return!1}return!0}function Ud(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Od(e,n){var i=Ud(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=n&&c>=n)return{node:i,offset:n-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ud(i)}}function Pd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Pd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Bd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ga(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=Ga(e.document)}return n}function no(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var ty=hn&&"documentMode"in document&&11>=document.documentMode,Fs=null,so=null,Ol=null,lo=!1;function Vd(e,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;lo||Fs==null||Fs!==Ga(c)||(c=Fs,"selectionStart"in c&&no(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ol&&Ul(Ol,c)||(Ol=c,c=Li(so,"onSelect"),0<c.length&&(n=new Ka("onSelect","select",null,n,i),e.push({event:n,listeners:c}),n.target=Fs)))}function fs(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Ys={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},ao={},zd={};hn&&(zd=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ms(e){if(ao[e])return ao[e];if(!Ys[e])return e;var n=Ys[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in zd)return ao[e]=n[i];return e}var qd=ms("animationend"),Gd=ms("animationiteration"),Hd=ms("animationstart"),ny=ms("transitionrun"),sy=ms("transitionstart"),ly=ms("transitioncancel"),Fd=ms("transitionend"),Yd=new Map,io="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");io.push("scrollEnd");function Ft(e,n){Yd.set(e,n),us(n,[e])}var $d=new WeakMap;function Lt(e,n){if(typeof e=="object"&&e!==null){var i=$d.get(e);return i!==void 0?i:(n={value:e,source:n,stack:cd(n)},$d.set(e,n),n)}return{value:e,source:n,stack:cd(n)}}var Ut=[],$s=0,ro=0;function Za(){for(var e=$s,n=ro=$s=0;n<e;){var i=Ut[n];Ut[n++]=null;var c=Ut[n];Ut[n++]=null;var d=Ut[n];Ut[n++]=null;var g=Ut[n];if(Ut[n++]=null,c!==null&&d!==null){var N=c.pending;N===null?d.next=d:(d.next=N.next,N.next=d),c.pending=d}g!==0&&Kd(i,d,g)}}function Qa(e,n,i,c){Ut[$s++]=e,Ut[$s++]=n,Ut[$s++]=i,Ut[$s++]=c,ro|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function oo(e,n,i,c){return Qa(e,n,i,c),Wa(e)}function Ks(e,n){return Qa(e,null,null,n),Wa(e)}function Kd(e,n,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var d=!1,g=e.return;g!==null;)g.childLanes|=i,c=g.alternate,c!==null&&(c.childLanes|=i),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(d=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,d&&n!==null&&(d=31-Ct(i),e=g.hiddenUpdates,c=e[d],c===null?e[d]=[n]:c.push(n),n.lane=i|536870912),g):null}function Wa(e){if(50<oa)throw oa=0,xc=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Js={};function ay(e,n,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,n,i,c){return new ay(e,n,i,c)}function co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xn(e,n){var i=e.alternate;return i===null?(i=St(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Jd(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ei(e,n,i,c,d,g){var N=0;if(c=e,typeof e=="function")co(e)&&(N=1);else if(typeof e=="string")N=rv(e,i,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=St(31,i,n,d),e.elementType=H,e.lanes=g,e;case A:return hs(i.children,d,g,n);case _:N=8,d|=24;break;case M:return e=St(12,i,n,d|2),e.elementType=M,e.lanes=g,e;case L:return e=St(13,i,n,d),e.elementType=L,e.lanes=g,e;case te:return e=St(19,i,n,d),e.elementType=te,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:case V:N=10;break e;case I:N=9;break e;case B:N=11;break e;case W:N=14;break e;case z:N=16,c=null;break e}N=29,i=Error(r(130,e===null?"null":typeof e,"")),c=null}return n=St(N,i,n,d),n.elementType=e,n.type=c,n.lanes=g,n}function hs(e,n,i,c){return e=St(7,e,c,n),e.lanes=i,e}function uo(e,n,i){return e=St(6,e,null,n),e.lanes=i,e}function fo(e,n,i){return n=St(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Xs=[],Zs=0,ti=null,ni=0,Ot=[],Pt=0,xs=null,gn=1,pn="";function gs(e,n){Xs[Zs++]=ni,Xs[Zs++]=ti,ti=e,ni=n}function Xd(e,n,i){Ot[Pt++]=gn,Ot[Pt++]=pn,Ot[Pt++]=xs,xs=e;var c=gn;e=pn;var d=32-Ct(c)-1;c&=~(1<<d),i+=1;var g=32-Ct(n)+d;if(30<g){var N=d-d%5;g=(c&(1<<N)-1).toString(32),c>>=N,d-=N,gn=1<<32-Ct(n)+d|i<<d|c,pn=g+e}else gn=1<<g|i<<d|c,pn=e}function mo(e){e.return!==null&&(gs(e,1),Xd(e,1,0))}function ho(e){for(;e===ti;)ti=Xs[--Zs],Xs[Zs]=null,ni=Xs[--Zs],Xs[Zs]=null;for(;e===xs;)xs=Ot[--Pt],Ot[Pt]=null,pn=Ot[--Pt],Ot[Pt]=null,gn=Ot[--Pt],Ot[Pt]=null}var mt=null,Ve=null,Ee=!1,ps=null,en=!1,xo=Error(r(519));function ys(e){var n=Error(r(418,""));throw Vl(Lt(n,e)),xo}function Zd(e){var n=e.stateNode,i=e.type,c=e.memoizedProps;switch(n[ot]=e,n[xt]=c,i){case"dialog":Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":case"embed":Ce("load",n);break;case"video":case"audio":for(i=0;i<ua.length;i++)Ce(ua[i],n);break;case"source":Ce("error",n);break;case"img":case"image":case"link":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"input":Ce("invalid",n),fd(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),qa(n);break;case"select":Ce("invalid",n);break;case"textarea":Ce("invalid",n),hd(n,c.value,c.defaultValue,c.children),qa(n)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||xh(n.textContent,i)?(c.popover!=null&&(Ce("beforetoggle",n),Ce("toggle",n)),c.onScroll!=null&&Ce("scroll",n),c.onScrollEnd!=null&&Ce("scrollend",n),c.onClick!=null&&(n.onclick=Ui),n=!0):n=!1,n||ys(e)}function Qd(e){for(mt=e.return;mt;)switch(mt.tag){case 5:case 13:en=!1;return;case 27:case 3:en=!0;return;default:mt=mt.return}}function Pl(e){if(e!==mt)return!1;if(!Ee)return Qd(e),Ee=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Dc(e.type,e.memoizedProps)),i=!i),i&&Ve&&ys(e),Qd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(n===0){Ve=$t(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;e=e.nextSibling}Ve=null}}else n===27?(n=Ve,Qn(e.type)?(e=Lc,Lc=null,Ve=e):Ve=n):Ve=mt?$t(e.stateNode.nextSibling):null;return!0}function Bl(){Ve=mt=null,Ee=!1}function Wd(){var e=ps;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),ps=null),e}function Vl(e){ps===null?ps=[e]:ps.push(e)}var go=ee(null),vs=null,yn=null;function On(e,n,i){ie(go,n._currentValue),n._currentValue=i}function vn(e){e._currentValue=go.current,Q(go)}function po(e,n,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===i)break;e=e.return}}function yo(e,n,i,c){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var g=d.dependencies;if(g!==null){var N=d.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=d;for(var R=0;R<n.length;R++)if(T.context===n[R]){g.lanes|=i,T=g.alternate,T!==null&&(T.lanes|=i),po(g.return,i,e),c||(N=null);break e}g=T.next}}else if(d.tag===18){if(N=d.return,N===null)throw Error(r(341));N.lanes|=i,g=N.alternate,g!==null&&(g.lanes|=i),po(N,i,e),N=null}else N=d.child;if(N!==null)N.return=d;else for(N=d;N!==null;){if(N===e){N=null;break}if(d=N.sibling,d!==null){d.return=N.return,N=d;break}N=N.return}d=N}}function zl(e,n,i,c){e=null;for(var d=n,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var N=d.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var T=d.type;Tt(d.pendingProps.value,N.value)||(e!==null?e.push(T):e=[T])}}else if(d===qe.current){if(N=d.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ga):e=[ga])}d=d.return}e!==null&&yo(n,e,i,c),n.flags|=262144}function si(e){for(e=e.firstContext;e!==null;){if(!Tt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function bs(e){vs=e,yn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return ef(vs,e)}function li(e,n){return vs===null&&bs(e),ef(e,n)}function ef(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},yn===null){if(e===null)throw Error(r(308));yn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else yn=yn.next=n;return i}var iy=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},ry=a.unstable_scheduleCallback,oy=a.unstable_NormalPriority,$e={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vo(){return{controller:new iy,data:new Map,refCount:0}}function ql(e){e.refCount--,e.refCount===0&&ry(oy,function(){e.controller.abort()})}var Gl=null,bo=0,Qs=0,Ws=null;function cy(e,n){if(Gl===null){var i=Gl=[];bo=0,Qs=jc(),Ws={status:"pending",value:void 0,then:function(c){i.push(c)}}}return bo++,n.then(tf,tf),n}function tf(){if(--bo===0&&Gl!==null){Ws!==null&&(Ws.status="fulfilled");var e=Gl;Gl=null,Qs=0,Ws=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function uy(e,n){var i=[],c={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var d=0;d<i.length;d++)(0,i[d])(n)},function(d){for(c.status="rejected",c.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),c}var nf=S.S;S.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&cy(e,n),nf!==null&&nf(e,n)};var Ns=ee(null);function No(){var e=Ns.current;return e!==null?e:Le.pooledCache}function ai(e,n){n===null?ie(Ns,Ns.current):ie(Ns,n.pool)}function sf(){var e=No();return e===null?null:{parent:$e._currentValue,pool:e}}var Hl=Error(r(460)),lf=Error(r(474)),ii=Error(r(542)),jo={then:function(){}};function af(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ri(){}function rf(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(ri,ri),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cf(e),e;default:if(typeof n.status=="string")n.then(ri,ri);else{if(e=Le,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=c}},function(c){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cf(e),e}throw Fl=n,Hl}}var Fl=null;function of(){if(Fl===null)throw Error(r(459));var e=Fl;return Fl=null,e}function cf(e){if(e===Hl||e===ii)throw Error(r(483))}var Pn=!1;function wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Co(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Vn(e,n,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),c.pending=n,n=Wa(e),Kd(e,null,i),n}return Qa(e,c,n,i),Wa(e)}function Yl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,td(e,i)}}function To(e,n){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var d=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var N={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?d=g=N:g=g.next=N,i=i.next}while(i!==null);g===null?d=g=n:g=g.next=n}else d=g=n;i={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var So=!1;function $l(){if(So){var e=Ws;if(e!==null)throw e}}function Kl(e,n,i,c){So=!1;var d=e.updateQueue;Pn=!1;var g=d.firstBaseUpdate,N=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var R=T,Y=R.next;R.next=null,N===null?g=Y:N.next=Y,N=R;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==N&&(T===null?ne.firstBaseUpdate=Y:T.next=Y,ne.lastBaseUpdate=R))}if(g!==null){var le=d.baseState;N=0,ne=Y=R=null,T=g;do{var K=T.lane&-536870913,J=K!==T.lane;if(J?(Te&K)===K:(c&K)===K){K!==0&&K===Qs&&(So=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ye=e,ge=T;K=n;var Ie=i;switch(ge.tag){case 1:if(ye=ge.payload,typeof ye=="function"){le=ye.call(Ie,le,K);break e}le=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ge.payload,K=typeof ye=="function"?ye.call(Ie,le,K):ye,K==null)break e;le=v({},le,K);break e;case 2:Pn=!0}}K=T.callback,K!==null&&(e.flags|=64,J&&(e.flags|=8192),J=d.callbacks,J===null?d.callbacks=[K]:J.push(K))}else J={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(Y=ne=J,R=le):ne=ne.next=J,N|=K;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;J=T,T=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);ne===null&&(R=le),d.baseState=R,d.firstBaseUpdate=Y,d.lastBaseUpdate=ne,g===null&&(d.shared.lanes=0),Kn|=N,e.lanes=N,e.memoizedState=le}}function uf(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function df(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)uf(i[e],n)}var el=ee(null),oi=ee(0);function ff(e,n){e=Sn,ie(oi,e),ie(el,n),Sn=e|n.baseLanes}function Eo(){ie(oi,Sn),ie(el,el.current)}function Ao(){Sn=oi.current,Q(el),Q(oi)}var zn=0,Ne=null,De=null,Fe=null,ci=!1,tl=!1,js=!1,ui=0,Jl=0,nl=null,dy=0;function Ge(){throw Error(r(321))}function Mo(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!Tt(e[i],n[i]))return!1;return!0}function _o(e,n,i,c,d,g){return zn=g,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,S.H=e===null||e.memoizedState===null?Jf:Xf,js=!1,g=i(c,d),js=!1,tl&&(g=hf(n,i,c,d)),mf(e),g}function mf(e){S.H=gi;var n=De!==null&&De.next!==null;if(zn=0,Fe=De=Ne=null,ci=!1,Jl=0,nl=null,n)throw Error(r(300));e===null||We||(e=e.dependencies,e!==null&&si(e)&&(We=!0))}function hf(e,n,i,c){Ne=e;var d=0;do{if(tl&&(nl=null),Jl=0,tl=!1,25<=d)throw Error(r(301));if(d+=1,Fe=De=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}S.H=yy,g=n(i,c)}while(tl);return g}function fy(){var e=S.H,n=e.useState()[0];return n=typeof n.then=="function"?Xl(n):n,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(Ne.flags|=1024),n}function Do(){var e=ui!==0;return ui=0,e}function Ro(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Io(e){if(ci){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ci=!1}zn=0,Fe=De=Ne=null,tl=!1,Jl=ui=0,nl=null}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ne.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ye(){if(De===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var n=Fe===null?Ne.memoizedState:Fe.next;if(n!==null)Fe=n,De=e;else{if(e===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Fe===null?Ne.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(e){var n=Jl;return Jl+=1,nl===null&&(nl=[]),e=rf(nl,e,n),n=Ne,(Fe===null?n.memoizedState:Fe.next)===null&&(n=n.alternate,S.H=n===null||n.memoizedState===null?Jf:Xf),e}function di(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xl(e);if(e.$$typeof===V)return ct(e)}throw Error(r(438,String(e)))}function Lo(e){var n=null,i=Ne.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=ko(),Ne.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),c=0;c<e;c++)i[c]=Z;return n.index++,i}function bn(e,n){return typeof n=="function"?n(e):n}function fi(e){var n=Ye();return Uo(n,De,e)}function Uo(e,n,i){var c=e.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=e.baseQueue,g=c.pending;if(g!==null){if(d!==null){var N=d.next;d.next=g.next,g.next=N}n.baseQueue=d=g,c.pending=null}if(g=e.baseState,d===null)e.memoizedState=g;else{n=d.next;var T=N=null,R=null,Y=n,ne=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(Te&le)===le:(zn&le)===le){var K=Y.revertLane;if(K===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===Qs&&(ne=!0);else if((zn&K)===K){Y=Y.next,K===Qs&&(ne=!0);continue}else le={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},R===null?(T=R=le,N=g):R=R.next=le,Ne.lanes|=K,Kn|=K;le=Y.action,js&&i(g,le),g=Y.hasEagerState?Y.eagerState:i(g,le)}else K={lane:le,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},R===null?(T=R=K,N=g):R=R.next=K,Ne.lanes|=le,Kn|=le;Y=Y.next}while(Y!==null&&Y!==n);if(R===null?N=g:R.next=T,!Tt(g,e.memoizedState)&&(We=!0,ne&&(i=Ws,i!==null)))throw i;e.memoizedState=g,e.baseState=N,e.baseQueue=R,c.lastRenderedState=g}return d===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Oo(e){var n=Ye(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var c=i.dispatch,d=i.pending,g=n.memoizedState;if(d!==null){i.pending=null;var N=d=d.next;do g=e(g,N.action),N=N.next;while(N!==d);Tt(g,n.memoizedState)||(We=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),i.lastRenderedState=g}return[g,c]}function xf(e,n,i){var c=Ne,d=Ye(),g=Ee;if(g){if(i===void 0)throw Error(r(407));i=i()}else i=n();var N=!Tt((De||d).memoizedState,i);N&&(d.memoizedState=i,We=!0),d=d.queue;var T=yf.bind(null,c,d,e);if(Zl(2048,8,T,[e]),d.getSnapshot!==n||N||Fe!==null&&Fe.memoizedState.tag&1){if(c.flags|=2048,sl(9,mi(),pf.bind(null,c,d,i,n),null),Le===null)throw Error(r(349));g||(zn&124)!==0||gf(c,n,i)}return i}function gf(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Ne.updateQueue,n===null?(n=ko(),Ne.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function pf(e,n,i,c){n.value=i,n.getSnapshot=c,vf(n)&&bf(e)}function yf(e,n,i){return i(function(){vf(n)&&bf(e)})}function vf(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!Tt(e,i)}catch{return!0}}function bf(e){var n=Ks(e,2);n!==null&&Dt(n,e,2)}function Po(e){var n=pt();if(typeof e=="function"){var i=e;if(e=i(),js){kn(!0);try{i()}finally{kn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:e},n}function Nf(e,n,i,c){return e.baseState=i,Uo(e,De,typeof c=="function"?c:bn)}function my(e,n,i,c,d){if(xi(e))throw Error(r(485));if(e=n.action,e!==null){var g={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){g.listeners.push(N)}};S.T!==null?i(!0):g.isTransition=!1,c(g),i=n.pending,i===null?(g.next=n.pending=g,jf(n,g)):(g.next=i.next,n.pending=i.next=g)}}function jf(e,n){var i=n.action,c=n.payload,d=e.state;if(n.isTransition){var g=S.T,N={};S.T=N;try{var T=i(d,c),R=S.S;R!==null&&R(N,T),wf(e,n,T)}catch(Y){Bo(e,n,Y)}finally{S.T=g}}else try{g=i(d,c),wf(e,n,g)}catch(Y){Bo(e,n,Y)}}function wf(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){Cf(e,n,c)},function(c){return Bo(e,n,c)}):Cf(e,n,i)}function Cf(e,n,i){n.status="fulfilled",n.value=i,Tf(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,jf(e,i)))}function Bo(e,n,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,Tf(n),n=n.next;while(n!==c)}e.action=null}function Tf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Sf(e,n){return n}function Ef(e,n){if(Ee){var i=Le.formState;if(i!==null){e:{var c=Ne;if(Ee){if(Ve){t:{for(var d=Ve,g=en;d.nodeType!==8;){if(!g){d=null;break t}if(d=$t(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Ve=$t(d.nextSibling),c=d.data==="F!";break e}}ys(c)}c=!1}c&&(n=i[0])}}return i=pt(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sf,lastRenderedState:n},i.queue=c,i=Yf.bind(null,Ne,c),c.dispatch=i,c=Po(!1),g=Ho.bind(null,Ne,!1,c.queue),c=pt(),d={state:n,dispatch:null,action:e,pending:null},c.queue=d,i=my.bind(null,Ne,d,g,i),d.dispatch=i,c.memoizedState=e,[n,i,!1]}function Af(e){var n=Ye();return Mf(n,De,e)}function Mf(e,n,i){if(n=Uo(e,n,Sf)[0],e=fi(bn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Xl(n)}catch(N){throw N===Hl?ii:N}else c=n;n=Ye();var d=n.queue,g=d.dispatch;return i!==n.memoizedState&&(Ne.flags|=2048,sl(9,mi(),hy.bind(null,d,i),null)),[c,g,e]}function hy(e,n){e.action=n}function _f(e){var n=Ye(),i=De;if(i!==null)return Mf(n,i,e);Ye(),n=n.memoizedState,i=Ye();var c=i.queue.dispatch;return i.memoizedState=e,[n,c,!1]}function sl(e,n,i,c){return e={tag:e,create:i,deps:c,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=ko(),Ne.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,n.lastEffect=e),e}function mi(){return{destroy:void 0,resource:void 0}}function Df(){return Ye().memoizedState}function hi(e,n,i,c){var d=pt();c=c===void 0?null:c,Ne.flags|=e,d.memoizedState=sl(1|n,mi(),i,c)}function Zl(e,n,i,c){var d=Ye();c=c===void 0?null:c;var g=d.memoizedState.inst;De!==null&&c!==null&&Mo(c,De.memoizedState.deps)?d.memoizedState=sl(n,g,i,c):(Ne.flags|=e,d.memoizedState=sl(1|n,g,i,c))}function Rf(e,n){hi(8390656,8,e,n)}function If(e,n){Zl(2048,8,e,n)}function kf(e,n){return Zl(4,2,e,n)}function Lf(e,n){return Zl(4,4,e,n)}function Uf(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Of(e,n,i){i=i!=null?i.concat([e]):null,Zl(4,4,Uf.bind(null,n,e),i)}function Vo(){}function Pf(e,n){var i=Ye();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Mo(n,c[1])?c[0]:(i.memoizedState=[e,n],e)}function Bf(e,n){var i=Ye();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Mo(n,c[1]))return c[0];if(c=e(),js){kn(!0);try{e()}finally{kn(!1)}}return i.memoizedState=[c,n],c}function zo(e,n,i){return i===void 0||(zn&1073741824)!==0?e.memoizedState=n:(e.memoizedState=i,e=qm(),Ne.lanes|=e,Kn|=e,i)}function Vf(e,n,i,c){return Tt(i,n)?i:el.current!==null?(e=zo(e,i,c),Tt(e,n)||(We=!0),e):(zn&42)===0?(We=!0,e.memoizedState=i):(e=qm(),Ne.lanes|=e,Kn|=e,n)}function zf(e,n,i,c,d){var g=q.p;q.p=g!==0&&8>g?g:8;var N=S.T,T={};S.T=T,Ho(e,!1,n,i);try{var R=d(),Y=S.S;if(Y!==null&&Y(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ne=uy(R,c);Ql(e,n,ne,_t(e))}else Ql(e,n,c,_t(e))}catch(le){Ql(e,n,{then:function(){},status:"rejected",reason:le},_t())}finally{q.p=g,S.T=N}}function xy(){}function qo(e,n,i,c){if(e.tag!==5)throw Error(r(476));var d=qf(e).queue;zf(e,d,n,X,i===null?xy:function(){return Gf(e),i(c)})}function qf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:X},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Gf(e){var n=qf(e).next.queue;Ql(e,n,{},_t())}function Go(){return ct(ga)}function Hf(){return Ye().memoizedState}function Ff(){return Ye().memoizedState}function gy(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=_t();e=Bn(i);var c=Vn(n,e,i);c!==null&&(Dt(c,n,i),Yl(c,n,i)),n={cache:vo()},e.payload=n;return}n=n.return}}function py(e,n,i){var c=_t();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},xi(e)?$f(n,i):(i=oo(e,n,i,c),i!==null&&(Dt(i,e,c),Kf(i,n,c)))}function Yf(e,n,i){var c=_t();Ql(e,n,i,c)}function Ql(e,n,i,c){var d={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(xi(e))$f(n,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var N=n.lastRenderedState,T=g(N,i);if(d.hasEagerState=!0,d.eagerState=T,Tt(T,N))return Qa(e,n,d,0),Le===null&&Za(),!1}catch{}finally{}if(i=oo(e,n,d,c),i!==null)return Dt(i,e,c),Kf(i,n,c),!0}return!1}function Ho(e,n,i,c){if(c={lane:2,revertLane:jc(),action:c,hasEagerState:!1,eagerState:null,next:null},xi(e)){if(n)throw Error(r(479))}else n=oo(e,i,c,2),n!==null&&Dt(n,e,2)}function xi(e){var n=e.alternate;return e===Ne||n!==null&&n===Ne}function $f(e,n){tl=ci=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Kf(e,n,i){if((i&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,td(e,i)}}var gi={readContext:ct,use:di,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge},Jf={readContext:ct,use:di,useCallback:function(e,n){return pt().memoizedState=[e,n===void 0?null:n],e},useContext:ct,useEffect:Rf,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,hi(4194308,4,Uf.bind(null,n,e),i)},useLayoutEffect:function(e,n){return hi(4194308,4,e,n)},useInsertionEffect:function(e,n){hi(4,2,e,n)},useMemo:function(e,n){var i=pt();n=n===void 0?null:n;var c=e();if(js){kn(!0);try{e()}finally{kn(!1)}}return i.memoizedState=[c,n],c},useReducer:function(e,n,i){var c=pt();if(i!==void 0){var d=i(n);if(js){kn(!0);try{i(n)}finally{kn(!1)}}}else d=n;return c.memoizedState=c.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},c.queue=e,e=e.dispatch=py.bind(null,Ne,e),[c.memoizedState,e]},useRef:function(e){var n=pt();return e={current:e},n.memoizedState=e},useState:function(e){e=Po(e);var n=e.queue,i=Yf.bind(null,Ne,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Vo,useDeferredValue:function(e,n){var i=pt();return zo(i,e,n)},useTransition:function(){var e=Po(!1);return e=zf.bind(null,Ne,e.queue,!0,!1),pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var c=Ne,d=pt();if(Ee){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),Le===null)throw Error(r(349));(Te&124)!==0||gf(c,n,i)}d.memoizedState=i;var g={value:i,getSnapshot:n};return d.queue=g,Rf(yf.bind(null,c,g,e),[e]),c.flags|=2048,sl(9,mi(),pf.bind(null,c,g,i,n),null),i},useId:function(){var e=pt(),n=Le.identifierPrefix;if(Ee){var i=pn,c=gn;i=(c&~(1<<32-Ct(c)-1)).toString(32)+i,n="«"+n+"R"+i,i=ui++,0<i&&(n+="H"+i.toString(32)),n+="»"}else i=dy++,n="«"+n+"r"+i.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:Go,useFormState:Ef,useActionState:Ef,useOptimistic:function(e){var n=pt();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Ho.bind(null,Ne,!0,i),i.dispatch=n,[e,n]},useMemoCache:Lo,useCacheRefresh:function(){return pt().memoizedState=gy.bind(null,Ne)}},Xf={readContext:ct,use:di,useCallback:Pf,useContext:ct,useEffect:If,useImperativeHandle:Of,useInsertionEffect:kf,useLayoutEffect:Lf,useMemo:Bf,useReducer:fi,useRef:Df,useState:function(){return fi(bn)},useDebugValue:Vo,useDeferredValue:function(e,n){var i=Ye();return Vf(i,De.memoizedState,e,n)},useTransition:function(){var e=fi(bn)[0],n=Ye().memoizedState;return[typeof e=="boolean"?e:Xl(e),n]},useSyncExternalStore:xf,useId:Hf,useHostTransitionStatus:Go,useFormState:Af,useActionState:Af,useOptimistic:function(e,n){var i=Ye();return Nf(i,De,e,n)},useMemoCache:Lo,useCacheRefresh:Ff},yy={readContext:ct,use:di,useCallback:Pf,useContext:ct,useEffect:If,useImperativeHandle:Of,useInsertionEffect:kf,useLayoutEffect:Lf,useMemo:Bf,useReducer:Oo,useRef:Df,useState:function(){return Oo(bn)},useDebugValue:Vo,useDeferredValue:function(e,n){var i=Ye();return De===null?zo(i,e,n):Vf(i,De.memoizedState,e,n)},useTransition:function(){var e=Oo(bn)[0],n=Ye().memoizedState;return[typeof e=="boolean"?e:Xl(e),n]},useSyncExternalStore:xf,useId:Hf,useHostTransitionStatus:Go,useFormState:_f,useActionState:_f,useOptimistic:function(e,n){var i=Ye();return De!==null?Nf(i,De,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Lo,useCacheRefresh:Ff},ll=null,Wl=0;function pi(e){var n=Wl;return Wl+=1,ll===null&&(ll=[]),rf(ll,e,n)}function ea(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function yi(e,n){throw n.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Zf(e){var n=e._init;return n(e._payload)}function Qf(e){function n(G,O){if(e){var F=G.deletions;F===null?(G.deletions=[O],G.flags|=16):F.push(O)}}function i(G,O){if(!e)return null;for(;O!==null;)n(G,O),O=O.sibling;return null}function c(G){for(var O=new Map;G!==null;)G.key!==null?O.set(G.key,G):O.set(G.index,G),G=G.sibling;return O}function d(G,O){return G=xn(G,O),G.index=0,G.sibling=null,G}function g(G,O,F){return G.index=F,e?(F=G.alternate,F!==null?(F=F.index,F<O?(G.flags|=67108866,O):F):(G.flags|=67108866,O)):(G.flags|=1048576,O)}function N(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function T(G,O,F,se){return O===null||O.tag!==6?(O=uo(F,G.mode,se),O.return=G,O):(O=d(O,F),O.return=G,O)}function R(G,O,F,se){var fe=F.type;return fe===A?ne(G,O,F.props.children,se,F.key):O!==null&&(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===z&&Zf(fe)===O.type)?(O=d(O,F.props),ea(O,F),O.return=G,O):(O=ei(F.type,F.key,F.props,null,G.mode,se),ea(O,F),O.return=G,O)}function Y(G,O,F,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=fo(F,G.mode,se),O.return=G,O):(O=d(O,F.children||[]),O.return=G,O)}function ne(G,O,F,se,fe){return O===null||O.tag!==7?(O=hs(F,G.mode,se,fe),O.return=G,O):(O=d(O,F),O.return=G,O)}function le(G,O,F){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=uo(""+O,G.mode,F),O.return=G,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return F=ei(O.type,O.key,O.props,null,G.mode,F),ea(F,O),F.return=G,F;case C:return O=fo(O,G.mode,F),O.return=G,O;case z:var se=O._init;return O=se(O._payload),le(G,O,F)}if(E(O)||ae(O))return O=hs(O,G.mode,F,null),O.return=G,O;if(typeof O.then=="function")return le(G,pi(O),F);if(O.$$typeof===V)return le(G,li(G,O),F);yi(G,O)}return null}function K(G,O,F,se){var fe=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return fe!==null?null:T(G,O,""+F,se);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===fe?R(G,O,F,se):null;case C:return F.key===fe?Y(G,O,F,se):null;case z:return fe=F._init,F=fe(F._payload),K(G,O,F,se)}if(E(F)||ae(F))return fe!==null?null:ne(G,O,F,se,null);if(typeof F.then=="function")return K(G,O,pi(F),se);if(F.$$typeof===V)return K(G,O,li(G,F),se);yi(G,F)}return null}function J(G,O,F,se,fe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return G=G.get(F)||null,T(O,G,""+se,fe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return G=G.get(se.key===null?F:se.key)||null,R(O,G,se,fe);case C:return G=G.get(se.key===null?F:se.key)||null,Y(O,G,se,fe);case z:var je=se._init;return se=je(se._payload),J(G,O,F,se,fe)}if(E(se)||ae(se))return G=G.get(F)||null,ne(O,G,se,fe,null);if(typeof se.then=="function")return J(G,O,F,pi(se),fe);if(se.$$typeof===V)return J(G,O,F,li(O,se),fe);yi(O,se)}return null}function ye(G,O,F,se){for(var fe=null,je=null,he=O,pe=O=0,tt=null;he!==null&&pe<F.length;pe++){he.index>pe?(tt=he,he=null):tt=he.sibling;var Se=K(G,he,F[pe],se);if(Se===null){he===null&&(he=tt);break}e&&he&&Se.alternate===null&&n(G,he),O=g(Se,O,pe),je===null?fe=Se:je.sibling=Se,je=Se,he=tt}if(pe===F.length)return i(G,he),Ee&&gs(G,pe),fe;if(he===null){for(;pe<F.length;pe++)he=le(G,F[pe],se),he!==null&&(O=g(he,O,pe),je===null?fe=he:je.sibling=he,je=he);return Ee&&gs(G,pe),fe}for(he=c(he);pe<F.length;pe++)tt=J(he,G,pe,F[pe],se),tt!==null&&(e&&tt.alternate!==null&&he.delete(tt.key===null?pe:tt.key),O=g(tt,O,pe),je===null?fe=tt:je.sibling=tt,je=tt);return e&&he.forEach(function(ss){return n(G,ss)}),Ee&&gs(G,pe),fe}function ge(G,O,F,se){if(F==null)throw Error(r(151));for(var fe=null,je=null,he=O,pe=O=0,tt=null,Se=F.next();he!==null&&!Se.done;pe++,Se=F.next()){he.index>pe?(tt=he,he=null):tt=he.sibling;var ss=K(G,he,Se.value,se);if(ss===null){he===null&&(he=tt);break}e&&he&&ss.alternate===null&&n(G,he),O=g(ss,O,pe),je===null?fe=ss:je.sibling=ss,je=ss,he=tt}if(Se.done)return i(G,he),Ee&&gs(G,pe),fe;if(he===null){for(;!Se.done;pe++,Se=F.next())Se=le(G,Se.value,se),Se!==null&&(O=g(Se,O,pe),je===null?fe=Se:je.sibling=Se,je=Se);return Ee&&gs(G,pe),fe}for(he=c(he);!Se.done;pe++,Se=F.next())Se=J(he,G,pe,Se.value,se),Se!==null&&(e&&Se.alternate!==null&&he.delete(Se.key===null?pe:Se.key),O=g(Se,O,pe),je===null?fe=Se:je.sibling=Se,je=Se);return e&&he.forEach(function(vv){return n(G,vv)}),Ee&&gs(G,pe),fe}function Ie(G,O,F,se){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:e:{for(var fe=F.key;O!==null;){if(O.key===fe){if(fe=F.type,fe===A){if(O.tag===7){i(G,O.sibling),se=d(O,F.props.children),se.return=G,G=se;break e}}else if(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===z&&Zf(fe)===O.type){i(G,O.sibling),se=d(O,F.props),ea(se,F),se.return=G,G=se;break e}i(G,O);break}else n(G,O);O=O.sibling}F.type===A?(se=hs(F.props.children,G.mode,se,F.key),se.return=G,G=se):(se=ei(F.type,F.key,F.props,null,G.mode,se),ea(se,F),se.return=G,G=se)}return N(G);case C:e:{for(fe=F.key;O!==null;){if(O.key===fe)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){i(G,O.sibling),se=d(O,F.children||[]),se.return=G,G=se;break e}else{i(G,O);break}else n(G,O);O=O.sibling}se=fo(F,G.mode,se),se.return=G,G=se}return N(G);case z:return fe=F._init,F=fe(F._payload),Ie(G,O,F,se)}if(E(F))return ye(G,O,F,se);if(ae(F)){if(fe=ae(F),typeof fe!="function")throw Error(r(150));return F=fe.call(F),ge(G,O,F,se)}if(typeof F.then=="function")return Ie(G,O,pi(F),se);if(F.$$typeof===V)return Ie(G,O,li(G,F),se);yi(G,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,O!==null&&O.tag===6?(i(G,O.sibling),se=d(O,F),se.return=G,G=se):(i(G,O),se=uo(F,G.mode,se),se.return=G,G=se),N(G)):i(G,O)}return function(G,O,F,se){try{Wl=0;var fe=Ie(G,O,F,se);return ll=null,fe}catch(he){if(he===Hl||he===ii)throw he;var je=St(29,he,null,G.mode);return je.lanes=se,je.return=G,je}finally{}}}var al=Qf(!0),Wf=Qf(!1),Bt=ee(null),tn=null;function qn(e){var n=e.alternate;ie(Ke,Ke.current&1),ie(Bt,e),tn===null&&(n===null||el.current!==null||n.memoizedState!==null)&&(tn=e)}function em(e){if(e.tag===22){if(ie(Ke,Ke.current),ie(Bt,e),tn===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(tn=e)}}else Gn()}function Gn(){ie(Ke,Ke.current),ie(Bt,Bt.current)}function Nn(e){Q(Bt),tn===e&&(tn=null),Q(Ke)}var Ke=ee(0);function vi(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||kc(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Fo(e,n,i,c){n=e.memoizedState,i=i(c,n),i=i==null?n:v({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yo={enqueueSetState:function(e,n,i){e=e._reactInternals;var c=_t(),d=Bn(c);d.payload=n,i!=null&&(d.callback=i),n=Vn(e,d,c),n!==null&&(Dt(n,e,c),Yl(n,e,c))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var c=_t(),d=Bn(c);d.tag=1,d.payload=n,i!=null&&(d.callback=i),n=Vn(e,d,c),n!==null&&(Dt(n,e,c),Yl(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=_t(),c=Bn(i);c.tag=2,n!=null&&(c.callback=n),n=Vn(e,c,i),n!==null&&(Dt(n,e,i),Yl(n,e,i))}};function tm(e,n,i,c,d,g,N){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,N):n.prototype&&n.prototype.isPureReactComponent?!Ul(i,c)||!Ul(d,g):!0}function nm(e,n,i,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==e&&Yo.enqueueReplaceState(n,n.state,null)}function ws(e,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(e=e.defaultProps){i===n&&(i=v({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}var bi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function sm(e){bi(e)}function lm(e){console.error(e)}function am(e){bi(e)}function Ni(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function im(e,n,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $o(e,n,i){return i=Bn(i),i.tag=3,i.payload={element:null},i.callback=function(){Ni(e,n)},i}function rm(e){return e=Bn(e),e.tag=3,e}function om(e,n,i,c){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;e.payload=function(){return d(g)},e.callback=function(){im(n,i,c)}}var N=i.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(e.callback=function(){im(n,i,c),typeof d!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function vy(e,n,i,c,d){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&zl(n,i,d,!0),i=Bt.current,i!==null){switch(i.tag){case 13:return tn===null?pc():i.alternate===null&&ze===0&&(ze=3),i.flags&=-257,i.flags|=65536,i.lanes=d,c===jo?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),vc(e,c,d)),!1;case 22:return i.flags|=65536,c===jo?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),vc(e,c,d)),!1}throw Error(r(435,i.tag))}return vc(e,c,d),pc(),!1}if(Ee)return n=Bt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,c!==xo&&(e=Error(r(422),{cause:c}),Vl(Lt(e,i)))):(c!==xo&&(n=Error(r(423),{cause:c}),Vl(Lt(n,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,c=Lt(c,i),d=$o(e.stateNode,c,d),To(e,d),ze!==4&&(ze=2)),!1;var g=Error(r(520),{cause:c});if(g=Lt(g,i),ra===null?ra=[g]:ra.push(g),ze!==4&&(ze=2),n===null)return!0;c=Lt(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=$o(i.stateNode,c,e),To(i,e),!1;case 1:if(n=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Jn===null||!Jn.has(g))))return i.flags|=65536,d&=-d,i.lanes|=d,d=rm(d),om(d,e,i,c),To(i,d),!1}i=i.return}while(i!==null);return!1}var cm=Error(r(461)),We=!1;function nt(e,n,i,c){n.child=e===null?Wf(n,null,i,c):al(n,e.child,i,c)}function um(e,n,i,c,d){i=i.render;var g=n.ref;if("ref"in c){var N={};for(var T in c)T!=="ref"&&(N[T]=c[T])}else N=c;return bs(n),c=_o(e,n,i,N,g,d),T=Do(),e!==null&&!We?(Ro(e,n,d),jn(e,n,d)):(Ee&&T&&mo(n),n.flags|=1,nt(e,n,c,d),n.child)}function dm(e,n,i,c,d){if(e===null){var g=i.type;return typeof g=="function"&&!co(g)&&g.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=g,fm(e,n,g,c,d)):(e=ei(i.type,null,c,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!tc(e,d)){var N=g.memoizedProps;if(i=i.compare,i=i!==null?i:Ul,i(N,c)&&e.ref===n.ref)return jn(e,n,d)}return n.flags|=1,e=xn(g,c),e.ref=n.ref,e.return=n,n.child=e}function fm(e,n,i,c,d){if(e!==null){var g=e.memoizedProps;if(Ul(g,c)&&e.ref===n.ref)if(We=!1,n.pendingProps=c=g,tc(e,d))(e.flags&131072)!==0&&(We=!0);else return n.lanes=e.lanes,jn(e,n,d)}return Ko(e,n,i,c,d)}function mm(e,n,i){var c=n.pendingProps,d=c.children,g=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((n.flags&128)!==0){if(c=g!==null?g.baseLanes|i:i,e!==null){for(d=n.child=e.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;n.childLanes=g&~c}else n.childLanes=0,n.child=null;return hm(e,n,c,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ai(n,g!==null?g.cachePool:null),g!==null?ff(n,g):Eo(),em(n);else return n.lanes=n.childLanes=536870912,hm(e,n,g!==null?g.baseLanes|i:i,i)}else g!==null?(ai(n,g.cachePool),ff(n,g),Gn(),n.memoizedState=null):(e!==null&&ai(n,null),Eo(),Gn());return nt(e,n,d,i),n.child}function hm(e,n,i,c){var d=No();return d=d===null?null:{parent:$e._currentValue,pool:d},n.memoizedState={baseLanes:i,cachePool:d},e!==null&&ai(n,null),Eo(),em(n),e!==null&&zl(e,n,c,!0),null}function ji(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Ko(e,n,i,c,d){return bs(n),i=_o(e,n,i,c,void 0,d),c=Do(),e!==null&&!We?(Ro(e,n,d),jn(e,n,d)):(Ee&&c&&mo(n),n.flags|=1,nt(e,n,i,d),n.child)}function xm(e,n,i,c,d,g){return bs(n),n.updateQueue=null,i=hf(n,c,i,d),mf(e),c=Do(),e!==null&&!We?(Ro(e,n,g),jn(e,n,g)):(Ee&&c&&mo(n),n.flags|=1,nt(e,n,i,g),n.child)}function gm(e,n,i,c,d){if(bs(n),n.stateNode===null){var g=Js,N=i.contextType;typeof N=="object"&&N!==null&&(g=ct(N)),g=new i(c,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yo,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=c,g.state=n.memoizedState,g.refs={},wo(n),N=i.contextType,g.context=typeof N=="object"&&N!==null?ct(N):Js,g.state=n.memoizedState,N=i.getDerivedStateFromProps,typeof N=="function"&&(Fo(n,i,N,c),g.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(N=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),N!==g.state&&Yo.enqueueReplaceState(g,g.state,null),Kl(n,c,g,d),$l(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){g=n.stateNode;var T=n.memoizedProps,R=ws(i,T);g.props=R;var Y=g.context,ne=i.contextType;N=Js,typeof ne=="object"&&ne!==null&&(N=ct(ne));var le=i.getDerivedStateFromProps;ne=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||Y!==N)&&nm(n,g,c,N),Pn=!1;var K=n.memoizedState;g.state=K,Kl(n,c,g,d),$l(),Y=n.memoizedState,T||K!==Y||Pn?(typeof le=="function"&&(Fo(n,i,le,c),Y=n.memoizedState),(R=Pn||tm(n,i,R,c,K,Y,N))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=Y),g.props=c,g.state=Y,g.context=N,c=R):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{g=n.stateNode,Co(e,n),N=n.memoizedProps,ne=ws(i,N),g.props=ne,le=n.pendingProps,K=g.context,Y=i.contextType,R=Js,typeof Y=="object"&&Y!==null&&(R=ct(Y)),T=i.getDerivedStateFromProps,(Y=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N!==le||K!==R)&&nm(n,g,c,R),Pn=!1,K=n.memoizedState,g.state=K,Kl(n,c,g,d),$l();var J=n.memoizedState;N!==le||K!==J||Pn||e!==null&&e.dependencies!==null&&si(e.dependencies)?(typeof T=="function"&&(Fo(n,i,T,c),J=n.memoizedState),(ne=Pn||tm(n,i,ne,c,K,J,R)||e!==null&&e.dependencies!==null&&si(e.dependencies))?(Y||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,J,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,J,R)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||N===e.memoizedProps&&K===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===e.memoizedProps&&K===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=J),g.props=c,g.state=J,g.context=R,c=ne):(typeof g.componentDidUpdate!="function"||N===e.memoizedProps&&K===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===e.memoizedProps&&K===e.memoizedState||(n.flags|=1024),c=!1)}return g=c,ji(e,n),c=(n.flags&128)!==0,g||c?(g=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&c?(n.child=al(n,e.child,null,d),n.child=al(n,null,i,d)):nt(e,n,i,d),n.memoizedState=g.state,e=n.child):e=jn(e,n,d),e}function pm(e,n,i,c){return Bl(),n.flags|=256,nt(e,n,i,c),n.child}var Jo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:sf()}}function Zo(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Vt),e}function ym(e,n,i){var c=n.pendingProps,d=!1,g=(n.flags&128)!==0,N;if((N=g)||(N=e!==null&&e.memoizedState===null?!1:(Ke.current&2)!==0),N&&(d=!0,n.flags&=-129),N=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ee){if(d?qn(n):Gn(),Ee){var T=Ve,R;if(R=T){e:{for(R=T,T=en;R.nodeType!==8;){if(!T){T=null;break e}if(R=$t(R.nextSibling),R===null){T=null;break e}}T=R}T!==null?(n.memoizedState={dehydrated:T,treeContext:xs!==null?{id:gn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},R=St(18,null,null,0),R.stateNode=T,R.return=n,n.child=R,mt=n,Ve=null,R=!0):R=!1}R||ys(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return kc(T)?n.lanes=32:n.lanes=536870912,null;Nn(n)}return T=c.children,c=c.fallback,d?(Gn(),d=n.mode,T=wi({mode:"hidden",children:T},d),c=hs(c,d,i,null),T.return=n,c.return=n,T.sibling=c,n.child=T,d=n.child,d.memoizedState=Xo(i),d.childLanes=Zo(e,N,i),n.memoizedState=Jo,c):(qn(n),Qo(n,T))}if(R=e.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(g)n.flags&256?(qn(n),n.flags&=-257,n=Wo(e,n,i)):n.memoizedState!==null?(Gn(),n.child=e.child,n.flags|=128,n=null):(Gn(),d=c.fallback,T=n.mode,c=wi({mode:"visible",children:c.children},T),d=hs(d,T,i,null),d.flags|=2,c.return=n,d.return=n,c.sibling=d,n.child=c,al(n,e.child,null,i),c=n.child,c.memoizedState=Xo(i),c.childLanes=Zo(e,N,i),n.memoizedState=Jo,n=d);else if(qn(n),kc(T)){if(N=T.nextSibling&&T.nextSibling.dataset,N)var Y=N.dgst;N=Y,c=Error(r(419)),c.stack="",c.digest=N,Vl({value:c,source:null,stack:null}),n=Wo(e,n,i)}else if(We||zl(e,n,i,!1),N=(i&e.childLanes)!==0,We||N){if(N=Le,N!==null&&(c=i&-i,c=(c&42)!==0?1:kr(c),c=(c&(N.suspendedLanes|i))!==0?0:c,c!==0&&c!==R.retryLane))throw R.retryLane=c,Ks(e,c),Dt(N,e,c),cm;T.data==="$?"||pc(),n=Wo(e,n,i)}else T.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=R.treeContext,Ve=$t(T.nextSibling),mt=n,Ee=!0,ps=null,en=!1,e!==null&&(Ot[Pt++]=gn,Ot[Pt++]=pn,Ot[Pt++]=xs,gn=e.id,pn=e.overflow,xs=n),n=Qo(n,c.children),n.flags|=4096);return n}return d?(Gn(),d=c.fallback,T=n.mode,R=e.child,Y=R.sibling,c=xn(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,Y!==null?d=xn(Y,d):(d=hs(d,T,i,null),d.flags|=2),d.return=n,c.return=n,c.sibling=d,n.child=c,c=d,d=n.child,T=e.child.memoizedState,T===null?T=Xo(i):(R=T.cachePool,R!==null?(Y=$e._currentValue,R=R.parent!==Y?{parent:Y,pool:Y}:R):R=sf(),T={baseLanes:T.baseLanes|i,cachePool:R}),d.memoizedState=T,d.childLanes=Zo(e,N,i),n.memoizedState=Jo,c):(qn(n),i=e.child,e=i.sibling,i=xn(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,e!==null&&(N=n.deletions,N===null?(n.deletions=[e],n.flags|=16):N.push(e)),n.child=i,n.memoizedState=null,i)}function Qo(e,n){return n=wi({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function wi(e,n){return e=St(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,n,i){return al(n,e.child,null,i),e=Qo(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function vm(e,n,i){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),po(e.return,n,i)}function ec(e,n,i,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:d}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=i,g.tailMode=d)}function bm(e,n,i){var c=n.pendingProps,d=c.revealOrder,g=c.tail;if(nt(e,n,c.children,i),c=Ke.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vm(e,i,n);else if(e.tag===19)vm(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(ie(Ke,c),d){case"forwards":for(i=n.child,d=null;i!==null;)e=i.alternate,e!==null&&vi(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=n.child,n.child=null):(d=i.sibling,i.sibling=null),ec(n,!1,d,i,g);break;case"backwards":for(i=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&vi(e)===null){n.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}ec(n,!0,i,null,g);break;case"together":ec(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function jn(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Kn|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(zl(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=xn(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=xn(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function tc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&si(e)))}function by(e,n,i){switch(n.tag){case 3:Ae(n,n.stateNode.containerInfo),On(n,$e,e.memoizedState.cache),Bl();break;case 27:case 5:Ze(n);break;case 4:Ae(n,n.stateNode.containerInfo);break;case 10:On(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(qn(n),n.flags|=128,null):(i&n.child.childLanes)!==0?ym(e,n,i):(qn(n),e=jn(e,n,i),e!==null?e.sibling:null);qn(n);break;case 19:var d=(e.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(zl(e,n,i,!1),c=(i&n.childLanes)!==0),d){if(c)return bm(e,n,i);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ie(Ke,Ke.current),c)break;return null;case 22:case 23:return n.lanes=0,mm(e,n,i);case 24:On(n,$e,e.memoizedState.cache)}return jn(e,n,i)}function Nm(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)We=!0;else{if(!tc(e,i)&&(n.flags&128)===0)return We=!1,by(e,n,i);We=(e.flags&131072)!==0}else We=!1,Ee&&(n.flags&1048576)!==0&&Xd(n,ni,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var c=n.elementType,d=c._init;if(c=d(c._payload),n.type=c,typeof c=="function")co(c)?(e=ws(c,e),n.tag=1,n=gm(null,n,c,e,i)):(n.tag=0,n=Ko(null,n,c,e,i));else{if(c!=null){if(d=c.$$typeof,d===B){n.tag=11,n=um(null,n,c,e,i);break e}else if(d===W){n.tag=14,n=dm(null,n,c,e,i);break e}}throw n=P(c)||c,Error(r(306,n,""))}}return n;case 0:return Ko(e,n,n.type,n.pendingProps,i);case 1:return c=n.type,d=ws(c,n.pendingProps),gm(e,n,c,d,i);case 3:e:{if(Ae(n,n.stateNode.containerInfo),e===null)throw Error(r(387));c=n.pendingProps;var g=n.memoizedState;d=g.element,Co(e,n),Kl(n,c,null,i);var N=n.memoizedState;if(c=N.cache,On(n,$e,c),c!==g.cache&&yo(n,[$e],i,!0),$l(),c=N.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:N.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=pm(e,n,c,i);break e}else if(c!==d){d=Lt(Error(r(424)),n),Vl(d),n=pm(e,n,c,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ve=$t(e.firstChild),mt=n,Ee=!0,ps=null,en=!0,i=Wf(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Bl(),c===d){n=jn(e,n,i);break e}nt(e,n,c,i)}n=n.child}return n;case 26:return ji(e,n),e===null?(i=Th(n.type,null,n.pendingProps,null))?n.memoizedState=i:Ee||(i=n.type,e=n.pendingProps,c=Oi(xe.current).createElement(i),c[ot]=n,c[xt]=e,lt(c,i,e),Qe(c),n.stateNode=c):n.memoizedState=Th(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ze(n),e===null&&Ee&&(c=n.stateNode=jh(n.type,n.pendingProps,xe.current),mt=n,en=!0,d=Ve,Qn(n.type)?(Lc=d,Ve=$t(c.firstChild)):Ve=d),nt(e,n,n.pendingProps.children,i),ji(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ee&&((d=c=Ve)&&(c=Ky(c,n.type,n.pendingProps,en),c!==null?(n.stateNode=c,mt=n,Ve=$t(c.firstChild),en=!1,d=!0):d=!1),d||ys(n)),Ze(n),d=n.type,g=n.pendingProps,N=e!==null?e.memoizedProps:null,c=g.children,Dc(d,g)?c=null:N!==null&&Dc(d,N)&&(n.flags|=32),n.memoizedState!==null&&(d=_o(e,n,fy,null,null,i),ga._currentValue=d),ji(e,n),nt(e,n,c,i),n.child;case 6:return e===null&&Ee&&((e=i=Ve)&&(i=Jy(i,n.pendingProps,en),i!==null?(n.stateNode=i,mt=n,Ve=null,e=!0):e=!1),e||ys(n)),null;case 13:return ym(e,n,i);case 4:return Ae(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=al(n,null,c,i):nt(e,n,c,i),n.child;case 11:return um(e,n,n.type,n.pendingProps,i);case 7:return nt(e,n,n.pendingProps,i),n.child;case 8:return nt(e,n,n.pendingProps.children,i),n.child;case 12:return nt(e,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,On(n,n.type,c.value),nt(e,n,c.children,i),n.child;case 9:return d=n.type._context,c=n.pendingProps.children,bs(n),d=ct(d),c=c(d),n.flags|=1,nt(e,n,c,i),n.child;case 14:return dm(e,n,n.type,n.pendingProps,i);case 15:return fm(e,n,n.type,n.pendingProps,i);case 19:return bm(e,n,i);case 31:return c=n.pendingProps,i=n.mode,c={mode:c.mode,children:c.children},e===null?(i=wi(c,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=xn(e.child,c),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return mm(e,n,i);case 24:return bs(n),c=ct($e),e===null?(d=No(),d===null&&(d=Le,g=vo(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=i),d=g),n.memoizedState={parent:c,cache:d},wo(n),On(n,$e,d)):((e.lanes&i)!==0&&(Co(e,n),Kl(n,null,null,i),$l()),d=e.memoizedState,g=n.memoizedState,d.parent!==c?(d={parent:c,cache:c},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),On(n,$e,c)):(c=g.cache,On(n,$e,c),c!==d.cache&&yo(n,[$e],i,!0))),nt(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function wn(e){e.flags|=4}function jm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_h(n)){if(n=Bt.current,n!==null&&((Te&4194048)===Te?tn!==null:(Te&62914560)!==Te&&(Te&536870912)===0||n!==tn))throw Fl=jo,lf;e.flags|=8192}}function Ci(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Wu():536870912,e.lanes|=n,cl|=n)}function ta(e,n){if(!Ee)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Pe(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(n)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=c,e.childLanes=i,n}function Ny(e,n,i){var c=n.pendingProps;switch(ho(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(n),null;case 1:return Pe(n),null;case 3:return i=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),vn($e),rt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Pl(n)?wn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wd())),Pe(n),null;case 26:return i=n.memoizedState,e===null?(wn(n),i!==null?(Pe(n),jm(n,i)):(Pe(n),n.flags&=-16777217)):i?i!==e.memoizedState?(wn(n),Pe(n),jm(n,i)):(Pe(n),n.flags&=-16777217):(e.memoizedProps!==c&&wn(n),Pe(n),n.flags&=-16777217),null;case 27:jt(n),i=xe.current;var d=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==c&&wn(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return Pe(n),null}e=re.current,Pl(n)?Zd(n):(e=jh(d,c,i),n.stateNode=e,wn(n))}return Pe(n),null;case 5:if(jt(n),i=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&wn(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return Pe(n),null}if(e=re.current,Pl(n))Zd(n);else{switch(d=Oi(xe.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?d.createElement(i,{is:c.is}):d.createElement(i)}}e[ot]=n,e[xt]=c;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=e;e:switch(lt(e,i,c),i){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&wn(n)}}return Pe(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&wn(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(r(166));if(e=xe.current,Pl(n)){if(e=n.stateNode,i=n.memoizedProps,c=null,d=mt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}e[ot]=n,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||xh(e.nodeValue,i)),e||ys(n)}else e=Oi(e).createTextNode(c),e[ot]=n,n.stateNode=e}return Pe(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Pl(n),c!==null&&c.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[ot]=n}else Bl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Pe(n),d=!1}else d=Wd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Nn(n),n):(Nn(n),null)}if(Nn(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=c!==null,e=e!==null&&e.memoizedState!==null,i){c=n.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return i!==e&&i&&(n.child.flags|=8192),Ci(n,n.updateQueue),Pe(n),null;case 4:return rt(),e===null&&Sc(n.stateNode.containerInfo),Pe(n),null;case 10:return vn(n.type),Pe(n),null;case 19:if(Q(Ke),d=n.memoizedState,d===null)return Pe(n),null;if(c=(n.flags&128)!==0,g=d.rendering,g===null)if(c)ta(d,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=vi(e),g!==null){for(n.flags|=128,ta(d,!1),e=g.updateQueue,n.updateQueue=e,Ci(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Jd(i,e),i=i.sibling;return ie(Ke,Ke.current&1|2),n.child}e=e.sibling}d.tail!==null&&Wt()>Ei&&(n.flags|=128,c=!0,ta(d,!1),n.lanes=4194304)}else{if(!c)if(e=vi(g),e!==null){if(n.flags|=128,c=!0,e=e.updateQueue,n.updateQueue=e,Ci(n,e),ta(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Ee)return Pe(n),null}else 2*Wt()-d.renderingStartTime>Ei&&i!==536870912&&(n.flags|=128,c=!0,ta(d,!1),n.lanes=4194304);d.isBackwards?(g.sibling=n.child,n.child=g):(e=d.last,e!==null?e.sibling=g:n.child=g,d.last=g)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Wt(),n.sibling=null,e=Ke.current,ie(Ke,c?e&1|2:e&1),n):(Pe(n),null);case 22:case 23:return Nn(n),Ao(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(Pe(n),n.subtreeFlags&6&&(n.flags|=8192)):Pe(n),i=n.updateQueue,i!==null&&Ci(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),e!==null&&Q(Ns),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),vn($e),Pe(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function jy(e,n){switch(ho(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return vn($e),rt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return jt(n),null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Bl()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Q(Ke),null;case 4:return rt(),null;case 10:return vn(n.type),null;case 22:case 23:return Nn(n),Ao(),e!==null&&Q(Ns),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return vn($e),null;case 25:return null;default:return null}}function wm(e,n){switch(ho(n),n.tag){case 3:vn($e),rt();break;case 26:case 27:case 5:jt(n);break;case 4:rt();break;case 13:Nn(n);break;case 19:Q(Ke);break;case 10:vn(n.type);break;case 22:case 23:Nn(n),Ao(),e!==null&&Q(Ns);break;case 24:vn($e)}}function na(e,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var d=c.next;i=d;do{if((i.tag&e)===e){c=void 0;var g=i.create,N=i.inst;c=g(),N.destroy=c}i=i.next}while(i!==d)}}catch(T){ke(n,n.return,T)}}function Hn(e,n,i){try{var c=n.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&e)===e){var N=c.inst,T=N.destroy;if(T!==void 0){N.destroy=void 0,d=n;var R=i,Y=T;try{Y()}catch(ne){ke(d,R,ne)}}}c=c.next}while(c!==g)}}catch(ne){ke(n,n.return,ne)}}function Cm(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{df(n,i)}catch(c){ke(e,e.return,c)}}}function Tm(e,n,i){i.props=ws(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){ke(e,n,c)}}function sa(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(d){ke(e,n,d)}}function nn(e,n){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(d){ke(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){ke(e,n,d)}else i.current=null}function Sm(e){var n=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(d){ke(e,e.return,d)}}function nc(e,n,i){try{var c=e.stateNode;Gy(c,e.type,i,n),c[xt]=n}catch(d){ke(e,e.return,d)}}function Em(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qn(e.type)||e.tag===4}function sc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lc(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Ui));else if(c!==4&&(c===27&&Qn(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(lc(e,n,i),e=e.sibling;e!==null;)lc(e,n,i),e=e.sibling}function Ti(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(c!==4&&(c===27&&Qn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ti(e,n,i),e=e.sibling;e!==null;)Ti(e,n,i),e=e.sibling}function Am(e){var n=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);lt(n,c,i),n[ot]=e,n[xt]=i}catch(g){ke(e,e.return,g)}}var Cn=!1,He=!1,ac=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,et=null;function wy(e,n){if(e=e.containerInfo,Mc=Gi,e=Bd(e),no(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var N=0,T=-1,R=-1,Y=0,ne=0,le=e,K=null;t:for(;;){for(var J;le!==i||d!==0&&le.nodeType!==3||(T=N+d),le!==g||c!==0&&le.nodeType!==3||(R=N+c),le.nodeType===3&&(N+=le.nodeValue.length),(J=le.firstChild)!==null;)K=le,le=J;for(;;){if(le===e)break t;if(K===i&&++Y===d&&(T=N),K===g&&++ne===c&&(R=N),(J=le.nextSibling)!==null)break;le=K,K=le.parentNode}le=J}i=T===-1||R===-1?null:{start:T,end:R}}else i=null}i=i||{start:0,end:0}}else i=null;for(_c={focusedElem:e,selectionRange:i},Gi=!1,et=n;et!==null;)if(n=et,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,et=e;else for(;et!==null;){switch(n=et,g=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,i=n,d=g.memoizedProps,g=g.memoizedState,c=i.stateNode;try{var ye=ws(i.type,d,i.elementType===i.type);e=c.getSnapshotBeforeUpdate(ye,g),c.__reactInternalSnapshotBeforeUpdate=e}catch(ge){ke(i,i.return,ge)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Ic(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ic(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,et=e;break}et=n.return}}function _m(e,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Fn(e,i),c&4&&na(5,i);break;case 1:if(Fn(e,i),c&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(N){ke(i,i.return,N)}else{var d=ws(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(N){ke(i,i.return,N)}}c&64&&Cm(i),c&512&&sa(i,i.return);break;case 3:if(Fn(e,i),c&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{df(e,n)}catch(N){ke(i,i.return,N)}}break;case 27:n===null&&c&4&&Am(i);case 26:case 5:Fn(e,i),n===null&&c&4&&Sm(i),c&512&&sa(i,i.return);break;case 12:Fn(e,i);break;case 13:Fn(e,i),c&4&&Im(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Ry.bind(null,i),Xy(e,i))));break;case 22:if(c=i.memoizedState!==null||Cn,!c){n=n!==null&&n.memoizedState!==null||He,d=Cn;var g=He;Cn=c,(He=n)&&!g?Yn(e,i,(i.subtreeFlags&8772)!==0):Fn(e,i),Cn=d,He=g}break;case 30:break;default:Fn(e,i)}}function Dm(e){var n=e.alternate;n!==null&&(e.alternate=null,Dm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Or(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,yt=!1;function Tn(e,n,i){for(i=i.child;i!==null;)Rm(e,n,i),i=i.sibling}function Rm(e,n,i){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Cl,i)}catch{}switch(i.tag){case 26:He||nn(i,n),Tn(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:He||nn(i,n);var c=Ue,d=yt;Qn(i.type)&&(Ue=i.stateNode,yt=!1),Tn(e,n,i),fa(i.stateNode),Ue=c,yt=d;break;case 5:He||nn(i,n);case 6:if(c=Ue,d=yt,Ue=null,Tn(e,n,i),Ue=c,yt=d,Ue!==null)if(yt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(i.stateNode)}catch(g){ke(i,n,g)}else try{Ue.removeChild(i.stateNode)}catch(g){ke(i,n,g)}break;case 18:Ue!==null&&(yt?(e=Ue,bh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ba(e)):bh(Ue,i.stateNode));break;case 4:c=Ue,d=yt,Ue=i.stateNode.containerInfo,yt=!0,Tn(e,n,i),Ue=c,yt=d;break;case 0:case 11:case 14:case 15:He||Hn(2,i,n),He||Hn(4,i,n),Tn(e,n,i);break;case 1:He||(nn(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Tm(i,n,c)),Tn(e,n,i);break;case 21:Tn(e,n,i);break;case 22:He=(c=He)||i.memoizedState!==null,Tn(e,n,i),He=c;break;default:Tn(e,n,i)}}function Im(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ba(e)}catch(i){ke(n,n.return,i)}}function Cy(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Mm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Mm),n;default:throw Error(r(435,e.tag))}}function ic(e,n){var i=Cy(e);n.forEach(function(c){var d=Iy.bind(null,e,c);i.has(c)||(i.add(c),c.then(d,d))})}function Et(e,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var d=i[c],g=e,N=n,T=N;e:for(;T!==null;){switch(T.tag){case 27:if(Qn(T.type)){Ue=T.stateNode,yt=!1;break e}break;case 5:Ue=T.stateNode,yt=!1;break e;case 3:case 4:Ue=T.stateNode.containerInfo,yt=!0;break e}T=T.return}if(Ue===null)throw Error(r(160));Rm(g,N,d),Ue=null,yt=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)km(n,e),n=n.sibling}var Yt=null;function km(e,n){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Et(n,e),At(e),c&4&&(Hn(3,e,e.return),na(3,e),Hn(5,e,e.return));break;case 1:Et(n,e),At(e),c&512&&(He||i===null||nn(i,i.return)),c&64&&Cn&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var d=Yt;if(Et(n,e),At(e),c&512&&(He||i===null||nn(i,i.return)),c&4){var g=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[El]||g[ot]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),lt(g,c,i),g[ot]=e,Qe(g),c=g;break e;case"link":var N=Ah("link","href",d).get(c+(i.href||""));if(N){for(var T=0;T<N.length;T++)if(g=N[T],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){N.splice(T,1);break t}}g=d.createElement(c),lt(g,c,i),d.head.appendChild(g);break;case"meta":if(N=Ah("meta","content",d).get(c+(i.content||""))){for(T=0;T<N.length;T++)if(g=N[T],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){N.splice(T,1);break t}}g=d.createElement(c),lt(g,c,i),d.head.appendChild(g);break;default:throw Error(r(468,c))}g[ot]=e,Qe(g),c=g}e.stateNode=c}else Mh(d,e.type,e.stateNode);else e.stateNode=Eh(d,c,e.memoizedProps);else g!==c?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,c===null?Mh(d,e.type,e.stateNode):Eh(d,c,e.memoizedProps)):c===null&&e.stateNode!==null&&nc(e,e.memoizedProps,i.memoizedProps)}break;case 27:Et(n,e),At(e),c&512&&(He||i===null||nn(i,i.return)),i!==null&&c&4&&nc(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Et(n,e),At(e),c&512&&(He||i===null||nn(i,i.return)),e.flags&32){d=e.stateNode;try{zs(d,"")}catch(J){ke(e,e.return,J)}}c&4&&e.stateNode!=null&&(d=e.memoizedProps,nc(e,d,i!==null?i.memoizedProps:d)),c&1024&&(ac=!0);break;case 6:if(Et(n,e),At(e),c&4){if(e.stateNode===null)throw Error(r(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(J){ke(e,e.return,J)}}break;case 3:if(Vi=null,d=Yt,Yt=Pi(n.containerInfo),Et(n,e),Yt=d,At(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ba(n.containerInfo)}catch(J){ke(e,e.return,J)}ac&&(ac=!1,Lm(e));break;case 4:c=Yt,Yt=Pi(e.stateNode.containerInfo),Et(n,e),At(e),Yt=c;break;case 12:Et(n,e),At(e);break;case 13:Et(n,e),At(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(fc=Wt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ic(e,c)));break;case 22:d=e.memoizedState!==null;var R=i!==null&&i.memoizedState!==null,Y=Cn,ne=He;if(Cn=Y||d,He=ne||R,Et(n,e),He=ne,Cn=Y,At(e),c&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(i===null||R||Cn||He||Cs(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){R=i=n;try{if(g=R.stateNode,d)N=g.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{T=R.stateNode;var le=R.memoizedProps.style,K=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(J){ke(R,R.return,J)}}}else if(n.tag===6){if(i===null){R=n;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(J){ke(R,R.return,J)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,ic(e,i))));break;case 19:Et(n,e),At(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ic(e,c)));break;case 30:break;case 21:break;default:Et(n,e),At(e)}}function At(e){var n=e.flags;if(n&2){try{for(var i,c=e.return;c!==null;){if(Em(c)){i=c;break}c=c.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var d=i.stateNode,g=sc(e);Ti(e,g,d);break;case 5:var N=i.stateNode;i.flags&32&&(zs(N,""),i.flags&=-33);var T=sc(e);Ti(e,T,N);break;case 3:case 4:var R=i.stateNode.containerInfo,Y=sc(e);lc(e,Y,R);break;default:throw Error(r(161))}}catch(ne){ke(e,e.return,ne)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Lm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Lm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Fn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)_m(e,n.alternate,n),n=n.sibling}function Cs(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Hn(4,n,n.return),Cs(n);break;case 1:nn(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Tm(n,n.return,i),Cs(n);break;case 27:fa(n.stateNode);case 26:case 5:nn(n,n.return),Cs(n);break;case 22:n.memoizedState===null&&Cs(n);break;case 30:Cs(n);break;default:Cs(n)}e=e.sibling}}function Yn(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,d=e,g=n,N=g.flags;switch(g.tag){case 0:case 11:case 15:Yn(d,g,i),na(4,g);break;case 1:if(Yn(d,g,i),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){ke(c,c.return,Y)}if(c=g,d=c.updateQueue,d!==null){var T=c.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)uf(R[d],T)}catch(Y){ke(c,c.return,Y)}}i&&N&64&&Cm(g),sa(g,g.return);break;case 27:Am(g);case 26:case 5:Yn(d,g,i),i&&c===null&&N&4&&Sm(g),sa(g,g.return);break;case 12:Yn(d,g,i);break;case 13:Yn(d,g,i),i&&N&4&&Im(d,g);break;case 22:g.memoizedState===null&&Yn(d,g,i),sa(g,g.return);break;case 30:break;default:Yn(d,g,i)}n=n.sibling}}function rc(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&ql(i))}function oc(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ql(e))}function sn(e,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Um(e,n,i,c),n=n.sibling}function Um(e,n,i,c){var d=n.flags;switch(n.tag){case 0:case 11:case 15:sn(e,n,i,c),d&2048&&na(9,n);break;case 1:sn(e,n,i,c);break;case 3:sn(e,n,i,c),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ql(e)));break;case 12:if(d&2048){sn(e,n,i,c),e=n.stateNode;try{var g=n.memoizedProps,N=g.id,T=g.onPostCommit;typeof T=="function"&&T(N,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){ke(n,n.return,R)}}else sn(e,n,i,c);break;case 13:sn(e,n,i,c);break;case 23:break;case 22:g=n.stateNode,N=n.alternate,n.memoizedState!==null?g._visibility&2?sn(e,n,i,c):la(e,n):g._visibility&2?sn(e,n,i,c):(g._visibility|=2,il(e,n,i,c,(n.subtreeFlags&10256)!==0)),d&2048&&rc(N,n);break;case 24:sn(e,n,i,c),d&2048&&oc(n.alternate,n);break;default:sn(e,n,i,c)}}function il(e,n,i,c,d){for(d=d&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var g=e,N=n,T=i,R=c,Y=N.flags;switch(N.tag){case 0:case 11:case 15:il(g,N,T,R,d),na(8,N);break;case 23:break;case 22:var ne=N.stateNode;N.memoizedState!==null?ne._visibility&2?il(g,N,T,R,d):la(g,N):(ne._visibility|=2,il(g,N,T,R,d)),d&&Y&2048&&rc(N.alternate,N);break;case 24:il(g,N,T,R,d),d&&Y&2048&&oc(N.alternate,N);break;default:il(g,N,T,R,d)}n=n.sibling}}function la(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,c=n,d=c.flags;switch(c.tag){case 22:la(i,c),d&2048&&rc(c.alternate,c);break;case 24:la(i,c),d&2048&&oc(c.alternate,c);break;default:la(i,c)}n=n.sibling}}var aa=8192;function rl(e){if(e.subtreeFlags&aa)for(e=e.child;e!==null;)Om(e),e=e.sibling}function Om(e){switch(e.tag){case 26:rl(e),e.flags&aa&&e.memoizedState!==null&&cv(Yt,e.memoizedState,e.memoizedProps);break;case 5:rl(e);break;case 3:case 4:var n=Yt;Yt=Pi(e.stateNode.containerInfo),rl(e),Yt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=aa,aa=16777216,rl(e),aa=n):rl(e));break;default:rl(e)}}function Pm(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function ia(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];et=c,Vm(c,e)}Pm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Bm(e),e=e.sibling}function Bm(e){switch(e.tag){case 0:case 11:case 15:ia(e),e.flags&2048&&Hn(9,e,e.return);break;case 3:ia(e);break;case 12:ia(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Si(e)):ia(e);break;default:ia(e)}}function Si(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];et=c,Vm(c,e)}Pm(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Hn(8,n,n.return),Si(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Si(n));break;default:Si(n)}e=e.sibling}}function Vm(e,n){for(;et!==null;){var i=et;switch(i.tag){case 0:case 11:case 15:Hn(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ql(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,et=c;else e:for(i=e;et!==null;){c=et;var d=c.sibling,g=c.return;if(Dm(c),c===i){et=null;break e}if(d!==null){d.return=g,et=d;break e}et=g}}}var Ty={getCacheForType:function(e){var n=ct($e),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i}},Sy=typeof WeakMap=="function"?WeakMap:Map,Me=0,Le=null,we=null,Te=0,_e=0,Mt=null,$n=!1,ol=!1,cc=!1,Sn=0,ze=0,Kn=0,Ts=0,uc=0,Vt=0,cl=0,ra=null,vt=null,dc=!1,fc=0,Ei=1/0,Ai=null,Jn=null,st=0,Xn=null,ul=null,dl=0,mc=0,hc=null,zm=null,oa=0,xc=null;function _t(){if((Me&2)!==0&&Te!==0)return Te&-Te;if(S.T!==null){var e=Qs;return e!==0?e:jc()}return nd()}function qm(){Vt===0&&(Vt=(Te&536870912)===0||Ee?Qu():536870912);var e=Bt.current;return e!==null&&(e.flags|=32),Vt}function Dt(e,n,i){(e===Le&&(_e===2||_e===9)||e.cancelPendingCommit!==null)&&(fl(e,0),Zn(e,Te,Vt,!1)),Sl(e,i),((Me&2)===0||e!==Le)&&(e===Le&&((Me&2)===0&&(Ts|=i),ze===4&&Zn(e,Te,Vt,!1)),ln(e))}function Gm(e,n,i){if((Me&6)!==0)throw Error(r(327));var c=!i&&(n&124)===0&&(n&e.expiredLanes)===0||Tl(e,n),d=c?My(e,n):yc(e,n,!0),g=c;do{if(d===0){ol&&!c&&Zn(e,n,0,!1);break}else{if(i=e.current.alternate,g&&!Ey(i)){d=yc(e,n,!1),g=!1;continue}if(d===2){if(g=n,e.errorRecoveryDisabledLanes&g)var N=0;else N=e.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){n=N;e:{var T=e;d=ra;var R=T.current.memoizedState.isDehydrated;if(R&&(fl(T,N).flags|=256),N=yc(T,N,!1),N!==2){if(cc&&!R){T.errorRecoveryDisabledLanes|=g,Ts|=g,d=4;break e}g=vt,vt=d,g!==null&&(vt===null?vt=g:vt.push.apply(vt,g))}d=N}if(g=!1,d!==2)continue}}if(d===1){fl(e,0),Zn(e,n,0,!0);break}e:{switch(c=e,g=d,g){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Zn(c,n,Vt,!$n);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(d=fc+300-Wt(),10<d)){if(Zn(c,n,Vt,!$n),Ba(c,0,!0)!==0)break e;c.timeoutHandle=yh(Hm.bind(null,c,i,vt,Ai,dc,n,Vt,Ts,cl,$n,g,2,-0,0),d);break e}Hm(c,i,vt,Ai,dc,n,Vt,Ts,cl,$n,g,0,-0,0)}}break}while(!0);ln(e)}function Hm(e,n,i,c,d,g,N,T,R,Y,ne,le,K,J){if(e.timeoutHandle=-1,le=n.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(xa={stylesheets:null,count:0,unsuspend:ov},Om(n),le=uv(),le!==null)){e.cancelPendingCommit=le(Zm.bind(null,e,n,g,i,c,d,N,T,R,ne,1,K,J)),Zn(e,g,N,!Y);return}Zm(e,n,g,i,c,d,N,T,R)}function Ey(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var d=i[c],g=d.getSnapshot;d=d.value;try{if(!Tt(g(),d))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zn(e,n,i,c){n&=~uc,n&=~Ts,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var d=n;0<d;){var g=31-Ct(d),N=1<<g;c[g]=-1,d&=~N}i!==0&&ed(e,i,n)}function Mi(){return(Me&6)===0?(ca(0),!1):!0}function gc(){if(we!==null){if(_e===0)var e=we.return;else e=we,yn=vs=null,Io(e),ll=null,Wl=0,e=we;for(;e!==null;)wm(e.alternate,e),e=e.return;we=null}}function fl(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Fy(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),gc(),Le=e,we=i=xn(e.current,null),Te=n,_e=0,Mt=null,$n=!1,ol=Tl(e,n),cc=!1,cl=Vt=uc=Ts=Kn=ze=0,vt=ra=null,dc=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var d=31-Ct(c),g=1<<d;n|=e[d],c&=~g}return Sn=n,Za(),i}function Fm(e,n){Ne=null,S.H=gi,n===Hl||n===ii?(n=of(),_e=3):n===lf?(n=of(),_e=4):_e=n===cm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mt=n,we===null&&(ze=1,Ni(e,Lt(n,e.current)))}function Ym(){var e=S.H;return S.H=gi,e===null?gi:e}function $m(){var e=S.A;return S.A=Ty,e}function pc(){ze=4,$n||(Te&4194048)!==Te&&Bt.current!==null||(ol=!0),(Kn&134217727)===0&&(Ts&134217727)===0||Le===null||Zn(Le,Te,Vt,!1)}function yc(e,n,i){var c=Me;Me|=2;var d=Ym(),g=$m();(Le!==e||Te!==n)&&(Ai=null,fl(e,n)),n=!1;var N=ze;e:do try{if(_e!==0&&we!==null){var T=we,R=Mt;switch(_e){case 8:gc(),N=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(n=!0);var Y=_e;if(_e=0,Mt=null,ml(e,T,R,Y),i&&ol){N=0;break e}break;default:Y=_e,_e=0,Mt=null,ml(e,T,R,Y)}}Ay(),N=ze;break}catch(ne){Fm(e,ne)}while(!0);return n&&e.shellSuspendCounter++,yn=vs=null,Me=c,S.H=d,S.A=g,we===null&&(Le=null,Te=0,Za()),N}function Ay(){for(;we!==null;)Km(we)}function My(e,n){var i=Me;Me|=2;var c=Ym(),d=$m();Le!==e||Te!==n?(Ai=null,Ei=Wt()+500,fl(e,n)):ol=Tl(e,n);e:do try{if(_e!==0&&we!==null){n=we;var g=Mt;t:switch(_e){case 1:_e=0,Mt=null,ml(e,n,g,1);break;case 2:case 9:if(af(g)){_e=0,Mt=null,Jm(n);break}n=function(){_e!==2&&_e!==9||Le!==e||(_e=7),ln(e)},g.then(n,n);break e;case 3:_e=7;break e;case 4:_e=5;break e;case 7:af(g)?(_e=0,Mt=null,Jm(n)):(_e=0,Mt=null,ml(e,n,g,7));break;case 5:var N=null;switch(we.tag){case 26:N=we.memoizedState;case 5:case 27:var T=we;if(!N||_h(N)){_e=0,Mt=null;var R=T.sibling;if(R!==null)we=R;else{var Y=T.return;Y!==null?(we=Y,_i(Y)):we=null}break t}}_e=0,Mt=null,ml(e,n,g,5);break;case 6:_e=0,Mt=null,ml(e,n,g,6);break;case 8:gc(),ze=6;break e;default:throw Error(r(462))}}_y();break}catch(ne){Fm(e,ne)}while(!0);return yn=vs=null,S.H=c,S.A=d,Me=i,we!==null?0:(Le=null,Te=0,Za(),ze)}function _y(){for(;we!==null&&!Qp();)Km(we)}function Km(e){var n=Nm(e.alternate,e,Sn);e.memoizedProps=e.pendingProps,n===null?_i(e):we=n}function Jm(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=xm(i,n,n.pendingProps,n.type,void 0,Te);break;case 11:n=xm(i,n,n.pendingProps,n.type.render,n.ref,Te);break;case 5:Io(n);default:wm(i,n),n=we=Jd(n,Sn),n=Nm(i,n,Sn)}e.memoizedProps=e.pendingProps,n===null?_i(e):we=n}function ml(e,n,i,c){yn=vs=null,Io(n),ll=null,Wl=0;var d=n.return;try{if(vy(e,d,n,i,Te)){ze=1,Ni(e,Lt(i,e.current)),we=null;return}}catch(g){if(d!==null)throw we=d,g;ze=1,Ni(e,Lt(i,e.current)),we=null;return}n.flags&32768?(Ee||c===1?e=!0:ol||(Te&536870912)!==0?e=!1:($n=e=!0,(c===2||c===9||c===3||c===6)&&(c=Bt.current,c!==null&&c.tag===13&&(c.flags|=16384))),Xm(n,e)):_i(n)}function _i(e){var n=e;do{if((n.flags&32768)!==0){Xm(n,$n);return}e=n.return;var i=Ny(n.alternate,n,Sn);if(i!==null){we=i;return}if(n=n.sibling,n!==null){we=n;return}we=n=e}while(n!==null);ze===0&&(ze=5)}function Xm(e,n){do{var i=jy(e.alternate,e);if(i!==null){i.flags&=32767,we=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){we=e;return}we=e=i}while(e!==null);ze=6,we=null}function Zm(e,n,i,c,d,g,N,T,R){e.cancelPendingCommit=null;do Di();while(st!==0);if((Me&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(g=n.lanes|n.childLanes,g|=ro,o0(e,i,g,N,T,R),e===Le&&(we=Le=null,Te=0),ul=n,Xn=e,dl=i,mc=g,hc=d,zm=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ky(Ua,function(){return nh(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=S.T,S.T=null,d=q.p,q.p=2,N=Me,Me|=4;try{wy(e,n,i)}finally{Me=N,q.p=d,S.T=c}}st=1,Qm(),Wm(),eh()}}function Qm(){if(st===1){st=0;var e=Xn,n=ul,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=S.T,S.T=null;var c=q.p;q.p=2;var d=Me;Me|=4;try{km(n,e);var g=_c,N=Bd(e.containerInfo),T=g.focusedElem,R=g.selectionRange;if(N!==T&&T&&T.ownerDocument&&Pd(T.ownerDocument.documentElement,T)){if(R!==null&&no(T)){var Y=R.start,ne=R.end;if(ne===void 0&&(ne=Y),"selectionStart"in T)T.selectionStart=Y,T.selectionEnd=Math.min(ne,T.value.length);else{var le=T.ownerDocument||document,K=le&&le.defaultView||window;if(K.getSelection){var J=K.getSelection(),ye=T.textContent.length,ge=Math.min(R.start,ye),Ie=R.end===void 0?ge:Math.min(R.end,ye);!J.extend&&ge>Ie&&(N=Ie,Ie=ge,ge=N);var G=Od(T,ge),O=Od(T,Ie);if(G&&O&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==O.node||J.focusOffset!==O.offset)){var F=le.createRange();F.setStart(G.node,G.offset),J.removeAllRanges(),ge>Ie?(J.addRange(F),J.extend(O.node,O.offset)):(F.setEnd(O.node,O.offset),J.addRange(F))}}}}for(le=[],J=T;J=J.parentNode;)J.nodeType===1&&le.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var se=le[T];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Gi=!!Mc,_c=Mc=null}finally{Me=d,q.p=c,S.T=i}}e.current=n,st=2}}function Wm(){if(st===2){st=0;var e=Xn,n=ul,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=S.T,S.T=null;var c=q.p;q.p=2;var d=Me;Me|=4;try{_m(e,n.alternate,n)}finally{Me=d,q.p=c,S.T=i}}st=3}}function eh(){if(st===4||st===3){st=0,Wp();var e=Xn,n=ul,i=dl,c=zm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?st=5:(st=0,ul=Xn=null,th(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Jn=null),Lr(i),n=n.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Cl,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=S.T,d=q.p,q.p=2,S.T=null;try{for(var g=e.onRecoverableError,N=0;N<c.length;N++){var T=c[N];g(T.value,{componentStack:T.stack})}}finally{S.T=n,q.p=d}}(dl&3)!==0&&Di(),ln(e),d=e.pendingLanes,(i&4194090)!==0&&(d&42)!==0?e===xc?oa++:(oa=0,xc=e):oa=0,ca(0)}}function th(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ql(n)))}function Di(e){return Qm(),Wm(),eh(),nh()}function nh(){if(st!==5)return!1;var e=Xn,n=mc;mc=0;var i=Lr(dl),c=S.T,d=q.p;try{q.p=32>i?32:i,S.T=null,i=hc,hc=null;var g=Xn,N=dl;if(st=0,ul=Xn=null,dl=0,(Me&6)!==0)throw Error(r(331));var T=Me;if(Me|=4,Bm(g.current),Um(g,g.current,N,i),Me=T,ca(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Cl,g)}catch{}return!0}finally{q.p=d,S.T=c,th(e,n)}}function sh(e,n,i){n=Lt(i,n),n=$o(e.stateNode,n,2),e=Vn(e,n,2),e!==null&&(Sl(e,2),ln(e))}function ke(e,n,i){if(e.tag===3)sh(e,e,i);else for(;n!==null;){if(n.tag===3){sh(n,e,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Jn===null||!Jn.has(c))){e=Lt(i,e),i=rm(2),c=Vn(n,i,2),c!==null&&(om(i,c,n,e),Sl(c,2),ln(c));break}}n=n.return}}function vc(e,n,i){var c=e.pingCache;if(c===null){c=e.pingCache=new Sy;var d=new Set;c.set(n,d)}else d=c.get(n),d===void 0&&(d=new Set,c.set(n,d));d.has(i)||(cc=!0,d.add(i),e=Dy.bind(null,e,n,i),n.then(e,e))}function Dy(e,n,i){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Le===e&&(Te&i)===i&&(ze===4||ze===3&&(Te&62914560)===Te&&300>Wt()-fc?(Me&2)===0&&fl(e,0):uc|=i,cl===Te&&(cl=0)),ln(e)}function lh(e,n){n===0&&(n=Wu()),e=Ks(e,n),e!==null&&(Sl(e,n),ln(e))}function Ry(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),lh(e,i)}function Iy(e,n){var i=0;switch(e.tag){case 13:var c=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(n),lh(e,i)}function ky(e,n){return In(e,n)}var Ri=null,hl=null,bc=!1,Ii=!1,Nc=!1,Ss=0;function ln(e){e!==hl&&e.next===null&&(hl===null?Ri=hl=e:hl=hl.next=e),Ii=!0,bc||(bc=!0,Uy())}function ca(e,n){if(!Nc&&Ii){Nc=!0;do for(var i=!1,c=Ri;c!==null;){if(e!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var N=c.suspendedLanes,T=c.pingedLanes;g=(1<<31-Ct(42|e)+1)-1,g&=d&~(N&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,oh(c,g))}else g=Te,g=Ba(c,c===Le?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Tl(c,g)||(i=!0,oh(c,g));c=c.next}while(i);Nc=!1}}function Ly(){ah()}function ah(){Ii=bc=!1;var e=0;Ss!==0&&(Hy()&&(e=Ss),Ss=0);for(var n=Wt(),i=null,c=Ri;c!==null;){var d=c.next,g=ih(c,n);g===0?(c.next=null,i===null?Ri=d:i.next=d,d===null&&(hl=i)):(i=c,(e!==0||(g&3)!==0)&&(Ii=!0)),c=d}ca(e)}function ih(e,n){for(var i=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var N=31-Ct(g),T=1<<N,R=d[N];R===-1?((T&i)===0||(T&c)!==0)&&(d[N]=r0(T,n)):R<=n&&(e.expiredLanes|=T),g&=~T}if(n=Le,i=Te,i=Ba(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===n&&(_e===2||_e===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Rr(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Tl(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(c!==null&&Rr(c),Lr(i)){case 2:case 8:i=Xu;break;case 32:i=Ua;break;case 268435456:i=Zu;break;default:i=Ua}return c=rh.bind(null,e),i=In(i,c),e.callbackPriority=n,e.callbackNode=i,n}return c!==null&&c!==null&&Rr(c),e.callbackPriority=2,e.callbackNode=null,2}function rh(e,n){if(st!==0&&st!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Di()&&e.callbackNode!==i)return null;var c=Te;return c=Ba(e,e===Le?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Gm(e,c,n),ih(e,Wt()),e.callbackNode!=null&&e.callbackNode===i?rh.bind(null,e):null)}function oh(e,n){if(Di())return null;Gm(e,n,!0)}function Uy(){Yy(function(){(Me&6)!==0?In(Ju,Ly):ah()})}function jc(){return Ss===0&&(Ss=Qu()),Ss}function ch(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ha(""+e)}function uh(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function Oy(e,n,i,c,d){if(n==="submit"&&i&&i.stateNode===d){var g=ch((d[xt]||null).action),N=c.submitter;N&&(n=(n=N[xt]||null)?ch(n.formAction):N.getAttribute("formAction"),n!==null&&(g=n,N=null));var T=new Ka("action","action",null,c,d);e.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ss!==0){var R=N?uh(d,N):new FormData(d);qo(i,{pending:!0,data:R,method:d.method,action:g},null,R)}}else typeof g=="function"&&(T.preventDefault(),R=N?uh(d,N):new FormData(d),qo(i,{pending:!0,data:R,method:d.method,action:g},g,R))},currentTarget:d}]})}}for(var wc=0;wc<io.length;wc++){var Cc=io[wc],Py=Cc.toLowerCase(),By=Cc[0].toUpperCase()+Cc.slice(1);Ft(Py,"on"+By)}Ft(qd,"onAnimationEnd"),Ft(Gd,"onAnimationIteration"),Ft(Hd,"onAnimationStart"),Ft("dblclick","onDoubleClick"),Ft("focusin","onFocus"),Ft("focusout","onBlur"),Ft(ny,"onTransitionRun"),Ft(sy,"onTransitionStart"),Ft(ly,"onTransitionCancel"),Ft(Fd,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ua));function dh(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],d=c.event;c=c.listeners;e:{var g=void 0;if(n)for(var N=c.length-1;0<=N;N--){var T=c[N],R=T.instance,Y=T.currentTarget;if(T=T.listener,R!==g&&d.isPropagationStopped())break e;g=T,d.currentTarget=Y;try{g(d)}catch(ne){bi(ne)}d.currentTarget=null,g=R}else for(N=0;N<c.length;N++){if(T=c[N],R=T.instance,Y=T.currentTarget,T=T.listener,R!==g&&d.isPropagationStopped())break e;g=T,d.currentTarget=Y;try{g(d)}catch(ne){bi(ne)}d.currentTarget=null,g=R}}}}function Ce(e,n){var i=n[Ur];i===void 0&&(i=n[Ur]=new Set);var c=e+"__bubble";i.has(c)||(fh(n,e,2,!1),i.add(c))}function Tc(e,n,i){var c=0;n&&(c|=4),fh(i,e,c,n)}var ki="_reactListening"+Math.random().toString(36).slice(2);function Sc(e){if(!e[ki]){e[ki]=!0,ld.forEach(function(i){i!=="selectionchange"&&(Vy.has(i)||Tc(i,!1,e),Tc(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ki]||(n[ki]=!0,Tc("selectionchange",!1,n))}}function fh(e,n,i,c){switch(Uh(n)){case 2:var d=mv;break;case 8:d=hv;break;default:d=Vc}i=d.bind(null,n,i,e),d=void 0,!$r||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),c?d!==void 0?e.addEventListener(n,i,{capture:!0,passive:d}):e.addEventListener(n,i,!0):d!==void 0?e.addEventListener(n,i,{passive:d}):e.addEventListener(n,i,!1)}function Ec(e,n,i,c,d){var g=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var N=c.tag;if(N===3||N===4){var T=c.stateNode.containerInfo;if(T===d)break;if(N===4)for(N=c.return;N!==null;){var R=N.tag;if((R===3||R===4)&&N.stateNode.containerInfo===d)return;N=N.return}for(;T!==null;){if(N=Ls(T),N===null)return;if(R=N.tag,R===5||R===6||R===26||R===27){c=g=N;continue e}T=T.parentNode}}c=c.return}yd(function(){var Y=g,ne=Fr(i),le=[];e:{var K=Yd.get(e);if(K!==void 0){var J=Ka,ye=e;switch(e){case"keypress":if(Ya(i)===0)break e;case"keydown":case"keyup":J=k0;break;case"focusin":ye="focus",J=Zr;break;case"focusout":ye="blur",J=Zr;break;case"beforeblur":case"afterblur":J=Zr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=j0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=O0;break;case qd:case Gd:case Hd:J=T0;break;case Fd:J=B0;break;case"scroll":case"scrollend":J=b0;break;case"wheel":J=z0;break;case"copy":case"cut":case"paste":J=E0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=wd;break;case"toggle":case"beforetoggle":J=G0}var ge=(n&4)!==0,Ie=!ge&&(e==="scroll"||e==="scrollend"),G=ge?K!==null?K+"Capture":null:K;ge=[];for(var O=Y,F;O!==null;){var se=O;if(F=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||F===null||G===null||(se=Ml(O,G),se!=null&&ge.push(da(O,se,F))),Ie)break;O=O.return}0<ge.length&&(K=new J(K,ye,null,i,ne),le.push({event:K,listeners:ge}))}}if((n&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",K&&i!==Hr&&(ye=i.relatedTarget||i.fromElement)&&(Ls(ye)||ye[ks]))break e;if((J||K)&&(K=ne.window===ne?ne:(K=ne.ownerDocument)?K.defaultView||K.parentWindow:window,J?(ye=i.relatedTarget||i.toElement,J=Y,ye=ye?Ls(ye):null,ye!==null&&(Ie=u(ye),ge=ye.tag,ye!==Ie||ge!==5&&ge!==27&&ge!==6)&&(ye=null)):(J=null,ye=Y),J!==ye)){if(ge=Nd,se="onMouseLeave",G="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ge=wd,se="onPointerLeave",G="onPointerEnter",O="pointer"),Ie=J==null?K:Al(J),F=ye==null?K:Al(ye),K=new ge(se,O+"leave",J,i,ne),K.target=Ie,K.relatedTarget=F,se=null,Ls(ne)===Y&&(ge=new ge(G,O+"enter",ye,i,ne),ge.target=F,ge.relatedTarget=Ie,se=ge),Ie=se,J&&ye)t:{for(ge=J,G=ye,O=0,F=ge;F;F=xl(F))O++;for(F=0,se=G;se;se=xl(se))F++;for(;0<O-F;)ge=xl(ge),O--;for(;0<F-O;)G=xl(G),F--;for(;O--;){if(ge===G||G!==null&&ge===G.alternate)break t;ge=xl(ge),G=xl(G)}ge=null}else ge=null;J!==null&&mh(le,K,J,ge,!1),ye!==null&&Ie!==null&&mh(le,Ie,ye,ge,!0)}}e:{if(K=Y?Al(Y):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var fe=Dd;else if(Md(K))if(Rd)fe=W0;else{fe=Z0;var je=X0}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Gr(Y.elementType)&&(fe=Dd):fe=Q0;if(fe&&(fe=fe(e,Y))){_d(le,fe,i,ne);break e}je&&je(e,K,Y),e==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&qr(K,"number",K.value)}switch(je=Y?Al(Y):window,e){case"focusin":(Md(je)||je.contentEditable==="true")&&(Fs=je,so=Y,Ol=null);break;case"focusout":Ol=so=Fs=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":lo=!1,Vd(le,i,ne);break;case"selectionchange":if(ty)break;case"keydown":case"keyup":Vd(le,i,ne)}var he;if(Wr)e:{switch(e){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Hs?Ed(e,i)&&(pe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(pe="onCompositionStart");pe&&(Cd&&i.locale!=="ko"&&(Hs||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Hs&&(he=vd()):(Un=ne,Kr="value"in Un?Un.value:Un.textContent,Hs=!0)),je=Li(Y,pe),0<je.length&&(pe=new jd(pe,e,null,i,ne),le.push({event:pe,listeners:je}),he?pe.data=he:(he=Ad(i),he!==null&&(pe.data=he)))),(he=F0?Y0(e,i):$0(e,i))&&(pe=Li(Y,"onBeforeInput"),0<pe.length&&(je=new jd("onBeforeInput","beforeinput",null,i,ne),le.push({event:je,listeners:pe}),je.data=he)),Oy(le,e,Y,i,ne)}dh(le,n)})}function da(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Li(e,n){for(var i=n+"Capture",c=[];e!==null;){var d=e,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Ml(e,i),d!=null&&c.unshift(da(e,d,g)),d=Ml(e,n),d!=null&&c.push(da(e,d,g))),e.tag===3)return c;e=e.return}return[]}function xl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mh(e,n,i,c,d){for(var g=n._reactName,N=[];i!==null&&i!==c;){var T=i,R=T.alternate,Y=T.stateNode;if(T=T.tag,R!==null&&R===c)break;T!==5&&T!==26&&T!==27||Y===null||(R=Y,d?(Y=Ml(i,g),Y!=null&&N.unshift(da(i,Y,R))):d||(Y=Ml(i,g),Y!=null&&N.push(da(i,Y,R)))),i=i.return}N.length!==0&&e.push({event:n,listeners:N})}var zy=/\r\n?/g,qy=/\u0000|\uFFFD/g;function hh(e){return(typeof e=="string"?e:""+e).replace(zy,`
`).replace(qy,"")}function xh(e,n){return n=hh(n),hh(e)===n}function Ui(){}function Re(e,n,i,c,d,g){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||zs(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&zs(e,""+c);break;case"className":za(e,"class",c);break;case"tabIndex":za(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":za(e,i,c);break;case"style":gd(e,c,g);break;case"data":if(n!=="object"){za(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Ha(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(n!=="input"&&Re(e,n,"name",d.name,d,null),Re(e,n,"formEncType",d.formEncType,d,null),Re(e,n,"formMethod",d.formMethod,d,null),Re(e,n,"formTarget",d.formTarget,d,null)):(Re(e,n,"encType",d.encType,d,null),Re(e,n,"method",d.method,d,null),Re(e,n,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Ha(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=Ui);break;case"onScroll":c!=null&&Ce("scroll",e);break;case"onScrollEnd":c!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=Ha(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),Va(e,"popover",c);break;case"xlinkActuate":mn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":mn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":mn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":mn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":mn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":mn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":mn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":mn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":mn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Va(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=y0.get(i)||i,Va(e,i,c))}}function Ac(e,n,i,c,d,g){switch(i){case"style":gd(e,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof c=="string"?zs(e,c):(typeof c=="number"||typeof c=="bigint")&&zs(e,""+c);break;case"onScroll":c!=null&&Ce("scroll",e);break;case"onScrollEnd":c!=null&&Ce("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ad.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),n=i.slice(2,d?i.length-7:void 0),g=e[xt]||null,g=g!=null?g[i]:null,typeof g=="function"&&e.removeEventListener(n,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,c,d);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):Va(e,i,c)}}}function lt(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var c=!1,d=!1,g;for(g in i)if(i.hasOwnProperty(g)){var N=i[g];if(N!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Re(e,n,g,N,i,null)}}d&&Re(e,n,"srcSet",i.srcSet,i,null),c&&Re(e,n,"src",i.src,i,null);return;case"input":Ce("invalid",e);var T=g=N=d=null,R=null,Y=null;for(c in i)if(i.hasOwnProperty(c)){var ne=i[c];if(ne!=null)switch(c){case"name":d=ne;break;case"type":N=ne;break;case"checked":R=ne;break;case"defaultChecked":Y=ne;break;case"value":g=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,n));break;default:Re(e,n,c,ne,i,null)}}fd(e,g,T,R,Y,N,d,!1),qa(e);return;case"select":Ce("invalid",e),c=N=g=null;for(d in i)if(i.hasOwnProperty(d)&&(T=i[d],T!=null))switch(d){case"value":g=T;break;case"defaultValue":N=T;break;case"multiple":c=T;default:Re(e,n,d,T,i,null)}n=g,i=N,e.multiple=!!c,n!=null?Vs(e,!!c,n,!1):i!=null&&Vs(e,!!c,i,!0);return;case"textarea":Ce("invalid",e),g=d=c=null;for(N in i)if(i.hasOwnProperty(N)&&(T=i[N],T!=null))switch(N){case"value":c=T;break;case"defaultValue":d=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Re(e,n,N,T,i,null)}hd(e,c,d,g),qa(e);return;case"option":for(R in i)if(i.hasOwnProperty(R)&&(c=i[R],c!=null))switch(R){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Re(e,n,R,c,i,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(c=0;c<ua.length;c++)Ce(ua[c],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in i)if(i.hasOwnProperty(Y)&&(c=i[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Re(e,n,Y,c,i,null)}return;default:if(Gr(n)){for(ne in i)i.hasOwnProperty(ne)&&(c=i[ne],c!==void 0&&Ac(e,n,ne,c,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(c=i[T],c!=null&&Re(e,n,T,c,i,null))}function Gy(e,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,N=null,T=null,R=null,Y=null,ne=null;for(J in i){var le=i[J];if(i.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":R=le;default:c.hasOwnProperty(J)||Re(e,n,J,null,c,le)}}for(var K in c){var J=c[K];if(le=i[K],c.hasOwnProperty(K)&&(J!=null||le!=null))switch(K){case"type":g=J;break;case"name":d=J;break;case"checked":Y=J;break;case"defaultChecked":ne=J;break;case"value":N=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,n));break;default:J!==le&&Re(e,n,K,J,c,le)}}zr(e,N,T,R,Y,ne,g,d);return;case"select":J=N=T=K=null;for(g in i)if(R=i[g],i.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":J=R;default:c.hasOwnProperty(g)||Re(e,n,g,null,c,R)}for(d in c)if(g=c[d],R=i[d],c.hasOwnProperty(d)&&(g!=null||R!=null))switch(d){case"value":K=g;break;case"defaultValue":T=g;break;case"multiple":N=g;default:g!==R&&Re(e,n,d,g,c,R)}n=T,i=N,c=J,K!=null?Vs(e,!!i,K,!1):!!c!=!!i&&(n!=null?Vs(e,!!i,n,!0):Vs(e,!!i,i?[]:"",!1));return;case"textarea":J=K=null;for(T in i)if(d=i[T],i.hasOwnProperty(T)&&d!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Re(e,n,T,null,c,d)}for(N in c)if(d=c[N],g=i[N],c.hasOwnProperty(N)&&(d!=null||g!=null))switch(N){case"value":K=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==g&&Re(e,n,N,d,c,g)}md(e,K,J);return;case"option":for(var ye in i)if(K=i[ye],i.hasOwnProperty(ye)&&K!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":e.selected=!1;break;default:Re(e,n,ye,null,c,K)}for(R in c)if(K=c[R],J=i[R],c.hasOwnProperty(R)&&K!==J&&(K!=null||J!=null))switch(R){case"selected":e.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Re(e,n,R,K,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in i)K=i[ge],i.hasOwnProperty(ge)&&K!=null&&!c.hasOwnProperty(ge)&&Re(e,n,ge,null,c,K);for(Y in c)if(K=c[Y],J=i[Y],c.hasOwnProperty(Y)&&K!==J&&(K!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:Re(e,n,Y,K,c,J)}return;default:if(Gr(n)){for(var Ie in i)K=i[Ie],i.hasOwnProperty(Ie)&&K!==void 0&&!c.hasOwnProperty(Ie)&&Ac(e,n,Ie,void 0,c,K);for(ne in c)K=c[ne],J=i[ne],!c.hasOwnProperty(ne)||K===J||K===void 0&&J===void 0||Ac(e,n,ne,K,c,J);return}}for(var G in i)K=i[G],i.hasOwnProperty(G)&&K!=null&&!c.hasOwnProperty(G)&&Re(e,n,G,null,c,K);for(le in c)K=c[le],J=i[le],!c.hasOwnProperty(le)||K===J||K==null&&J==null||Re(e,n,le,K,c,J)}var Mc=null,_c=null;function Oi(e){return e.nodeType===9?e:e.ownerDocument}function gh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ph(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Dc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rc=null;function Hy(){var e=window.event;return e&&e.type==="popstate"?e===Rc?!1:(Rc=e,!0):(Rc=null,!1)}var yh=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,Yy=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(e){return vh.resolve(null).then(e).catch($y)}:yh;function $y(e){setTimeout(function(){throw e})}function Qn(e){return e==="head"}function bh(e,n){var i=n,c=0,d=0;do{var g=i.nextSibling;if(e.removeChild(i),g&&g.nodeType===8)if(i=g.data,i==="/$"){if(0<c&&8>c){i=c;var N=e.ownerDocument;if(i&1&&fa(N.documentElement),i&2&&fa(N.body),i&4)for(i=N.head,fa(i),N=i.firstChild;N;){var T=N.nextSibling,R=N.nodeName;N[El]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&N.rel.toLowerCase()==="stylesheet"||i.removeChild(N),N=T}}if(d===0){e.removeChild(g),ba(n);return}d--}else i==="$"||i==="$?"||i==="$!"?d++:c=i.charCodeAt(0)-48;else c=0;i=g}while(i);ba(n)}function Ic(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ic(i),Or(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ky(e,n,i,c){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[El])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function Jy(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=$t(e.nextSibling),e===null))return null;return e}function kc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Xy(e,n){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function $t(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Lc=null;function Nh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}function jh(e,n,i){switch(n=Oi(i),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function fa(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Or(e)}var zt=new Map,wh=new Set;function Pi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var En=q.d;q.d={f:Zy,r:Qy,D:Wy,C:ev,L:tv,m:nv,X:lv,S:sv,M:av};function Zy(){var e=En.f(),n=Mi();return e||n}function Qy(e){var n=Us(e);n!==null&&n.tag===5&&n.type==="form"?Gf(n):En.r(e)}var gl=typeof document>"u"?null:document;function Ch(e,n,i){var c=gl;if(c&&typeof n=="string"&&n){var d=kt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),wh.has(d)||(wh.add(d),e={rel:e,crossOrigin:i,href:n},c.querySelector(d)===null&&(n=c.createElement("link"),lt(n,"link",e),Qe(n),c.head.appendChild(n)))}}function Wy(e){En.D(e),Ch("dns-prefetch",e,null)}function ev(e,n){En.C(e,n),Ch("preconnect",e,n)}function tv(e,n,i){En.L(e,n,i);var c=gl;if(c&&e&&n){var d='link[rel="preload"][as="'+kt(n)+'"]';n==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+kt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+kt(i.imageSizes)+'"]')):d+='[href="'+kt(e)+'"]';var g=d;switch(n){case"style":g=pl(e);break;case"script":g=yl(e)}zt.has(g)||(e=v({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),zt.set(g,e),c.querySelector(d)!==null||n==="style"&&c.querySelector(ma(g))||n==="script"&&c.querySelector(ha(g))||(n=c.createElement("link"),lt(n,"link",e),Qe(n),c.head.appendChild(n)))}}function nv(e,n){En.m(e,n);var i=gl;if(i&&e){var c=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+kt(c)+'"][href="'+kt(e)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=yl(e)}if(!zt.has(g)&&(e=v({rel:"modulepreload",href:e},n),zt.set(g,e),i.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ha(g)))return}c=i.createElement("link"),lt(c,"link",e),Qe(c),i.head.appendChild(c)}}}function sv(e,n,i){En.S(e,n,i);var c=gl;if(c&&e){var d=Os(c).hoistableStyles,g=pl(e);n=n||"default";var N=d.get(g);if(!N){var T={loading:0,preload:null};if(N=c.querySelector(ma(g)))T.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},i),(i=zt.get(g))&&Uc(e,i);var R=N=c.createElement("link");Qe(R),lt(R,"link",e),R._p=new Promise(function(Y,ne){R.onload=Y,R.onerror=ne}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Bi(N,n,c)}N={type:"stylesheet",instance:N,count:1,state:T},d.set(g,N)}}}function lv(e,n){En.X(e,n);var i=gl;if(i&&e){var c=Os(i).hoistableScripts,d=yl(e),g=c.get(d);g||(g=i.querySelector(ha(d)),g||(e=v({src:e,async:!0},n),(n=zt.get(d))&&Oc(e,n),g=i.createElement("script"),Qe(g),lt(g,"link",e),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function av(e,n){En.M(e,n);var i=gl;if(i&&e){var c=Os(i).hoistableScripts,d=yl(e),g=c.get(d);g||(g=i.querySelector(ha(d)),g||(e=v({src:e,async:!0,type:"module"},n),(n=zt.get(d))&&Oc(e,n),g=i.createElement("script"),Qe(g),lt(g,"link",e),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function Th(e,n,i,c){var d=(d=xe.current)?Pi(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=pl(i.href),i=Os(d).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=pl(i.href);var g=Os(d).hoistableStyles,N=g.get(e);if(N||(d=d.ownerDocument||d,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,N),(g=d.querySelector(ma(e)))&&!g._p&&(N.instance=g,N.state.loading=5),zt.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},zt.set(e,i),g||iv(d,e,i,N.state))),n&&c===null)throw Error(r(528,""));return N}if(n&&c!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=yl(i),i=Os(d).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function pl(e){return'href="'+kt(e)+'"'}function ma(e){return'link[rel="stylesheet"]['+e+"]"}function Sh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function iv(e,n,i,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),lt(n,"link",i),Qe(n),e.head.appendChild(n))}function yl(e){return'[src="'+kt(e)+'"]'}function ha(e){return"script[async]"+e}function Eh(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+kt(i.href)+'"]');if(c)return n.instance=c,Qe(c),c;var d=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Qe(c),lt(c,"style",d),Bi(c,i.precedence,e),n.instance=c;case"stylesheet":d=pl(i.href);var g=e.querySelector(ma(d));if(g)return n.state.loading|=4,n.instance=g,Qe(g),g;c=Sh(i),(d=zt.get(d))&&Uc(c,d),g=(e.ownerDocument||e).createElement("link"),Qe(g);var N=g;return N._p=new Promise(function(T,R){N.onload=T,N.onerror=R}),lt(g,"link",c),n.state.loading|=4,Bi(g,i.precedence,e),n.instance=g;case"script":return g=yl(i.src),(d=e.querySelector(ha(g)))?(n.instance=d,Qe(d),d):(c=i,(d=zt.get(g))&&(c=v({},i),Oc(c,d)),e=e.ownerDocument||e,d=e.createElement("script"),Qe(d),lt(d,"link",c),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Bi(c,i.precedence,e));return n.instance}function Bi(e,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,N=0;N<c.length;N++){var T=c[N];if(T.dataset.precedence===n)g=T;else if(g!==d)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Uc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Oc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Vi=null;function Ah(e,n,i){if(Vi===null){var c=new Map,d=Vi=new Map;d.set(i,c)}else d=Vi,c=d.get(i),c||(c=new Map,d.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var g=i[d];if(!(g[El]||g[ot]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var N=g.getAttribute(n)||"";N=e+N;var T=c.get(N);T?T.push(g):c.set(N,[g])}}return c}function Mh(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function rv(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function _h(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var xa=null;function ov(){}function cv(e,n,i){if(xa===null)throw Error(r(475));var c=xa;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var d=pl(i.href),g=e.querySelector(ma(d));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=zi.bind(c),e.then(c,c)),n.state.loading|=4,n.instance=g,Qe(g);return}g=e.ownerDocument||e,i=Sh(i),(d=zt.get(d))&&Uc(i,d),g=g.createElement("link"),Qe(g);var N=g;N._p=new Promise(function(T,R){N.onload=T,N.onerror=R}),lt(g,"link",i),n.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=zi.bind(c),e.addEventListener("load",n),e.addEventListener("error",n))}}function uv(){if(xa===null)throw Error(r(475));var e=xa;return e.stylesheets&&e.count===0&&Pc(e,e.stylesheets),0<e.count?function(n){var i=setTimeout(function(){if(e.stylesheets&&Pc(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i)}}:null}function zi(){if(this.count--,this.count===0){if(this.stylesheets)Pc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qi=null;function Pc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qi=new Map,n.forEach(dv,e),qi=null,zi.call(e))}function dv(e,n){if(!(n.state.loading&4)){var i=qi.get(e);if(i)var c=i.get(null);else{i=new Map,qi.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var N=d[g];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(i.set(N.dataset.precedence,N),c=N)}c&&i.set(null,c)}d=n.instance,N=d.getAttribute("data-precedence"),g=i.get(N)||c,g===c&&i.set(null,d),i.set(N,d),this.count++,c=zi.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var ga={$$typeof:V,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function fv(e,n,i,c,d,g,N,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Dh(e,n,i,c,d,g,N,T,R,Y,ne,le){return e=new fv(e,n,i,N,T,R,Y,le),n=1,g===!0&&(n|=24),g=St(3,null,null,n),e.current=g,g.stateNode=e,n=vo(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:c,isDehydrated:i,cache:n},wo(g),e}function Rh(e){return e?(e=Js,e):Js}function Ih(e,n,i,c,d,g){d=Rh(d),c.context===null?c.context=d:c.pendingContext=d,c=Bn(n),c.payload={element:i},g=g===void 0?null:g,g!==null&&(c.callback=g),i=Vn(e,c,n),i!==null&&(Dt(i,e,n),Yl(i,e,n))}function kh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Bc(e,n){kh(e,n),(e=e.alternate)&&kh(e,n)}function Lh(e){if(e.tag===13){var n=Ks(e,67108864);n!==null&&Dt(n,e,67108864),Bc(e,67108864)}}var Gi=!0;function mv(e,n,i,c){var d=S.T;S.T=null;var g=q.p;try{q.p=2,Vc(e,n,i,c)}finally{q.p=g,S.T=d}}function hv(e,n,i,c){var d=S.T;S.T=null;var g=q.p;try{q.p=8,Vc(e,n,i,c)}finally{q.p=g,S.T=d}}function Vc(e,n,i,c){if(Gi){var d=zc(c);if(d===null)Ec(e,n,c,Hi,i),Oh(e,c);else if(gv(d,e,n,i,c))c.stopPropagation();else if(Oh(e,c),n&4&&-1<xv.indexOf(e)){for(;d!==null;){var g=Us(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var N=cs(g.pendingLanes);if(N!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;N;){var R=1<<31-Ct(N);T.entanglements[1]|=R,N&=~R}ln(g),(Me&6)===0&&(Ei=Wt()+500,ca(0))}}break;case 13:T=Ks(g,2),T!==null&&Dt(T,g,2),Mi(),Bc(g,2)}if(g=zc(c),g===null&&Ec(e,n,c,Hi,i),g===d)break;d=g}d!==null&&c.stopPropagation()}else Ec(e,n,c,null,i)}}function zc(e){return e=Fr(e),qc(e)}var Hi=null;function qc(e){if(Hi=null,e=Ls(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=h(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Hi=e,null}function Uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(e0()){case Ju:return 2;case Xu:return 8;case Ua:case t0:return 32;case Zu:return 268435456;default:return 32}default:return 32}}var Gc=!1,Wn=null,es=null,ts=null,pa=new Map,ya=new Map,ns=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oh(e,n){switch(e){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":pa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(n.pointerId)}}function va(e,n,i,c,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},n!==null&&(n=Us(n),n!==null&&Lh(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function gv(e,n,i,c,d){switch(n){case"focusin":return Wn=va(Wn,e,n,i,c,d),!0;case"dragenter":return es=va(es,e,n,i,c,d),!0;case"mouseover":return ts=va(ts,e,n,i,c,d),!0;case"pointerover":var g=d.pointerId;return pa.set(g,va(pa.get(g)||null,e,n,i,c,d)),!0;case"gotpointercapture":return g=d.pointerId,ya.set(g,va(ya.get(g)||null,e,n,i,c,d)),!0}return!1}function Ph(e){var n=Ls(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=h(i),n!==null){e.blockedOn=n,c0(e.priority,function(){if(i.tag===13){var c=_t();c=kr(c);var d=Ks(i,c);d!==null&&Dt(d,i,c),Bc(i,c)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fi(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=zc(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Hr=c,i.target.dispatchEvent(c),Hr=null}else return n=Us(i),n!==null&&Lh(n),e.blockedOn=i,!1;n.shift()}return!0}function Bh(e,n,i){Fi(e)&&i.delete(n)}function pv(){Gc=!1,Wn!==null&&Fi(Wn)&&(Wn=null),es!==null&&Fi(es)&&(es=null),ts!==null&&Fi(ts)&&(ts=null),pa.forEach(Bh),ya.forEach(Bh)}function Yi(e,n){e.blockedOn===n&&(e.blockedOn=null,Gc||(Gc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,pv)))}var $i=null;function Vh(e){$i!==e&&($i=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){$i===e&&($i=null);for(var n=0;n<e.length;n+=3){var i=e[n],c=e[n+1],d=e[n+2];if(typeof c!="function"){if(qc(c||i)===null)continue;break}var g=Us(i);g!==null&&(e.splice(n,3),n-=3,qo(g,{pending:!0,data:d,method:i.method,action:c},c,d))}}))}function ba(e){function n(R){return Yi(R,e)}Wn!==null&&Yi(Wn,e),es!==null&&Yi(es,e),ts!==null&&Yi(ts,e),pa.forEach(n),ya.forEach(n);for(var i=0;i<ns.length;i++){var c=ns[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<ns.length&&(i=ns[0],i.blockedOn===null);)Ph(i),i.blockedOn===null&&ns.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var d=i[c],g=i[c+1],N=d[xt]||null;if(typeof g=="function")N||Vh(i);else if(N){var T=null;if(g&&g.hasAttribute("formAction")){if(d=g,N=g[xt]||null)T=N.formAction;else if(qc(d)!==null)continue}else T=N.action;typeof T=="function"?i[c+1]=T:(i.splice(c,3),c-=3),Vh(i)}}}function Hc(e){this._internalRoot=e}Ki.prototype.render=Hc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,c=_t();Ih(i,c,e,n,null,null)},Ki.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ih(e.current,2,null,e,null,null),Mi(),n[ks]=null}};function Ki(e){this._internalRoot=e}Ki.prototype.unstable_scheduleHydration=function(e){if(e){var n=nd();e={blockedOn:null,target:e,priority:n};for(var i=0;i<ns.length&&n!==0&&n<ns[i].priority;i++);ns.splice(i,0,e),i===0&&Ph(e)}};var zh=l.version;if(zh!=="19.1.1")throw Error(r(527,zh,"19.1.1"));q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var yv={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{Cl=Ji.inject(yv),wt=Ji}catch{}}return ja.createRoot=function(e,n){if(!o(e))throw Error(r(299));var i=!1,c="",d=sm,g=lm,N=am,T=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(N=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Dh(e,1,!1,null,null,i,c,d,g,N,T,null),e[ks]=n.current,Sc(e),new Hc(n)},ja.hydrateRoot=function(e,n,i){if(!o(e))throw Error(r(299));var c=!1,d="",g=sm,N=lm,T=am,R=null,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(N=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(R=i.unstable_transitionCallbacks),i.formState!==void 0&&(Y=i.formState)),n=Dh(e,1,!0,n,i??null,c,d,g,N,T,R,Y),n.context=Rh(null),i=n.current,c=_t(),c=kr(c),d=Bn(c),d.callback=null,Vn(i,d,c),i=c,n.current.lanes=i,Sl(n,i),ln(n),e[ks]=n.current,Sc(e),new Ki(n)},ja.version="19.1.1",ja}var Zh;function Av(){if(Zh)return $c.exports;Zh=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),$c.exports=Ev(),$c.exports}var Mv=Av();const _v=Ds(Mv);/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qh="popstate";function Dv(a={}){function l(r,o){let{pathname:u,search:h,hash:p}=r.location;return hu("",{pathname:u,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(r,o){return typeof o=="string"?o:Ea(o)}return Iv(l,s,null,a)}function Xe(a,l){if(a===!1||a===null||typeof a>"u")throw new Error(l)}function rn(a,l){if(!a){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function Rv(){return Math.random().toString(36).substring(2,10)}function Wh(a,l){return{usr:a.state,key:a.key,idx:l}}function hu(a,l,s=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof l=="string"?_a(l):l,state:s,key:l&&l.key||r||Rv()}}function Ea({pathname:a="/",search:l="",hash:s=""}){return l&&l!=="?"&&(a+=l.charAt(0)==="?"?l:"?"+l),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function _a(a){let l={};if(a){let s=a.indexOf("#");s>=0&&(l.hash=a.substring(s),a=a.substring(0,s));let r=a.indexOf("?");r>=0&&(l.search=a.substring(r),a=a.substring(0,r)),a&&(l.pathname=a)}return l}function Iv(a,l,s,r={}){let{window:o=document.defaultView,v5Compat:u=!1}=r,h=o.history,p="POP",y=null,x=v();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function v(){return(h.state||{idx:null}).idx}function b(){p="POP";let M=v(),k=M==null?null:M-x;x=M,y&&y({action:p,location:_.location,delta:k})}function w(M,k){p="PUSH";let I=hu(_.location,M,k);x=v()+1;let V=Wh(I,x),B=_.createHref(I);try{h.pushState(V,"",B)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;o.location.assign(B)}u&&y&&y({action:p,location:_.location,delta:1})}function C(M,k){p="REPLACE";let I=hu(_.location,M,k);x=v();let V=Wh(I,x),B=_.createHref(I);h.replaceState(V,"",B),u&&y&&y({action:p,location:_.location,delta:0})}function A(M){return kv(M)}let _={get action(){return p},get location(){return a(o,h)},listen(M){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(Qh,b),y=M,()=>{o.removeEventListener(Qh,b),y=null}},createHref(M){return l(o,M)},createURL:A,encodeLocation(M){let k=A(M);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:w,replace:C,go(M){return h.go(M)}};return _}function kv(a,l=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(s,"No window.location.(origin|href) available to create URL");let r=typeof a=="string"?a:Ea(a);return r=r.replace(/ $/,"%20"),!l&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function Hg(a,l,s="/"){return Lv(a,l,s,!1)}function Lv(a,l,s,r){let o=typeof l=="string"?_a(l):l,u=Mn(o.pathname||"/",s);if(u==null)return null;let h=Fg(a);Uv(h);let p=null;for(let y=0;p==null&&y<h.length;++y){let x=$v(u);p=Fv(h[y],x,r)}return p}function Fg(a,l=[],s=[],r="",o=!1){let u=(h,p,y=o,x)=>{let v={relativePath:x===void 0?h.path||"":x,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&y)return;Xe(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let b=An([r,v.relativePath]),w=s.concat(v);h.children&&h.children.length>0&&(Xe(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Fg(h.children,l,w,b,y)),!(h.path==null&&!h.index)&&l.push({path:b,score:Gv(b,h.index),routesMeta:w})};return a.forEach((h,p)=>{var y;if(h.path===""||!((y=h.path)!=null&&y.includes("?")))u(h,p);else for(let x of Yg(h.path))u(h,p,!0,x)}),l}function Yg(a){let l=a.split("/");if(l.length===0)return[];let[s,...r]=l,o=s.endsWith("?"),u=s.replace(/\?$/,"");if(r.length===0)return o?[u,""]:[u];let h=Yg(r.join("/")),p=[];return p.push(...h.map(y=>y===""?u:[u,y].join("/"))),o&&p.push(...h),p.map(y=>a.startsWith("/")&&y===""?"/":y)}function Uv(a){a.sort((l,s)=>l.score!==s.score?s.score-l.score:Hv(l.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var Ov=/^:[\w-]+$/,Pv=3,Bv=2,Vv=1,zv=10,qv=-2,ex=a=>a==="*";function Gv(a,l){let s=a.split("/"),r=s.length;return s.some(ex)&&(r+=qv),l&&(r+=Bv),s.filter(o=>!ex(o)).reduce((o,u)=>o+(Ov.test(u)?Pv:u===""?Vv:zv),r)}function Hv(a,l){return a.length===l.length&&a.slice(0,-1).every((r,o)=>r===l[o])?a[a.length-1]-l[l.length-1]:0}function Fv(a,l,s=!1){let{routesMeta:r}=a,o={},u="/",h=[];for(let p=0;p<r.length;++p){let y=r[p],x=p===r.length-1,v=u==="/"?l:l.slice(u.length)||"/",b=mr({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},v),w=y.route;if(!b&&x&&s&&!r[r.length-1].route.index&&(b=mr({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),h.push({params:o,pathname:An([u,b.pathname]),pathnameBase:Zv(An([u,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(u=An([u,b.pathnameBase]))}return h}function mr(a,l){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[s,r]=Yv(a.path,a.caseSensitive,a.end),o=l.match(s);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((x,{paramName:v,isOptional:b},w)=>{if(v==="*"){let A=p[w]||"";h=u.slice(0,u.length-A.length).replace(/(.)\/+$/,"$1")}const C=p[w];return b&&!C?x[v]=void 0:x[v]=(C||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:a}}function Yv(a,l=!1,s=!0){rn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,y)=>(r.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(r.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,l?void 0:"i"),r]}function $v(a){try{return a.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return rn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),a}}function Mn(a,l){if(l==="/")return a;if(!a.toLowerCase().startsWith(l.toLowerCase()))return null;let s=l.endsWith("/")?l.length-1:l.length,r=a.charAt(s);return r&&r!=="/"?null:a.slice(s)||"/"}function Kv(a,l="/"){let{pathname:s,search:r="",hash:o=""}=typeof a=="string"?_a(a):a;return{pathname:s?s.startsWith("/")?s:Jv(s,l):l,search:Qv(r),hash:Wv(o)}}function Jv(a,l){let s=l.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Zc(a,l,s,r){return`Cannot include a '${a}' character in a manually specified \`to.${l}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Xv(a){return a.filter((l,s)=>s===0||l.route.path&&l.route.path.length>0)}function $g(a){let l=Xv(a);return l.map((s,r)=>r===l.length-1?s.pathname:s.pathnameBase)}function Kg(a,l,s,r=!1){let o;typeof a=="string"?o=_a(a):(o={...a},Xe(!o.pathname||!o.pathname.includes("?"),Zc("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),Zc("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),Zc("#","search","hash",o)));let u=a===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=s;else{let b=l.length-1;if(!r&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}p=b>=0?l[b]:"/"}let y=Kv(o,p),x=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&s.endsWith("/");return!y.pathname.endsWith("/")&&(x||v)&&(y.pathname+="/"),y}var An=a=>a.join("/").replace(/\/\/+/g,"/"),Zv=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),Qv=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,Wv=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function eb(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var Jg=["POST","PUT","PATCH","DELETE"];new Set(Jg);var tb=["GET",...Jg];new Set(tb);var Nl=j.createContext(null);Nl.displayName="DataRouter";var br=j.createContext(null);br.displayName="DataRouterState";j.createContext(!1);var Xg=j.createContext({isTransitioning:!1});Xg.displayName="ViewTransition";var nb=j.createContext(new Map);nb.displayName="Fetchers";var sb=j.createContext(null);sb.displayName="Await";var cn=j.createContext(null);cn.displayName="Navigation";var Nr=j.createContext(null);Nr.displayName="Location";var Rn=j.createContext({outlet:null,matches:[],isDataRoute:!1});Rn.displayName="Route";var _u=j.createContext(null);_u.displayName="RouteError";function lb(a,{relative:l}={}){Xe(Da(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=j.useContext(cn),{hash:o,pathname:u,search:h}=Ra(a,{relative:l}),p=u;return s!=="/"&&(p=u==="/"?s:An([s,u])),r.createHref({pathname:p,search:h,hash:o})}function Da(){return j.useContext(Nr)!=null}function Rs(){return Xe(Da(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Nr).location}var Zg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Qg(a){j.useContext(cn).static||j.useLayoutEffect(a)}function ab(){let{isDataRoute:a}=j.useContext(Rn);return a?yb():ib()}function ib(){Xe(Da(),"useNavigate() may be used only in the context of a <Router> component.");let a=j.useContext(Nl),{basename:l,navigator:s}=j.useContext(cn),{matches:r}=j.useContext(Rn),{pathname:o}=Rs(),u=JSON.stringify($g(r)),h=j.useRef(!1);return Qg(()=>{h.current=!0}),j.useCallback((y,x={})=>{if(rn(h.current,Zg),!h.current)return;if(typeof y=="number"){s.go(y);return}let v=Kg(y,JSON.parse(u),o,x.relative==="path");a==null&&l!=="/"&&(v.pathname=v.pathname==="/"?l:An([l,v.pathname])),(x.replace?s.replace:s.push)(v,x.state,x)},[l,s,u,o,a])}j.createContext(null);function Ra(a,{relative:l}={}){let{matches:s}=j.useContext(Rn),{pathname:r}=Rs(),o=JSON.stringify($g(s));return j.useMemo(()=>Kg(a,JSON.parse(o),r,l==="path"),[a,o,r,l])}function rb(a,l,s,r,o){Xe(Da(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(cn),{matches:h}=j.useContext(Rn),p=h[h.length-1],y=p?p.params:{},x=p?p.pathname:"/",v=p?p.pathnameBase:"/",b=p&&p.route;{let I=b&&b.path||"";Wg(x,!b||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let w=Rs(),C;C=w;let A=C.pathname||"/",_=A;if(v!=="/"){let I=v.replace(/^\//,"").split("/");_="/"+A.replace(/^\//,"").split("/").slice(I.length).join("/")}let M=Hg(a,{pathname:_});return rn(b||M!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),rn(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),fb(M&&M.map(I=>Object.assign({},I,{params:Object.assign({},y,I.params),pathname:An([v,u.encodeLocation?u.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?v:An([v,u.encodeLocation?u.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),h,s,r,o)}function ob(){let a=pb(),l=eb(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),s=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",a),h=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},l),s?j.createElement("pre",{style:o},s):null,h)}var cb=j.createElement(ob,null),ub=class extends j.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,l){return l.location!==a.location||l.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:l.error,location:l.location,revalidation:a.revalidation||l.revalidation}}componentDidCatch(a,l){this.props.unstable_onError?this.props.unstable_onError(a,l):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?j.createElement(Rn.Provider,{value:this.props.routeContext},j.createElement(_u.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function db({routeContext:a,match:l,children:s}){let r=j.useContext(Nl);return r&&r.static&&r.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=l.route.id),j.createElement(Rn.Provider,{value:a},s)}function fb(a,l=[],s=null,r=null,o=null){if(a==null){if(!s)return null;if(s.errors)a=s.matches;else if(l.length===0&&!s.initialized&&s.matches.length>0)a=s.matches;else return null}let u=a,h=s==null?void 0:s.errors;if(h!=null){let x=u.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);Xe(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,y=-1;if(s)for(let x=0;x<u.length;x++){let v=u[x];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(y=x),v.route.id){let{loaderData:b,errors:w}=s,C=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||C){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((x,v,b)=>{let w,C=!1,A=null,_=null;s&&(w=h&&v.route.id?h[v.route.id]:void 0,A=v.route.errorElement||cb,p&&(y<0&&b===0?(Wg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,_=null):y===b&&(C=!0,_=v.route.hydrateFallbackElement||null)));let M=l.concat(u.slice(0,b+1)),k=()=>{let I;return w?I=A:C?I=_:v.route.Component?I=j.createElement(v.route.Component,null):v.route.element?I=v.route.element:I=x,j.createElement(db,{match:v,routeContext:{outlet:x,matches:M,isDataRoute:s!=null},children:I})};return s&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?j.createElement(ub,{location:s.location,revalidation:s.revalidation,component:A,error:w,children:k(),routeContext:{outlet:null,matches:M,isDataRoute:!0},unstable_onError:r}):k()},null)}function Du(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mb(a){let l=j.useContext(Nl);return Xe(l,Du(a)),l}function hb(a){let l=j.useContext(br);return Xe(l,Du(a)),l}function xb(a){let l=j.useContext(Rn);return Xe(l,Du(a)),l}function Ru(a){let l=xb(a),s=l.matches[l.matches.length-1];return Xe(s.route.id,`${a} can only be used on routes that contain a unique "id"`),s.route.id}function gb(){return Ru("useRouteId")}function pb(){var r;let a=j.useContext(_u),l=hb("useRouteError"),s=Ru("useRouteError");return a!==void 0?a:(r=l.errors)==null?void 0:r[s]}function yb(){let{router:a}=mb("useNavigate"),l=Ru("useNavigate"),s=j.useRef(!1);return Qg(()=>{s.current=!0}),j.useCallback(async(o,u={})=>{rn(s.current,Zg),s.current&&(typeof o=="number"?a.navigate(o):await a.navigate(o,{fromRouteId:l,...u}))},[a,l])}var tx={};function Wg(a,l,s){!l&&!tx[a]&&(tx[a]=!0,rn(!1,s))}j.memo(vb);function vb({routes:a,future:l,state:s,unstable_onError:r}){return rb(a,void 0,s,r,l)}function bb({basename:a="/",children:l=null,location:s,navigationType:r="POP",navigator:o,static:u=!1}){Xe(!Da(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=a.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof s=="string"&&(s=_a(s));let{pathname:y="/",search:x="",hash:v="",state:b=null,key:w="default"}=s,C=j.useMemo(()=>{let A=Mn(y,h);return A==null?null:{location:{pathname:A,search:x,hash:v,state:b,key:w},navigationType:r}},[h,y,x,v,b,w,r]);return rn(C!=null,`<Router basename="${h}"> is not able to match the URL "${y}${x}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:j.createElement(cn.Provider,{value:p},j.createElement(Nr.Provider,{children:l,value:C}))}var nr="get",sr="application/x-www-form-urlencoded";function jr(a){return a!=null&&typeof a.tagName=="string"}function Nb(a){return jr(a)&&a.tagName.toLowerCase()==="button"}function jb(a){return jr(a)&&a.tagName.toLowerCase()==="form"}function wb(a){return jr(a)&&a.tagName.toLowerCase()==="input"}function Cb(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Tb(a,l){return a.button===0&&(!l||l==="_self")&&!Cb(a)}var Xi=null;function Sb(){if(Xi===null)try{new FormData(document.createElement("form"),0),Xi=!1}catch{Xi=!0}return Xi}var Eb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qc(a){return a!=null&&!Eb.has(a)?(rn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sr}"`),null):a}function Ab(a,l){let s,r,o,u,h;if(jb(a)){let p=a.getAttribute("action");r=p?Mn(p,l):null,s=a.getAttribute("method")||nr,o=Qc(a.getAttribute("enctype"))||sr,u=new FormData(a)}else if(Nb(a)||wb(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=a.getAttribute("formaction")||p.getAttribute("action");if(r=y?Mn(y,l):null,s=a.getAttribute("formmethod")||p.getAttribute("method")||nr,o=Qc(a.getAttribute("formenctype"))||Qc(p.getAttribute("enctype"))||sr,u=new FormData(p,a),!Sb()){let{name:x,type:v,value:b}=a;if(v==="image"){let w=x?`${x}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else x&&u.append(x,b)}}else{if(jr(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=nr,r=null,o=sr,h=a}return u&&o==="text/plain"&&(h=u,u=void 0),{action:r,method:s.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iu(a,l){if(a===!1||a===null||typeof a>"u")throw new Error(l)}function Mb(a,l,s){let r=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return r.pathname==="/"?r.pathname=`_root.${s}`:l&&Mn(r.pathname,l)==="/"?r.pathname=`${l.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function _b(a,l){if(a.id in l)return l[a.id];try{let s=await import(a.module);return l[a.id]=s,s}catch(s){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Db(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Rb(a,l,s){let r=await Promise.all(a.map(async o=>{let u=l.routes[o.route.id];if(u){let h=await _b(u,s);return h.links?h.links():[]}return[]}));return Ub(r.flat(1).filter(Db).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function nx(a,l,s,r,o,u){let h=(y,x)=>s[x]?y.route.id!==s[x].route.id:!0,p=(y,x)=>{var v;return s[x].pathname!==y.pathname||((v=s[x].route.path)==null?void 0:v.endsWith("*"))&&s[x].params["*"]!==y.params["*"]};return u==="assets"?l.filter((y,x)=>h(y,x)||p(y,x)):u==="data"?l.filter((y,x)=>{var b;let v=r.routes[y.route.id];if(!v||!v.hasLoader)return!1;if(h(y,x)||p(y,x))return!0;if(y.route.shouldRevalidate){let w=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=s[0])==null?void 0:b.params)||{},nextUrl:new URL(a,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function Ib(a,l,{includeHydrateFallback:s}={}){return kb(a.map(r=>{let o=l.routes[r.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),s&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function kb(a){return[...new Set(a)]}function Lb(a){let l={},s=Object.keys(a).sort();for(let r of s)l[r]=a[r];return l}function Ub(a,l){let s=new Set;return new Set(l),a.reduce((r,o)=>{let u=JSON.stringify(Lb(o));return s.has(u)||(s.add(u),r.push({key:u,link:o})),r},[])}function ep(){let a=j.useContext(Nl);return Iu(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Ob(){let a=j.useContext(br);return Iu(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var ku=j.createContext(void 0);ku.displayName="FrameworkContext";function tp(){let a=j.useContext(ku);return Iu(a,"You must render this element inside a <HydratedRouter> element"),a}function Pb(a,l){let s=j.useContext(ku),[r,o]=j.useState(!1),[u,h]=j.useState(!1),{onFocus:p,onBlur:y,onMouseEnter:x,onMouseLeave:v,onTouchStart:b}=l,w=j.useRef(null);j.useEffect(()=>{if(a==="render"&&h(!0),a==="viewport"){let _=k=>{k.forEach(I=>{h(I.isIntersecting)})},M=new IntersectionObserver(_,{threshold:.5});return w.current&&M.observe(w.current),()=>{M.disconnect()}}},[a]),j.useEffect(()=>{if(r){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[r]);let C=()=>{o(!0)},A=()=>{o(!1),h(!1)};return s?a!=="intent"?[u,w,{}]:[u,w,{onFocus:wa(p,C),onBlur:wa(y,A),onMouseEnter:wa(x,C),onMouseLeave:wa(v,A),onTouchStart:wa(b,C)}]:[!1,w,{}]}function wa(a,l){return s=>{a&&a(s),s.defaultPrevented||l(s)}}function Bb({page:a,...l}){let{router:s}=ep(),r=j.useMemo(()=>Hg(s.routes,a,s.basename),[s.routes,a,s.basename]);return r?j.createElement(zb,{page:a,matches:r,...l}):null}function Vb(a){let{manifest:l,routeModules:s}=tp(),[r,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return Rb(a,l,s).then(h=>{u||o(h)}),()=>{u=!0}},[a,l,s]),r}function zb({page:a,matches:l,...s}){let r=Rs(),{manifest:o,routeModules:u}=tp(),{basename:h}=ep(),{loaderData:p,matches:y}=Ob(),x=j.useMemo(()=>nx(a,l,y,o,r,"data"),[a,l,y,o,r]),v=j.useMemo(()=>nx(a,l,y,o,r,"assets"),[a,l,y,o,r]),b=j.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let A=new Set,_=!1;if(l.forEach(k=>{var V;let I=o.routes[k.route.id];!I||!I.hasLoader||(!x.some(B=>B.route.id===k.route.id)&&k.route.id in p&&((V=u[k.route.id])!=null&&V.shouldRevalidate)||I.hasClientLoader?_=!0:A.add(k.route.id))}),A.size===0)return[];let M=Mb(a,h,"data");return _&&A.size>0&&M.searchParams.set("_routes",l.filter(k=>A.has(k.route.id)).map(k=>k.route.id).join(",")),[M.pathname+M.search]},[h,p,r,o,x,l,a,u]),w=j.useMemo(()=>Ib(v,o),[v,o]),C=Vb(v);return j.createElement(j.Fragment,null,b.map(A=>j.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...s})),w.map(A=>j.createElement("link",{key:A,rel:"modulepreload",href:A,...s})),C.map(({key:A,link:_})=>j.createElement("link",{key:A,nonce:s.nonce,..._})))}function qb(...a){return l=>{a.forEach(s=>{typeof s=="function"?s(l):s!=null&&(s.current=l)})}}var np=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{np&&(window.__reactRouterVersion="7.9.3")}catch{}function Gb({basename:a,children:l,window:s}){let r=j.useRef();r.current==null&&(r.current=Dv({window:s,v5Compat:!0}));let o=r.current,[u,h]=j.useState({action:o.action,location:o.location}),p=j.useCallback(y=>{j.startTransition(()=>h(y))},[h]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.createElement(bb,{basename:a,children:l,location:u.location,navigationType:u.action,navigator:o})}var sp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lp=j.forwardRef(function({onClick:l,discover:s="render",prefetch:r="none",relative:o,reloadDocument:u,replace:h,state:p,target:y,to:x,preventScrollReset:v,viewTransition:b,...w},C){let{basename:A}=j.useContext(cn),_=typeof x=="string"&&sp.test(x),M,k=!1;if(typeof x=="string"&&_&&(M=x,np))try{let H=new URL(window.location.href),Z=x.startsWith("//")?new URL(H.protocol+x):new URL(x),U=Mn(Z.pathname,A);Z.origin===H.origin&&U!=null?x=U+Z.search+Z.hash:k=!0}catch{rn(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=lb(x,{relative:o}),[V,B,L]=Pb(r,w),te=$b(x,{replace:h,state:p,target:y,preventScrollReset:v,relative:o,viewTransition:b});function W(H){l&&l(H),H.defaultPrevented||te(H)}let z=j.createElement("a",{...w,...L,href:M||I,onClick:k||u?l:W,ref:qb(C,B),target:y,"data-discover":!_&&s==="render"?"true":void 0});return V&&!_?j.createElement(j.Fragment,null,z,j.createElement(Bb,{page:I})):z});lp.displayName="Link";var Hb=j.forwardRef(function({"aria-current":l="page",caseSensitive:s=!1,className:r="",end:o=!1,style:u,to:h,viewTransition:p,children:y,...x},v){let b=Ra(h,{relative:x.relative}),w=Rs(),C=j.useContext(br),{navigator:A,basename:_}=j.useContext(cn),M=C!=null&&Qb(b)&&p===!0,k=A.encodeLocation?A.encodeLocation(b).pathname:b.pathname,I=w.pathname,V=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;s||(I=I.toLowerCase(),V=V?V.toLowerCase():null,k=k.toLowerCase()),V&&_&&(V=Mn(V,_)||V);const B=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let L=I===k||!o&&I.startsWith(k)&&I.charAt(B)==="/",te=V!=null&&(V===k||!o&&V.startsWith(k)&&V.charAt(k.length)==="/"),W={isActive:L,isPending:te,isTransitioning:M},z=L?l:void 0,H;typeof r=="function"?H=r(W):H=[r,L?"active":null,te?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let Z=typeof u=="function"?u(W):u;return j.createElement(lp,{...x,"aria-current":z,className:H,ref:v,style:Z,to:h,viewTransition:p},typeof y=="function"?y(W):y)});Hb.displayName="NavLink";var Fb=j.forwardRef(({discover:a="render",fetcherKey:l,navigate:s,reloadDocument:r,replace:o,state:u,method:h=nr,action:p,onSubmit:y,relative:x,preventScrollReset:v,viewTransition:b,...w},C)=>{let A=Xb(),_=Zb(p,{relative:x}),M=h.toLowerCase()==="get"?"get":"post",k=typeof p=="string"&&sp.test(p),I=V=>{if(y&&y(V),V.defaultPrevented)return;V.preventDefault();let B=V.nativeEvent.submitter,L=(B==null?void 0:B.getAttribute("formmethod"))||h;A(B||V.currentTarget,{fetcherKey:l,method:L,navigate:s,replace:o,state:u,relative:x,preventScrollReset:v,viewTransition:b})};return j.createElement("form",{ref:C,method:M,action:_,onSubmit:r?y:I,...w,"data-discover":!k&&a==="render"?"true":void 0})});Fb.displayName="Form";function Yb(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ap(a){let l=j.useContext(Nl);return Xe(l,Yb(a)),l}function $b(a,{target:l,replace:s,state:r,preventScrollReset:o,relative:u,viewTransition:h}={}){let p=ab(),y=Rs(),x=Ra(a,{relative:u});return j.useCallback(v=>{if(Tb(v,l)){v.preventDefault();let b=s!==void 0?s:Ea(y)===Ea(x);p(a,{replace:b,state:r,preventScrollReset:o,relative:u,viewTransition:h})}},[y,p,x,s,r,l,a,o,u,h])}var Kb=0,Jb=()=>`__${String(++Kb)}__`;function Xb(){let{router:a}=ap("useSubmit"),{basename:l}=j.useContext(cn),s=gb();return j.useCallback(async(r,o={})=>{let{action:u,method:h,encType:p,formData:y,body:x}=Ab(r,l);if(o.navigate===!1){let v=o.fetcherKey||Jb();await a.fetch(v,s,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:x,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await a.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:x,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,l,s])}function Zb(a,{relative:l}={}){let{basename:s}=j.useContext(cn),r=j.useContext(Rn);Xe(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),u={...Ra(a||".",{relative:l})},h=Rs();if(a==null){u.search=h.search;let p=new URLSearchParams(u.search),y=p.getAll("index");if(y.some(v=>v==="")){p.delete("index"),y.filter(b=>b).forEach(b=>p.append("index",b));let v=p.toString();u.search=v?`?${v}`:""}}return(!a||a===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:An([s,u.pathname])),Ea(u)}function Qb(a,{relative:l}={}){let s=j.useContext(Xg);Xe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ap("useViewTransitionState"),o=Ra(a,{relative:l});if(!s.isTransitioning)return!1;let u=Mn(s.currentLocation.pathname,r)||s.currentLocation.pathname,h=Mn(s.nextLocation.pathname,r)||s.nextLocation.pathname;return mr(o.pathname,h)!=null||mr(o.pathname,u)!=null}const ip=a=>t.jsxs("svg",{viewBox:"0 0 48 48",...a,children:[t.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),t.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),t.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.223,0-9.657-3.657-11.303-8.309l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),t.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574\r
	l6.19,5.238C42.022,36.218,44,30.561,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),Wc={DEVELOPER:{email:"jetci.jm@gmail.com",pass:"g0KEk,^],k;yo"},ADMIN:{email:"admin@wecare.dev",pass:"admin123"},RADIO:{email:"office1@wecare.dev",pass:"password"},OFFICER:{email:"officer1@wecare.dev",pass:"password"},DRIVER:{email:"driver1@wecare.dev",pass:"password"},COMMUNITY:{email:"community1@wecare.dev",pass:"password"},EXECUTIVE:{email:"executive1@wecare.dev",pass:"password"}},Wb=({onQuickLogin:a})=>t.jsxs("div",{className:"mt-6 p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:[t.jsx("h3",{className:"text-center text-sm font-semibold text-gray-600 mb-3",children:"เข้าสู่ระบบด่วน (สำหรับทดสอบ)"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(Wc).map(l=>t.jsxs("button",{onClick:()=>a(Wc[l].email,Wc[l].pass),className:"w-full px-3 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#005A9C] transition-colors duration-300",children:["Login as ",l]},l))})]}),eN=({onLogin:a,onRegisterClick:l})=>{const[s,r]=j.useState(""),[o,u]=j.useState(""),[h,p]=j.useState(""),[y,x]=j.useState(!1),[v,b]=j.useState(!1),w=()=>s.toLowerCase().includes("jetci"),C=_=>{_.preventDefault(),p(""),x(!0),setTimeout(()=>{a(s,o)||p("อีเมลหรือรหัสผ่านไม่ถูกต้อง โปรดลองอีกครั้ง"),x(!1)},1e3)},A=(_,M)=>{p(""),x(!0),setTimeout(()=>{a(_,M)||(p("Quick login failed for this user."),x(!1))},300)};return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#F0F4F8] pt-16",children:t.jsxs("div",{className:"w-full max-w-sm p-8 space-y-6 bg-white rounded-2xl shadow-xl m-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-[#005A9C]",children:"เข้าสู่ระบบ"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"เข้าสู่ระบบเพื่อจัดการการเดินทางของคุณ"})]}),t.jsxs("form",{className:"space-y-4",onSubmit:C,noValidate:!0,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"อีเมล"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:_=>r(_.target.value),className:"mt-1",placeholder:"user@wecare.dev"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"รหัสผ่าน"}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o,onChange:_=>u(_.target.value),className:"mt-1",placeholder:"password"})]}),h&&t.jsx("p",{className:"text-sm text-center text-[#DC3545]",children:h}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:y,className:"flex justify-center w-full px-4 py-3 font-semibold text-white bg-[#005A9C] rounded-md shadow-sm hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-300",children:y?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})})]}),t.jsxs("div",{className:"relative flex items-center justify-center my-4",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500",children:"หรือ"})})]}),t.jsx("div",{children:t.jsxs("button",{type:"button",className:"flex items-center justify-center w-full px-4 py-3 font-semibold text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#005A9C] transition-colors duration-300",children:[t.jsx(ip,{className:"w-5 h-5 mr-3"}),"เข้าสู่ระบบด้วย Google"]})}),w()&&t.jsx(Wb,{onQuickLogin:A}),t.jsxs("div",{className:"pt-4 text-center text-sm text-gray-600 space-y-2",children:[t.jsx("a",{href:"#",className:"font-medium text-[#005A9C] hover:underline",children:"ลืมรหัสผ่าน?"}),t.jsxs("p",{children:["ยังไม่มีบัญชี?"," ",t.jsx("button",{onClick:l,className:"font-medium text-[#005A9C] hover:underline",children:"สมัครสมาชิกที่นี่"})]})]})]})})},tN=a=>t.jsxs("svg",{...a,viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",style:{stopColor:"#005A9C",stopOpacity:1}}),t.jsx("stop",{offset:"100%",style:{stopColor:"#28A745",stopOpacity:1}})]})}),t.jsx("path",{fill:"#F0F4F8",d:"M48.8,-68.1C63.2,-58.5,74.7,-42.6,80.1,-24.8C85.5,-7,84.8,12.7,76.5,28.6C68.2,44.5,52.3,56.7,35.4,64.9C18.4,73,-9.6,77.2,-29.9,71.2C-50.2,65.2,-62.8,49,-71,31.4C-79.1,13.8,-82.9,-5.2,-78.7,-22.4C-74.5,-39.6,-62.3,-55,-47.3,-64.3C-32.3,-73.6,-14.5,-76.8,2.7,-78.1C19.9,-79.3,34.4,-77.7,48.8,-68.1Z",transform:"translate(100 100)"}),t.jsxs("g",{transform:"translate(35, 35) scale(0.65)",children:[t.jsx("path",{d:"M 50,180 Q 100,130 150,180",stroke:"#005A9C",strokeWidth:"8",fill:"none",strokeLinecap:"round"}),t.jsx("path",{d:"M 150,180 Q 200,230 250,180",stroke:"#005A9C",strokeWidth:"8",fill:"none",strokeLinecap:"round"}),t.jsx("path",{d:"M150 70 C120 40, 80 60, 100 90 L150 140 L200 90 C220 60, 180 40, 150 70 Z",fill:"url(#grad1)"}),t.jsx("circle",{cx:"85",cy:"165",r:"10",fill:"#28A745"})]})]});function Xt(...a){return a.filter(Boolean).join(" ")}const nN="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",sN={default:"bg-[var(--wecare-blue,#3b82f6)] text-white hover:bg-blue-600",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 text-gray-900",link:"text-[var(--wecare-blue,#3b82f6)] underline-offset-4 hover:underline bg-transparent"},lN={sm:"h-9 px-3",default:"h-10 px-4 py-2",lg:"h-11 px-8",icon:"h-10 w-10 p-0"},qt=it.forwardRef(({className:a,variant:l="default",size:s="default",...r},o)=>t.jsx("button",{ref:o,className:Xt(nN,sN[l],lN[s],a),...r}));qt.displayName="Button";const sx=({onRegisterClick:a})=>t.jsx("div",{className:"bg-white text-gray-800",children:t.jsx("section",{className:"pt-24 pb-12 sm:pt-32 sm:pb-16 min-h-[calc(100vh-80px)] flex items-center",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[t.jsxs("div",{className:"text-center lg:text-left",children:[t.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold text-green-600 tracking-tight",children:"WeCare"}),t.jsx("p",{className:"mt-4 text-xl sm:text-2xl text-gray-700",children:"เชื่อมต่อทุกการเดินทาง เพื่อการดูแลที่ไม่สะดุด"}),t.jsx("p",{className:"mt-4 max-w-xl mx-auto lg:mx-0 text-md text-gray-600",children:"แพลตฟอร์มกลางสำหรับประสานงานการเดินทางของผู้ป่วย เชื่อมต่อระหว่างเจ้าหน้าที่, ชุมชน, และคนขับรถ เพื่อการเดินทางไปพบแพทย์ที่สะดวกและไว้วางใจได้"}),t.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row sm:justify-center lg:justify-start gap-3",children:[t.jsx(qt,{onClick:a,size:"lg",children:"สมัครสมาชิก"}),t.jsx(qt,{variant:"outline",size:"lg",onClick:()=>{var l;try{(l=document.getElementById("contact"))==null||l.scrollIntoView({behavior:"smooth"})}catch{}},children:"เรียนรู้เพิ่มเติม"})]})]}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(tN,{className:"w-full h-auto max-w-lg mx-auto"})})]})})})}),aN=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),ht=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),iN=({onLoginClick:a,onRegisterClick:l,onLogoClick:s,onAboutClick:r,onContactClick:o,onNewsClick:u})=>{const[h,p]=j.useState(!1),y=t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{r(),p(!1)},className:"text-gray-600 hover:text-[#005A9C] px-3 py-2 rounded-md text-sm font-medium text-left",children:"เกี่ยวกับเรา"}),t.jsx("button",{onClick:()=>{o(),p(!1)},className:"text-gray-600 hover:text-[#005A9C] px-3 py-2 rounded-md text-sm font-medium text-left",children:"ติดต่อเรา"}),t.jsx("button",{onClick:()=>{u(),p(!1)},className:"text-gray-600 hover:text-[#005A9C] px-3 py-2 rounded-md text-sm font-medium text-left",children:"ข่าวสาร"})]});return t.jsxs("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:[t.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("button",{onClick:s,className:"text-2xl font-bold text-[#005A9C]",children:"WeCare"})}),t.jsx("div",{className:"hidden md:block",children:t.jsx("div",{className:"ml-10 flex items-baseline space-x-4",children:y})}),t.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[t.jsx("button",{onClick:a,className:"text-[#005A9C] border border-[#005A9C] px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-50 transition duration-300",children:"เข้าสู่ระบบ"}),t.jsx("button",{onClick:l,className:"bg-[#005A9C] text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-800 transition duration-300",children:"สมัครสมาชิก"})]}),t.jsx("div",{className:"md:hidden flex items-center",children:t.jsxs("button",{onClick:()=>p(!h),type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),h?t.jsx(ht,{className:"h-6 w-6"}):t.jsx(aN,{className:"h-6 w-6"})]})})]})}),h&&t.jsxs("div",{className:"md:hidden bg-white shadow-lg",id:"mobile-menu",children:[t.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col",children:y}),t.jsx("div",{className:"px-4 pb-4 border-t border-gray-200",children:t.jsxs("div",{className:"mt-4 flex flex-col space-y-3",children:[t.jsx("button",{onClick:()=>{a(),p(!1)},className:"w-full text-center text-[#005A9C] border border-[#005A9C] px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-50 transition duration-300",children:"เข้าสู่ระบบ"}),t.jsx("button",{onClick:()=>{l(),p(!1)},className:"w-full text-center bg-[#005A9C] text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-800 transition duration-300",children:"สมัครสมาชิก"})]})})]})]})},rN=()=>"https://wiangwecare.com/api",oN=rN(),ue=async(a,l={})=>{const s=localStorage.getItem("wecare_token"),r={"Content-Type":"application/json",...l.headers};s&&(r.Authorization=`Bearer ${s}`);const o=await fetch(`${oN}${a}`,{...l,headers:r});if(!o.ok){let u=null;try{u=await o.json()}catch{}throw new Error((u==null?void 0:u.error)||`HTTP ${o.status}: ${o.statusText}`)}return o.status===204?null:o.json()},rp={login:(a,l)=>ue("/login",{method:"POST",body:JSON.stringify({email:a,password:l})}),register:a=>ue("/register",{method:"POST",body:JSON.stringify(a)})},Lu={getPatients:()=>ue("/office/patients"),getPatientById:a=>ue(`/office/patients/${a}`),createPatient:a=>ue("/office/patients",{method:"POST",body:JSON.stringify(a)}),updatePatient:(a,l)=>ue(`/patients/${a}`,{method:"PUT",body:JSON.stringify(l)}),deletePatient:a=>ue(`/patients/${a}`,{method:"DELETE"})},an={getDrivers:()=>ue("/drivers"),getAvailableDrivers:()=>ue("/drivers/available"),getMyRides:()=>ue("/drivers/my-rides"),createDriver:a=>ue("/drivers",{method:"POST",body:JSON.stringify(a)}),updateDriver:(a,l)=>ue(`/drivers/${a}`,{method:"PUT",body:JSON.stringify(l)}),deleteDriver:a=>ue(`/drivers/${a}`,{method:"DELETE"})},Aa={getRides:()=>ue("/rides"),getRideById:a=>ue(`/rides/${a}`),updateRideStatus:(a,l,s)=>ue(`/rides/${a}`,{method:"PUT",body:JSON.stringify({status:l,driver_id:s})}),createRide:a=>ue("/rides",{method:"POST",body:JSON.stringify(a)})},Ta={getTeams:()=>ue("/teams"),getTeamById:a=>ue(`/teams/${a}`),createTeam:a=>ue("/teams",{method:"POST",body:JSON.stringify(a)}),updateTeam:(a,l)=>ue(`/teams/${a}`,{method:"PUT",body:JSON.stringify(l)}),deleteTeam:a=>ue(`/teams/${a}`,{method:"DELETE"})},cN=({onLoginClick:a})=>{const[l,s]=j.useState(""),[r,o]=j.useState(""),[u,h]=j.useState(""),[p,y]=j.useState(""),[x,v]=j.useState(""),[b,w]=j.useState(""),[C,A]=j.useState(""),[_,M]=j.useState(!1),k=async I=>{if(I.preventDefault(),w(""),A(""),p!==x){w("รหัสผ่านและการยืนยันรหัสผ่านไม่ตรงกัน");return}if(p.length<6){w("รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร");return}M(!0);try{const V=`${l} ${r}`.trim();await rp.register({name:V,email:u,password:p}),A("สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ"),s(""),o(""),h(""),y(""),v(""),setTimeout(()=>{a()},2e3)}catch(V){console.error("Registration error:",V),w(V.message||"การสมัครสมาชิกล้มเหลว กรุณาลองอีกครั้ง")}finally{M(!1)}};return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#F0F4F8] pt-16",children:t.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-2xl shadow-xl m-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-[#005A9C]",children:"สร้างบัญชีใหม่"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"เข้าร่วม WeCare เพื่อเริ่มการเดินทาง"})]}),t.jsx("div",{children:t.jsxs("button",{type:"button",className:"flex items-center justify-center w-full px-4 py-3 font-semibold text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#005A9C] transition-colors duration-300",children:[t.jsx(ip,{className:"w-5 h-5 mr-3"}),"สมัครสมาชิกด้วย Google"]})}),t.jsxs("div",{className:"relative flex items-center justify-center my-4",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500 uppercase tracking-wide",children:"หรือสมัครด้วยอีเมล"})})]}),t.jsxs("form",{className:"space-y-4",onSubmit:k,noValidate:!0,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"ชื่อ"}),t.jsx("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:l,onChange:I=>s(I.target.value),className:"mt-1",placeholder:"สมชาย"})]}),t.jsxs("div",{className:"mt-4 md:mt-0",children:[t.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"นามสกุล"}),t.jsx("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:r,onChange:I=>o(I.target.value),className:"mt-1",placeholder:"ใจดี"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"อีเมล"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:u,onChange:I=>h(I.target.value),className:"mt-1",placeholder:"you@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"รหัสผ่าน"}),t.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:p,onChange:I=>y(I.target.value),className:"mt-1",placeholder:"อย่างน้อย 6 ตัวอักษร"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"ยืนยันรหัสผ่าน"}),t.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:x,onChange:I=>v(I.target.value),className:"mt-1",placeholder:"กรอกรหัสผ่านอีกครั้ง"})]}),b&&t.jsx("p",{className:"text-sm text-center text-[#DC3545]",children:b}),C&&t.jsx("p",{className:"text-sm text-center text-green-600",children:C}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:_,className:"flex justify-center w-full px-4 py-3 font-semibold text-white bg-[#28A745] rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-300",children:_?"กำลังสมัคร...":"สมัครสมาชิก"})})]}),t.jsx("div",{className:"pt-4 text-center border-t border-gray-200",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["มีบัญชีอยู่แล้ว?"," ",t.jsx("button",{onClick:a,className:"font-medium text-[#005A9C] hover:underline",children:"เข้าสู่ระบบที่นี่"})]})})]})})},uN=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("circle",{cx:"12",cy:"12",r:"6"}),t.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),Uu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),t.jsx("path",{d:"M9 22v-4h6v4"}),t.jsx("path",{d:"M8 6h.01"}),t.jsx("path",{d:"M16 6h.01"}),t.jsx("path",{d:"M12 6h.01"}),t.jsx("path",{d:"M12 10h.01"}),t.jsx("path",{d:"M12 14h.01"}),t.jsx("path",{d:"M16 10h.01"}),t.jsx("path",{d:"M16 14h.01"}),t.jsx("path",{d:"M8 10h.01"}),t.jsx("path",{d:"M8 14h.01"})]}),on=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),dN=()=>t.jsx("div",{className:"bg-white text-gray-800 pt-16",children:t.jsxs("main",{children:[t.jsx("section",{className:"py-16 sm:py-24 bg-[#F0F4F8]",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-[#005A9C]",children:"เกี่ยวกับ WeCare"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600 max-w-3xl mx-auto",children:"เรามุ่งมั่นที่จะลดช่องว่างในการเข้าถึงบริการสุขภาพ ด้วยการสร้างแพลตฟอร์มที่เชื่อมโยงทุกการเดินทางของผู้ป่วยให้เป็นไปอย่างราบรื่นและปลอดภัย"})]})})}),t.jsx("section",{className:"py-16 sm:py-20",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 space-y-16",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block bg-[#005A9C] p-4 rounded-full",children:t.jsx(uN,{className:"h-10 w-10 text-white"})}),t.jsx("h2",{className:"mt-4 text-3xl font-bold text-[#005A9C]",children:"ภารกิจของเรา"}),t.jsx("p",{className:"mt-4 max-w-3xl mx-auto text-gray-700 text-lg",children:"เพื่อสร้างระบบประสานงานการเดินทางที่มีประสิทธิภาพและน่าเชื่อถือ สำหรับผู้ป่วยที่ต้องการการดูแลเป็นพิเศษ โดยเชื่อมต่อเครือข่ายคนขับรถอาสาสมัครเข้ากับหน่วยงานสาธารณสุขและชุมชน เพื่อให้ผู้ป่วยทุกคนได้รับการดูแลที่ไม่สะดุด"})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-16",children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-[#005A9C] mb-12",children:"บุคลากรสำคัญเบื้องหลังโครงการ"}),t.jsxs("div",{className:"grid grid-cols-1 gap-10",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col sm:flex-row items-center p-6 border border-gray-100",children:[t.jsx("img",{src:"https://i.pravatar.cc/150?u=varaporn",alt:"นางสาววราภรณ์ พรหมสุวรรณ์",className:"w-32 h-32 rounded-full flex-shrink-0 object-cover border-4 border-[#005A9C]"}),t.jsxs("div",{className:"mt-6 sm:mt-0 sm:ml-8 text-center sm:text-left",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"นางสาววราภรณ์ พรหมสุวรรณ์"}),t.jsx("p",{className:"text-md font-semibold text-[#005A9C]",children:"นายกองค์การบริหารส่วนตำบลเวียง"}),t.jsx("p",{className:"mt-2 text-gray-600 italic",children:'"ผู้ผลักดันโครงการ และวางแผนแนวนโยบายการพัฒนา"'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-[#F0F4F8] p-6 rounded-xl text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center bg-white p-3 rounded-full shadow-md",children:t.jsx(Uu,{className:"h-8 w-8 text-[#005A9C]"})}),t.jsx("h3",{className:"mt-4 text-lg font-bold text-gray-800",children:"หน่วยงานผู้รับผิดชอบ"}),t.jsx("p",{className:"mt-1 text-gray-600",children:"องค์การบริหารส่วนตำบลเวียง"})]}),t.jsxs("div",{className:"bg-[#F0F4F8] p-6 rounded-xl text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center bg-white p-3 rounded-full shadow-md",children:t.jsx(on,{className:"h-8 w-8 text-[#005A9C]"})}),t.jsx("h3",{className:"mt-4 text-lg font-bold text-gray-800",children:"ผู้พัฒนา"}),t.jsx("p",{className:"mt-1 text-gray-600",children:"เจษฎา มูลมาวัน"}),t.jsx("p",{className:"text-sm text-gray-500",children:"ผู้ช่วยนักวิชาการคอมพิวเตอร์, สังกัด สำนักปลัด"})]})]})]})]})]})})]})}),Ou=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),fN=()=>t.jsx("footer",{className:"bg-[#005A9C] text-white",children:t.jsxs("div",{className:"max-w-6xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-sm",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsx("h3",{className:"text-base font-semibold tracking-wider uppercase",children:"องค์การบริหารส่วนตำบลเวียง"}),t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx(Uu,{className:"w-5 h-5 mr-3 mt-1 flex-shrink-0"}),t.jsx("span",{children:"เลขที่ 666 ถ.รอบเวียงสุทโธ ม.3 ต.เวียง อ.ฝาง จ.เชียงใหม่ 50110"})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ou,{className:"w-5 h-5 mr-3 mt-1 flex-shrink-0"}),t.jsx("span",{children:"โทรศัพท์: 053-382670, โทรสาร (FAX): 053-382670"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-semibold tracking-wider uppercase",children:"ผู้พัฒนา"}),t.jsx("p",{className:"mt-4",children:"เจษฎา มูลมาวัน (ผู้ช่วยนักวิชาการคอมพิวเตอร์)"})]})]}),t.jsx("div",{className:"mt-8 border-t border-blue-700 pt-6 text-center text-xs text-blue-200",children:t.jsx("p",{children:"© 2568 องค์การบริหารส่วนตำบลเวียง. สงวนลิขสิทธิ์"})})]})}),mN=()=>{const[a,l]=j.useState({name:"",email:"",subject:"",message:""}),[s,r]=j.useState(!1),[o,u]=j.useState(""),h=y=>{const{name:x,value:v}=y.target;l(b=>({...b,[x]:v}))},p=y=>{y.preventDefault(),r(!0),u(""),setTimeout(()=>{console.log("Form submitted:",a),u("ขอบคุณสำหรับข้อความของคุณ! เราจะติดต่อกลับโดยเร็วที่สุด"),l({name:"",email:"",subject:"",message:""}),r(!1)},1500)};return t.jsx("div",{className:"bg-white text-gray-800 pt-16",children:t.jsx("main",{className:"py-16 sm:py-24",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-16",children:[t.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-[#005A9C]",children:"ติดต่อเรา"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"เรายินดีรับฟังความคิดเห็นของคุณ หากมีคำถามหรือข้อเสนอแนะ โปรดติดต่อเราผ่านช่องทางด้านล่าง"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[t.jsxs("div",{className:"bg-[#F0F4F8] p-8 rounded-xl shadow-sm",children:[t.jsx("h2",{className:"text-2xl font-bold text-[#005A9C] mb-6",children:"ข้อมูลการติดต่อ"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0 bg-[#005A9C] p-3 rounded-full",children:t.jsx(Uu,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"ที่อยู่"}),t.jsx("p",{className:"text-gray-600",children:"เลขที่ 666 ถ.รอบเวียงสุทโธ ม.3 ต.เวียง อ.ฝาง จ.เชียงใหม่ 50110"})]})]}),t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0 bg-[#005A9C] p-3 rounded-full",children:t.jsx(Ou,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"โทรศัพท์ / โทรสาร"}),t.jsx("p",{className:"text-gray-600",children:"โทรศัพท์: 053-382670"}),t.jsx("p",{className:"text-gray-600",children:"โทรสาร (FAX): 053-382670"})]})]})]})]}),t.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-200",children:[t.jsx("h2",{className:"text-2xl font-bold text-[#005A9C] mb-6",children:"ส่งข้อความถึงเรา"}),t.jsxs("form",{onSubmit:p,className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"ชื่อ"}),t.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:a.name,onChange:h,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#005A9C] focus:border-[#005A9C] sm:text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"อีเมล"}),t.jsx("input",{type:"email",name:"email",id:"email",required:!0,value:a.email,onChange:h,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#005A9C] focus:border-[#005A9C] sm:text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700",children:"หัวข้อ"}),t.jsx("input",{type:"text",name:"subject",id:"subject",required:!0,value:a.subject,onChange:h,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#005A9C] focus:border-[#005A9C] sm:text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"ข้อความ"}),t.jsx("textarea",{name:"message",id:"message",rows:4,required:!0,value:a.message,onChange:h,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#005A9C] focus:border-[#005A9C] sm:text-sm"})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#005A9C] hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:s?"กำลังส่ง...":"ส่งข้อความ"})}),o&&t.jsx("p",{className:`text-center text-sm font-medium ${o.includes("ขอบคุณ")?"text-green-600":"text-[#DC3545]"}`,children:o})]})]})]})]})})})},Ms=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Kt=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Rt=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10h-3.2c-.7 0-1.3.4-1.6.9l-1.2 2.1c-.2.5-.7.9-1.2.9H3.6c-.6 0-1.1.4-1.1.9v2.1c0 .6.5 1 1.1 1H4"}),t.jsx("circle",{cx:"7",cy:"17",r:"2"}),t.jsx("circle",{cx:"17",cy:"17",r:"2"}),t.jsx("path",{d:"M14 17h-3"})]}),Pu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16 17 21 12 16 7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),wr=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),t.jsx("path",{d:"M3 3v5h5"}),t.jsx("path",{d:"M12 7v5l4 2"})]}),hr=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"}),t.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"9"}),t.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"22"}),t.jsx("line",{x1:"22",y1:"12",x2:"15",y2:"12"}),t.jsx("line",{x1:"9",y1:"12",x2:"2",y2:"12"})]}),xu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2V4"}),t.jsx("path",{d:"M16 8h-4"}),t.jsx("path",{d:"M16 12h-4"}),t.jsx("path",{d:"M12 16h-4"})]}),op=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),t.jsx("polyline",{points:"14 2 14 8 20 8"}),t.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),t.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),t.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),cp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),lx=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),gu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),t.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),t.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),t.jsx("path",{d:"m9 16 2 2 4-4"})]}),hN=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"1",y:"3",width:"15",height:"13"}),t.jsx("polygon",{points:"16 8 20 8 23 11 23 16 16 16 16 8"}),t.jsx("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),t.jsx("circle",{cx:"18.5",cy:"18.5",r:"2.5"})]}),xN=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),t.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),ax=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),t.jsx("polyline",{points:"14 2 14 8 20 8"}),t.jsx("path",{d:"M12 18v-6"}),t.jsx("path",{d:"M9 18v-3"}),t.jsx("path",{d:"M15 18v-1"})]}),gN=a=>{switch(a){case"driver":return[{id:"today_jobs",label:"งานของฉัน",icon:Ms},{id:"history",label:"ประวัติการเดินทาง",icon:wr}];case"community":return[{id:"dashboard",label:"หน้าหลัก",icon:Ms},{id:"patients",label:"จัดการผู้ป่วย",icon:Kt},{id:"rides",label:"จัดการการเดินทาง",icon:Rt}];case"OFFICER":case"radio":case"radio_center":return[{id:"dashboard",label:"ภาพรวม",icon:Ms},{id:"rides",label:"จัดการการเดินทาง",icon:Rt},{id:"patients",label:"จัดการผู้ป่วย",icon:Kt},{id:"drivers",label:"จัดการคนขับ",icon:hr},{id:"manage_teams",label:"จัดการชุดเวร",icon:lx},{id:"manage_schedules",label:"จัดการตารางเวร",icon:gu},{id:"news",label:"จัดการข่าวสาร",icon:xu},{id:"reports",label:"ศูนย์กลางรายงาน",icon:ax}];case"EXECUTIVE":return[{id:"executive_dashboard",label:"ภาพรวมโครงการ",icon:Ms}];case"DEVELOPER":case"admin":return[{id:"dashboard",label:"ภาพรวมระบบ",icon:Ms},{id:"users",label:"จัดการบัญชีผู้ใช้",icon:Kt},{id:"rides",label:"จัดการการเดินทาง",icon:Rt},{id:"patients",label:"จัดการผู้ป่วย",icon:Kt},{id:"drivers",label:"จัดการคนขับ",icon:hr},{id:"manage_teams",label:"จัดการชุดเวร",icon:lx},{id:"manage_schedules",label:"จัดการตารางเวร",icon:gu},{id:"manage_vehicles",label:"จัดการยานพาหนะ",icon:hN},{id:"manage_vehicle_types",label:"จัดการประเภทรถ",icon:xN},{id:"news",label:"จัดการข่าวสาร",icon:xu},{id:"reports",label:"ศูนย์กลางรายงาน",icon:ax},{id:"logs",label:"บันทึกการใช้งาน",icon:op},{id:"settings",label:"ตั้งค่าระบบ",icon:cp}];default:return[]}},pN=({user:a,activeView:l,setActiveView:s,onLogout:r})=>{const o=gN(a.role),u={id:"profile",label:"โปรไฟล์",icon:on},h=({item:p})=>{const y=l===p.id;return t.jsxs("button",{onClick:()=>s(p.id),className:`w-full flex items-center px-4 py-2.5 text-sm font-semibold rounded-lg transition-all duration-200 group ${y?"bg-[var(--wecare-blue)] text-white shadow":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[t.jsx(p.icon,{className:`w-5 h-5 mr-3 transition-colors ${y?"text-white":"text-gray-400 group-hover:text-gray-500"}`}),t.jsx("span",{children:p.label})]})};return t.jsx("aside",{className:"hidden md:flex md:flex-shrink-0",children:t.jsx("div",{className:"flex flex-col w-64",children:t.jsxs("div",{className:"flex flex-col h-0 flex-1 bg-[var(--bg-card)] border-r border-[var(--border-color)]",children:[t.jsx("div",{className:"flex items-center h-16 flex-shrink-0 px-4",children:t.jsx("h1",{className:"text-2xl font-bold text-[var(--wecare-blue)]",children:"WeCare"})}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto p-4",children:[t.jsx("nav",{className:"flex-1 space-y-1",children:o.map(p=>t.jsx(h,{item:p},p.id))}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("div",{className:"border-t border-[var(--border-color)] my-4"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(h,{item:u}),t.jsxs("button",{onClick:r,className:"w-full flex items-center px-4 py-2.5 text-sm font-semibold rounded-lg text-gray-600 hover:bg-gray-100 group",children:[t.jsx(Pu,{className:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500 transition-colors"}),t.jsx("span",{children:"ออกจากระบบ"})]})]})]})]})]})})})},Ht=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"m9 18 6-6-6-6"})}),yN=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),t.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]});var lr={exports:{}},vN=lr.exports,ix;function up(){return ix||(ix=1,(function(a,l){(function(s,r){a.exports=r()})(vN,(function(){var s=1e3,r=6e4,o=36e5,u="millisecond",h="second",p="minute",y="hour",x="day",v="week",b="month",w="quarter",C="year",A="date",_="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var E=["th","st","nd","rd"],S=P%100;return"["+P+(E[(S-20)%10]||E[S]||E[0])+"]"}},V=function(P,E,S){var q=String(P);return!q||q.length>=E?P:""+Array(E+1-q.length).join(S)+P},B={s:V,z:function(P){var E=-P.utcOffset(),S=Math.abs(E),q=Math.floor(S/60),X=S%60;return(E<=0?"+":"-")+V(q,2,"0")+":"+V(X,2,"0")},m:function P(E,S){if(E.date()<S.date())return-P(S,E);var q=12*(S.year()-E.year())+(S.month()-E.month()),X=E.clone().add(q,b),oe=S-X<0,D=E.clone().add(q+(oe?-1:1),b);return+(-(q+(S-X)/(oe?X-D:D-X))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:b,y:C,w:v,d:x,D:A,h:y,m:p,s:h,ms:u,Q:w}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},L="en",te={};te[L]=I;var W="$isDayjsObject",z=function(P){return P instanceof ae||!(!P||!P[W])},H=function P(E,S,q){var X;if(!E)return L;if(typeof E=="string"){var oe=E.toLowerCase();te[oe]&&(X=oe),S&&(te[oe]=S,X=oe);var D=E.split("-");if(!X&&D.length>1)return P(D[0])}else{var ee=E.name;te[ee]=E,X=ee}return!q&&X&&(L=X),X||!q&&L},Z=function(P,E){if(z(P))return P.clone();var S=typeof E=="object"?E:{};return S.date=P,S.args=arguments,new ae(S)},U=B;U.l=H,U.i=z,U.w=function(P,E){return Z(P,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var ae=(function(){function P(S){this.$L=H(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[W]=!0}var E=P.prototype;return E.parse=function(S){this.$d=(function(q){var X=q.date,oe=q.utc;if(X===null)return new Date(NaN);if(U.u(X))return new Date;if(X instanceof Date)return new Date(X);if(typeof X=="string"&&!/Z$/i.test(X)){var D=X.match(M);if(D){var ee=D[2]-1||0,Q=(D[7]||"0").substring(0,3);return oe?new Date(Date.UTC(D[1],ee,D[3]||1,D[4]||0,D[5]||0,D[6]||0,Q)):new Date(D[1],ee,D[3]||1,D[4]||0,D[5]||0,D[6]||0,Q)}}return new Date(X)})(S),this.init()},E.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},E.$utils=function(){return U},E.isValid=function(){return this.$d.toString()!==_},E.isSame=function(S,q){var X=Z(S);return this.startOf(q)<=X&&X<=this.endOf(q)},E.isAfter=function(S,q){return Z(S)<this.startOf(q)},E.isBefore=function(S,q){return this.endOf(q)<Z(S)},E.$g=function(S,q,X){return U.u(S)?this[q]:this.set(X,S)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(S,q){var X=this,oe=!!U.u(q)||q,D=U.p(S),ee=function(rt,Ze){var jt=U.w(X.$u?Date.UTC(X.$y,Ze,rt):new Date(X.$y,Ze,rt),X);return oe?jt:jt.endOf(x)},Q=function(rt,Ze){return U.w(X.toDate()[rt].apply(X.toDate("s"),(oe?[0,0,0,0]:[23,59,59,999]).slice(Ze)),X)},ie=this.$W,re=this.$M,de=this.$D,xe="set"+(this.$u?"UTC":"");switch(D){case C:return oe?ee(1,0):ee(31,11);case b:return oe?ee(1,re):ee(0,re+1);case v:var qe=this.$locale().weekStart||0,Ae=(ie<qe?ie+7:ie)-qe;return ee(oe?de-Ae:de+(6-Ae),re);case x:case A:return Q(xe+"Hours",0);case y:return Q(xe+"Minutes",1);case p:return Q(xe+"Seconds",2);case h:return Q(xe+"Milliseconds",3);default:return this.clone()}},E.endOf=function(S){return this.startOf(S,!1)},E.$set=function(S,q){var X,oe=U.p(S),D="set"+(this.$u?"UTC":""),ee=(X={},X[x]=D+"Date",X[A]=D+"Date",X[b]=D+"Month",X[C]=D+"FullYear",X[y]=D+"Hours",X[p]=D+"Minutes",X[h]=D+"Seconds",X[u]=D+"Milliseconds",X)[oe],Q=oe===x?this.$D+(q-this.$W):q;if(oe===b||oe===C){var ie=this.clone().set(A,1);ie.$d[ee](Q),ie.init(),this.$d=ie.set(A,Math.min(this.$D,ie.daysInMonth())).$d}else ee&&this.$d[ee](Q);return this.init(),this},E.set=function(S,q){return this.clone().$set(S,q)},E.get=function(S){return this[U.p(S)]()},E.add=function(S,q){var X,oe=this;S=Number(S);var D=U.p(q),ee=function(re){var de=Z(oe);return U.w(de.date(de.date()+Math.round(re*S)),oe)};if(D===b)return this.set(b,this.$M+S);if(D===C)return this.set(C,this.$y+S);if(D===x)return ee(1);if(D===v)return ee(7);var Q=(X={},X[p]=r,X[y]=o,X[h]=s,X)[D]||1,ie=this.$d.getTime()+S*Q;return U.w(ie,this)},E.subtract=function(S,q){return this.add(-1*S,q)},E.format=function(S){var q=this,X=this.$locale();if(!this.isValid())return X.invalidDate||_;var oe=S||"YYYY-MM-DDTHH:mm:ssZ",D=U.z(this),ee=this.$H,Q=this.$m,ie=this.$M,re=X.weekdays,de=X.months,xe=X.meridiem,qe=function(Ze,jt,fn,In){return Ze&&(Ze[jt]||Ze(q,oe))||fn[jt].slice(0,In)},Ae=function(Ze){return U.s(ee%12||12,Ze,"0")},rt=xe||function(Ze,jt,fn){var In=Ze<12?"AM":"PM";return fn?In.toLowerCase():In};return oe.replace(k,(function(Ze,jt){return jt||(function(fn){switch(fn){case"YY":return String(q.$y).slice(-2);case"YYYY":return U.s(q.$y,4,"0");case"M":return ie+1;case"MM":return U.s(ie+1,2,"0");case"MMM":return qe(X.monthsShort,ie,de,3);case"MMMM":return qe(de,ie);case"D":return q.$D;case"DD":return U.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return qe(X.weekdaysMin,q.$W,re,2);case"ddd":return qe(X.weekdaysShort,q.$W,re,3);case"dddd":return re[q.$W];case"H":return String(ee);case"HH":return U.s(ee,2,"0");case"h":return Ae(1);case"hh":return Ae(2);case"a":return rt(ee,Q,!0);case"A":return rt(ee,Q,!1);case"m":return String(Q);case"mm":return U.s(Q,2,"0");case"s":return String(q.$s);case"ss":return U.s(q.$s,2,"0");case"SSS":return U.s(q.$ms,3,"0");case"Z":return D}return null})(Ze)||D.replace(":","")}))},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(S,q,X){var oe,D=this,ee=U.p(q),Q=Z(S),ie=(Q.utcOffset()-this.utcOffset())*r,re=this-Q,de=function(){return U.m(D,Q)};switch(ee){case C:oe=de()/12;break;case b:oe=de();break;case w:oe=de()/3;break;case v:oe=(re-ie)/6048e5;break;case x:oe=(re-ie)/864e5;break;case y:oe=re/o;break;case p:oe=re/r;break;case h:oe=re/s;break;default:oe=re}return X?oe:U.a(oe)},E.daysInMonth=function(){return this.endOf(b).$D},E.$locale=function(){return te[this.$L]},E.locale=function(S,q){if(!S)return this.$L;var X=this.clone(),oe=H(S,q,!0);return oe&&(X.$L=oe),X},E.clone=function(){return U.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},P})(),$=ae.prototype;return Z.prototype=$,[["$ms",u],["$s",h],["$m",p],["$H",y],["$W",x],["$M",b],["$y",C],["$D",A]].forEach((function(P){$[P[1]]=function(E){return this.$g(E,P[0],P[1])}})),Z.extend=function(P,E){return P.$i||(P(E,ae,Z),P.$i=!0),Z},Z.locale=H,Z.isDayjs=z,Z.unix=function(P){return Z(1e3*P)},Z.en=te[L],Z.Ls=te,Z.p={},Z}))})(lr)),lr.exports}var bN=up();const me=Ds(bN);var ar={exports:{}},NN=ar.exports,rx;function jN(){return rx||(rx=1,(function(a,l){(function(s,r){a.exports=r()})(NN,(function(){return function(s,r){r.prototype.isSameOrBefore=function(o,u){return this.isSame(o,u)||this.isBefore(o,u)}}}))})(ar)),ar.exports}var wN=jN();const dp=Ds(wN);var ir={exports:{}},CN=ir.exports,ox;function TN(){return ox||(ox=1,(function(a,l){(function(s,r){a.exports=r()})(CN,(function(){return function(s,r){r.prototype.isSameOrAfter=function(o,u){return this.isSame(o,u)||this.isAfter(o,u)}}}))})(ir)),ir.exports}var SN=TN();const EN=Ds(SN);var rr={exports:{}},AN=rr.exports,cx;function MN(){return cx||(cx=1,(function(a,l){(function(s,r){a.exports=r()})(AN,(function(){return function(s,r,o){r.prototype.isToday=function(){var u="YYYY-MM-DD",h=o();return this.format(u)===h.format(u)}}}))})(rr)),rr.exports}var _N=MN();const DN=Ds(_N);var or={exports:{}},RN=or.exports,ux;function IN(){return ux||(ux=1,(function(a,l){(function(s,r){a.exports=r()})(RN,(function(){return function(s,r){var o=r.prototype,u=o.format;o.format=function(h){var p=this,y=(h||"YYYY-MM-DDTHH:mm:ssZ").replace(/(\[[^\]]+])|BBBB|BB/g,(function(x,v){var b,w=String(p.$y+543),C=x==="BB"?[w.slice(-2),2]:[w,4];return v||(b=p.$utils()).s.apply(b,C.concat(["0"]))}));return u.bind(this)(y)}}}))})(or)),or.exports}var kN=IN();const LN=Ds(kN);var cr={exports:{}},UN=cr.exports,dx;function ON(){return dx||(dx=1,(function(a,l){(function(s,r){a.exports=r(up())})(UN,(function(s){function r(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var o=r(s),u={name:"th",weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"},ordinal:function(h){return h+"."}};return o.default.locale(u,null,!0),u}))})(cr)),cr.exports}ON();me.extend(LN);me.extend(dp);me.extend(EN);me.extend(DN);me.locale("th");const Is=a=>{if(!a)return"N/A";try{return me(a).format("DD/MM/BBBB")}catch(l){return console.error("Invalid date for formatDateToThai:",a,l),"Invalid Date"}},un=a=>{if(!a)return"N/A";try{return me(a).format("DD/MM/BBBB, HH:mm")}catch(l){return console.error("Invalid date for formatDateTimeToThai:",a,l),"Invalid Date"}},fp=a=>{if(!a)return"";try{return me(a).format("D MMMM BBBB")}catch(l){return console.error("Invalid date for formatFullDateToThai:",a,l),""}},fx=a=>a?me(a).isToday():!1,PN={dashboard:"System Overview",patients:"Manage Patients",rides:"Manage Rides",today_jobs:"My Jobs",history:"Ride History",drivers:"Manage Drivers",manage_teams:"Manage Teams",manage_schedules:"จัดการตารางเวร",news:"จัดการข่าวสาร",edit_news:"เขียน/แก้ไขข่าว",reports:"ศูนย์กลางรายงาน",users:"User Management",manage_vehicles:"จัดการยานพาหนะ",manage_vehicle_types:"จัดการประเภทรถ",logs:"Audit Logs",settings:"System Settings",test_map:"Test Map Component",executive_dashboard:"ภาพรวมโครงการ",profile:"My Profile",register_patient:"Register New Patient",request_ride:"Request New Ride",patient_detail:"Patient Details"},BN=({user:a,activeView:l,notifications:s,setNotifications:r})=>{const[o,u]=j.useState(!1),h=s.filter(y=>!y.isRead).length,p=()=>{u(!o),o||r(s.map(y=>({...y,isRead:!0})))};return t.jsx("header",{className:"flex-shrink-0 bg-white border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Home"}),t.jsx(Ht,{className:"w-4 h-4 mx-1"}),t.jsx("span",{className:"font-medium text-gray-800",children:PN[l]||"Page"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:p,className:"relative text-gray-500 hover:text-gray-700",children:[t.jsx(yN,{className:"w-6 h-6"}),h>0&&t.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:h})]}),o&&t.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border z-20",children:[t.jsx("div",{className:"p-3 border-b font-semibold text-gray-700",children:"การแจ้งเตือน"}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.map(y=>t.jsxs("div",{className:`p-3 border-b text-sm ${!y.isRead&&y.id===s[0].id?"bg-blue-50":"hover:bg-gray-50"}`,children:[t.jsx("p",{className:"text-gray-800",children:y.message}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:un(y.timestamp)})]},y.id))})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:block",children:a.email}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:t.jsx(on,{className:"w-5 h-5 text-gray-500"})})]})]})]})})},ft=({title:a,value:l,icon:s,variant:r="default",onClick:o})=>{const u={default:{value:"text-gray-800",iconBg:"bg-gray-100",iconText:"text-gray-600"},info:{value:"text-[var(--wecare-blue)]",iconBg:"bg-[var(--wecare-blue-light)]",iconText:"text-[var(--wecare-blue)]"},warning:{value:"text-red-600",iconBg:"bg-red-100",iconText:"text-red-600"},success:{value:"text-green-600",iconBg:"bg-green-100",iconText:"text-green-600"}},h=u[r]||u.default,p=t.jsxs("div",{className:"flex items-center w-full gap-5",children:[t.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-full flex items-center justify-center ${h.iconBg}`,children:t.jsx(s,{className:`w-8 h-8 ${h.iconText}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-sm text-[var(--text-secondary)] font-medium",children:a}),t.jsx("p",{className:`text-3xl font-bold ${h.value}`,children:l})]})]});return o?t.jsx("button",{onClick:o,className:"bg-[var(--bg-card)] p-6 rounded-lg shadow-sm flex items-center border border-[var(--border-color)] w-full text-left hover:border-[var(--wecare-blue)] hover:shadow-md transition-all duration-300",children:p}):t.jsx("div",{className:"bg-[var(--bg-card)] p-6 rounded-lg shadow-sm flex items-center border border-[var(--border-color)]",children:p})},mp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Bu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]});var ce=(a=>(a.PENDING="PENDING",a.ASSIGNED="ASSIGNED",a.EN_ROUTE_TO_PICKUP="EN_ROUTE_TO_PICKUP",a.ARRIVED_AT_PICKUP="ARRIVED_AT_PICKUP",a.IN_PROGRESS="IN_PROGRESS",a.COMPLETED="COMPLETED",a.CANCELLED="CANCELLED",a))(ce||{}),Be=(a=>(a.AVAILABLE="AVAILABLE",a.ON_TRIP="ON_TRIP",a.OFFLINE="OFFLINE",a.INACTIVE="INACTIVE",a))(Be||{}),hp=(a=>(a.LOGIN="LOGIN",a.LOGOUT="LOGOUT",a.CREATE_USER="CREATE_USER",a.UPDATE_USER="UPDATE_USER",a.DELETE_USER="DELETE_USER",a.CREATE_PATIENT="CREATE_PATIENT",a.UPDATE_PATIENT="UPDATE_PATIENT",a.DELETE_PATIENT="DELETE_PATIENT",a.CREATE_RIDE="CREATE_RIDE",a.UPDATE_RIDE="UPDATE_RIDE",a.ASSIGN_DRIVER="ASSIGN_DRIVER",a.CANCEL_RIDE="CANCEL_RIDE",a.COMPLETE_RIDE="COMPLETE_RIDE",a.UPDATE_SETTINGS="UPDATE_SETTINGS",a))(hp||{}),bt=(a=>(a.AVAILABLE="พร้อมใช้งาน",a.MAINTENANCE="ซ่อมบำรุง",a.ASSIGNED="ผูกกับทีมแล้ว",a))(bt||{}),_s=(a=>(a.MORNING="กะเช้า",a.AFTERNOON="กะบ่าย",a.NIGHT="กะดึก",a.DAY_OFF="วันหยุด",a.ON_LEAVE="ลา",a))(_s||{}),ls=(a=>(a.ON_DUTY="เข้าเวร",a.REST_DAY="วันพัก",a))(ls||{});const VN={[ce.PENDING]:{text:"รอดำเนินการ",classes:"bg-yellow-100 text-yellow-800"},[ce.ASSIGNED]:{text:"ได้รับมอบหมาย",classes:"bg-blue-100 text-blue-800"},[ce.EN_ROUTE_TO_PICKUP]:{text:"กำลังไปรับ",classes:"bg-orange-100 text-orange-800"},[ce.ARRIVED_AT_PICKUP]:{text:"ถึงจุดรับแล้ว",classes:"bg-purple-100 text-purple-800"},[ce.IN_PROGRESS]:{text:"กำลังเดินทาง",classes:"bg-green-100 text-green-800"},[ce.COMPLETED]:{text:"เสร็จสิ้น",classes:"bg-gray-200 text-gray-800"},[ce.CANCELLED]:{text:"ยกเลิก",classes:"bg-red-100 text-red-800"}},Ia=({status:a})=>{const l=VN[a]||{text:"ไม่ทราบสถานะ",classes:"bg-gray-100 text-gray-800"};return t.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full ${l.classes}`,children:l.text})},_n=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"}),t.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"})]}),zN=[{id:"RIDE-105",patientName:"กานดา สุขใจ",destination:"โรงพยาบาลศิริราช",appointmentTime:"2024-09-20T10:00:00Z",status:ce.PENDING,pickupLocation:""},{id:"RIDE-104",patientName:"วิชัย มีชัย",destination:"โรงพยาบาลรามาธิบดี",appointmentTime:"2024-09-20T13:30:00Z",status:ce.ASSIGNED,pickupLocation:""},{id:"RIDE-103",patientName:"มานี ใจดี",destination:"โรงพยาบาลจุฬาลงกรณ์",appointmentTime:"2024-09-19T09:00:00Z",status:ce.COMPLETED,pickupLocation:""},{id:"RIDE-102",patientName:"สมศรี รักสงบ",destination:"โรงพยาบาลบำรุงราษฎร์",appointmentTime:"2024-09-19T11:00:00Z",status:ce.COMPLETED,pickupLocation:""},{id:"RIDE-101",patientName:"อรุณ รุ่งเรือง",destination:"โรงพยาบาลกรุงเทพ",appointmentTime:"2024-09-18T14:00:00Z",status:ce.CANCELLED,pickupLocation:""}],mx=({setActiveView:a})=>t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-[var(--text-primary)]",children:"สวัสดี, Community User!"}),t.jsx("p",{className:"mt-2 text-lg text-[var(--text-secondary)]",children:"ภาพรวมและทางลัดสำหรับจัดการผู้ป่วยและการเดินทางของคุณ"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(ft,{title:"ผู้ป่วยในดูแล",value:"12",icon:Kt,variant:"info"}),t.jsx(ft,{title:"คำขอที่รอดำเนินการ",value:"3",icon:mp,variant:"warning",onClick:()=>a("rides",{filter:ce.PENDING})}),t.jsx(ft,{title:"เดินทางสำเร็จ (เดือนนี้)",value:"28",icon:Bu,variant:"success"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"ทางลัด"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("button",{onClick:()=>a("register_patient"),className:"group bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-shadow duration-300 border border-[var(--border-color)] flex items-center gap-5 text-left hover:border-blue-300",children:[t.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-[var(--wecare-blue-light)] flex items-center justify-center",children:t.jsx(_n,{className:"w-7 h-7 text-[var(--wecare-blue)]"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)] group-hover:text-[var(--wecare-blue)] transition-colors",children:"ลงทะเบียนผู้ป่วยใหม่"}),t.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-1",children:"เพิ่มข้อมูลผู้ป่วยในความดูแลของคุณเข้าระบบ"})]})]}),t.jsxs("button",{onClick:()=>a("request_ride"),className:"group bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-shadow duration-300 border border-[var(--border-color)] flex items-center gap-5 text-left hover:border-green-300",children:[t.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Rt,{className:"w-7 h-7 text-green-700"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)] group-hover:text-green-700 transition-colors",children:"ร้องขอการเดินทางใหม่"}),t.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-1",children:"สร้างคำขอเดินทางสำหรับผู้ป่วยที่มีนัดหมาย"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"กิจกรรมล่าสุด"}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-[var(--border-color)]",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-[var(--text-secondary)]",children:[t.jsx("thead",{className:"text-xs text-[var(--text-primary)] uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"ชื่อผู้ป่วย"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"ปลายทาง"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"วันที่นัดหมาย"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"สถานะ"})]})}),t.jsx("tbody",{className:"divide-y divide-[var(--border-color)]",children:zN.map(l=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-[var(--text-primary)] whitespace-nowrap",children:l.patientName}),t.jsx("td",{className:"px-6 py-4",children:l.destination}),t.jsx("td",{className:"px-6 py-4",children:Is(l.appointmentTime)}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(Ia,{status:l.status})})]},l.id))})]})})})]})]}),jl=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"11",cy:"11",r:"8"}),t.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Cr=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Gt=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"3 6 5 6 21 6"}),t.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),t.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),t.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Zt=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"m15 18-6-6 6-6"})}),qN=[{id:"PAT-001",fullName:"สมชาย ใจดี",age:72,keyInfo:"โรคเบาหวาน, ความดันสูง",registeredDate:"2023-01-15T10:00:00Z",registeredBy:"Community A",title:"นาย",gender:"ชาย",nationalId:"1234567890123",dob:"1952-01-15",patientTypes:["ผู้สูงอายุ","ผู้ป่วยภาวะพึงพิง"],bloodType:"A",rhFactor:"Rh+",healthCoverage:"สิทธิบัตรทอง (UC)",chronicDiseases:["เบาหวาน","ความดันสูง"],allergies:["ไม่มี"],contactPhone:"081-111-2222",idCardAddress:{houseNumber:"123",village:"หมู่ 1 บ้านหนองตุ้ม",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"123",village:"หมู่ 1 บ้านหนองตุ้ม",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"ใกล้ตลาด",latitude:"19.9213",longitude:"99.2131",attachments:[]},{id:"PAT-002",fullName:"สมหญิง มีสุข",age:68,keyInfo:"ผู้ป่วยติดเตียง",registeredDate:"2023-02-20T11:00:00Z",registeredBy:"Community B",title:"นาง",gender:"หญิง",nationalId:"2345678901234",dob:"1956-02-20",patientTypes:["ผู้ป่วยติดเตียง"],bloodType:"B",rhFactor:"Rh+",healthCoverage:"ประกันสังคม",chronicDiseases:["ผู้ป่วยติดเตียง"],allergies:["เพนนิซิลลิน"],contactPhone:"082-222-3333",idCardAddress:{houseNumber:"456",village:"หมู่ 2 ป่าบง",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"456",village:"หมู่ 2 ป่าบง",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"",latitude:"19.9250",longitude:"99.2100",attachments:[],caregiverName:"สมศักดิ์ มีสุข",caregiverPhone:"089-999-9999"},{id:"PAT-003",fullName:"อาทิตย์ แจ่มใส",age:80,keyInfo:"โรคหัวใจ",registeredDate:"2023-03-10T14:00:00Z",registeredBy:"Community A",title:"นาย",gender:"ชาย",nationalId:"3456789012345",dob:"1944-03-10",patientTypes:["ผู้สูงอายุ"],bloodType:"O",rhFactor:"Rh+",healthCoverage:"ข้าราชการ",chronicDiseases:["โรคหัวใจ"],allergies:["ไม่มี"],contactPhone:"083-333-4444",idCardAddress:{houseNumber:"789",village:"หมู่ 3 เต๋าดิน, เวียงสุทโธ",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"789",village:"หมู่ 3 เต๋าดิน, เวียงสุทโธ",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"",latitude:"19.9111",longitude:"99.2222",attachments:[]},{id:"PAT-004",fullName:"จันทรา งามวงศ์วาน",age:75,keyInfo:"ต้องใช้วีลแชร์",registeredDate:"2023-04-05T16:00:00Z",registeredBy:"Community C",title:"นาง",gender:"หญิง",nationalId:"4567890123456",dob:"1949-04-05",patientTypes:["ผู้สูงอายุ","ผู้พิการ"],bloodType:"AB",rhFactor:"Rh-",healthCoverage:"สิทธิบัตรทอง (UC)",chronicDiseases:["ข้อเข่าเสื่อม"],allergies:["ซัลฟา"],contactPhone:"084-444-5555",idCardAddress:{houseNumber:"101",village:"หมู่ 4 สวนดอก",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"101",village:"หมู่ 4 สวนดอก",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"",latitude:"19.9333",longitude:"99.2000",attachments:[]},{id:"PAT-005",fullName:"มานี รักเรียน",age:65,keyInfo:"ฟอกไต",registeredDate:"2023-05-21T09:00:00Z",registeredBy:"Community B",title:"นางสาว",gender:"หญิง",nationalId:"5678901234567",dob:"1959-05-21",patientTypes:["ผู้ป่วยโรคไต"],bloodType:"O",rhFactor:"Rh+",healthCoverage:"สิทธิบัตรทอง (UC)",chronicDiseases:["โรคไตเรื้อรัง"],allergies:["ไม่มี"],contactPhone:"085-555-6666",idCardAddress:{houseNumber:"222",village:"หมู่ 5 ต้นหนุน",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"222",village:"หมู่ 5 ต้นหนุน",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"",latitude:"19.9000",longitude:"99.2333",attachments:[]},{id:"PAT-006",fullName:"ปิติ ชูใจ",age:78,keyInfo:"ไม่มีโรคประจำตัว",registeredDate:"2023-06-11T13:00:00Z",registeredBy:"Community A",title:"นาย",gender:"ชาย",nationalId:"6789012345678",dob:"1946-06-11",patientTypes:["ผู้สูงอายุ"],bloodType:"A",rhFactor:"Rh+",healthCoverage:"ชำระเงินเอง",chronicDiseases:[],allergies:["ไม่มี"],contactPhone:"086-666-7777",idCardAddress:{houseNumber:"333",village:"หมู่ 6 สันทรายคองน้อย",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"333",village:"หมู่ 6 สันทรายคองน้อย",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"",latitude:"19.9444",longitude:"99.2111",attachments:[]}],eu=5,hx=({setActiveView:a})=>{const[l]=j.useState(qN),[s,r]=j.useState(""),[o,u]=j.useState(1),h=j.useMemo(()=>l.filter(b=>b.fullName.toLowerCase().includes(s.toLowerCase())),[l,s]),p=Math.ceil(h.length/eu),y=h.slice((o-1)*eu,o*eu),x=()=>{o<p&&u(o+1)},v=()=>{o>1&&u(o-1)};return l.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-[60vh]",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-300"}),t.jsx("h2",{className:"mt-6 text-2xl font-semibold text-gray-700",children:"ยังไม่มีผู้ป่วยในความดูแลของคุณ"}),t.jsx("p",{className:"mt-2 text-gray-500",children:"เริ่มต้นด้วยการเพิ่มข้อมูลผู้ป่วยคนแรกของคุณ"}),t.jsxs("button",{onClick:()=>a("register_patient"),className:"mt-6 flex items-center justify-center px-5 py-3 font-medium text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(_n,{className:"w-5 h-5 mr-2"}),"ลงทะเบียนผู้ป่วยคนแรก"]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-[var(--text-primary)]",children:"จัดการผู้ป่วย"}),t.jsx("p",{className:"mt-1 text-[var(--text-secondary)]",children:"ดู แก้ไข และจัดการข้อมูลผู้ป่วยในความดูแลของคุณ"})]}),t.jsxs("button",{onClick:()=>a("register_patient"),className:"flex items-center justify-center px-5 py-2.5 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-700 transition-colors",children:[t.jsx(_n,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"ลงทะเบียนผู้ป่วยใหม่"})]})]}),t.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-[var(--border-color)]",children:t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx(jl,{className:"w-5 h-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"ค้นหาด้วยชื่อ...",value:s,onChange:b=>r(b.target.value),className:"w-full md:w-1/3 pl-10"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-[var(--border-color)]",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-[var(--text-secondary)]",children:[t.jsx("thead",{className:"text-xs text-[var(--text-primary)] uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"ชื่อ-นามสกุล"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"อายุ"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"ข้อมูลสำคัญ"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"วันที่ลงทะเบียน"}),t.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{className:"divide-y divide-[var(--border-color)]",children:y.map(b=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-[var(--text-primary)] whitespace-nowrap",children:b.fullName}),t.jsx("td",{className:"px-6 py-4",children:b.age}),t.jsx("td",{className:"px-6 py-4 max-w-xs truncate",children:b.keyInfo}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Is(b.registeredDate)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("button",{onClick:()=>a("patient_detail",{patientId:b.id}),className:"p-2 rounded-full hover:bg-blue-100 text-blue-600",title:"ดูรายละเอียด",children:t.jsx(Cr,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 rounded-full hover:bg-red-100 text-red-600",title:"ลบ",children:t.jsx(Gt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>a("request_ride",{patientId:b.id}),className:"p-2 rounded-full hover:bg-green-100 text-green-600",title:"ร้องขอการเดินทาง",children:t.jsx(Rt,{className:"w-5 h-5"})})]})})]},b.id))})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-[var(--text-secondary)]",children:["หน้า ",o," จาก ",p]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:v,disabled:o===1,className:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Zt,{className:"w-4 h-4"})}),t.jsx("button",{onClick:x,disabled:o===p,className:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Ht,{className:"w-4 h-4"})})]})]})]})},Dn=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),t.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),Vu=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),as=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),t.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),xp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("polyline",{points:"12 6 12 12 16 14"})]}),gp=({isOpen:a,onClose:l,ride:s})=>!a||!s?null:t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"ride-details-modal-title",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col animate-scale-in",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsxs("h2",{id:"ride-details-modal-title",className:"text-xl font-bold text-gray-800",children:["รายละเอียดการเดินทาง: ",t.jsx("span",{className:"font-mono",children:s.id})]}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600","aria-label":"Close",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[t.jsx("div",{className:"text-center",children:t.jsx(Ia,{status:s.status})}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx(on,{className:"w-5 h-5 mr-3 mt-1 text-[#005A9C] flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"ผู้ป่วย"}),t.jsx("p",{className:"font-semibold text-gray-800",children:s.patientName})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx(as,{className:"w-5 h-5 mr-3 mt-1 text-red-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"ปลายทาง"}),t.jsx("p",{className:"font-semibold text-gray-800",children:s.destination})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx(xp,{className:"w-5 h-5 mr-3 mt-1 text-gray-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"เวลานัดหมาย"}),t.jsx("p",{className:"font-semibold text-gray-800",children:un(s.appointmentTime)})]})]})]}),t.jsxs("div",{className:"border-t pt-4 space-y-3",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ou,{className:"w-5 h-5 mr-3 mt-1 text-gray-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"เบอร์ติดต่อระหว่างเดินทาง"}),t.jsx("p",{className:"font-semibold text-gray-800",children:s.contactPhone||"ไม่มี"})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx(Dn,{className:"w-5 h-5 mr-3 mt-1 text-gray-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"ความต้องการพิเศษ"}),t.jsx("p",{className:"font-semibold text-gray-800",children:s.specialNeeds||"ไม่มี"})]})]})]}),(s.status==="ASSIGNED"||s.status==="IN_PROGRESS"||s.status==="COMPLETED")&&s.driverInfo&&t.jsxs("div",{className:"border-t pt-4",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-3 flex items-center",children:[t.jsx(hr,{className:"w-5 h-5 mr-2 text-[#005A9C]"}),"ข้อมูลคนขับ"]}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold text-gray-600",children:"ชื่อ:"})," ",s.driverInfo.fullName]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold text-gray-600",children:"เบอร์โทร:"})," ",s.driverInfo.phone]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold text-gray-600",children:"รถ:"})," ",s.driverInfo.vehicleModel," (",s.driverInfo.licensePlate,")"]})]})]})]}),t.jsx("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t",children:t.jsx("button",{onClick:l,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ปิด"})})]})}),xr=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GN=({count:a=5,rating:l,onRatingChange:s})=>{const[r,o]=j.useState(0),u=Array.from({length:a},(h,p)=>p+1);return t.jsx("div",{className:"flex items-center space-x-1",children:u.map(h=>t.jsx("button",{type:"button",onClick:()=>s(h),onMouseEnter:()=>o(h),onMouseLeave:()=>o(0),className:"focus:outline-none","aria-label":`Rate ${h} star`,children:t.jsx(xr,{className:`w-8 h-8 transition-colors duration-200 ${(r||l)>=h?"text-yellow-400":"text-gray-300"}`})},h))})},HN=["สุภาพ","ตรงต่อเวลา","ขับรถดี","ช่วยเหลือดี","รถสะอาด"],FN=({isOpen:a,onClose:l,onSubmit:s,ride:r})=>{const[o,u]=j.useState(0),[h,p]=j.useState([]),[y,x]=j.useState("");if(j.useEffect(()=>{a&&(u(0),p([]),x(""))},[a]),!a||!r)return null;const v=w=>{p(C=>C.includes(w)?C.filter(A=>A!==w):[...C,w])},b=w=>{w.preventDefault(),o>0?s(r.id,{rating:o,tags:h,comment:y}):alert("กรุณาให้คะแนนอย่างน้อย 1 ดาว")};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-scale-in",children:t.jsxs("form",{onSubmit:b,children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ให้คะแนนการเดินทาง"}),t.jsx("button",{type:"button",onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-600",children:"ให้คะแนนการบริการสำหรับ"}),t.jsx("p",{className:"font-semibold text-lg text-gray-800",children:r.patientName}),t.jsxs("p",{className:"text-sm text-gray-500",children:["คนขับ: ",r.driverName]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(GN,{rating:o,onRatingChange:u})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-700 mb-2",children:"คำชมเชย (เลือกได้หลายข้อ)"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:HN.map(w=>t.jsx("button",{type:"button",onClick:()=>v(w),className:`px-3 py-1.5 text-sm font-medium rounded-full border-2 transition-colors ${h.includes(w)?"bg-blue-500 border-blue-500 text-white":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:w},w))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"comment",className:"block font-semibold text-gray-700 mb-1",children:"ความคิดเห็นเพิ่มเติม (ไม่บังคับ)"}),t.jsx("textarea",{id:"comment",value:y,onChange:w=>x(w.target.value),rows:3,className:"w-full",placeholder:"เล่าประสบการณ์ของคุณ..."})]})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",disabled:o===0,className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"ส่งคะแนน"})]})]})})})},dn=({message:a})=>a?t.jsxs("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 flex items-center w-full max-w-xs p-4 space-x-4 text-gray-800 bg-white divide-x divide-gray-200 rounded-lg shadow-lg z-50 animate-fade-in-up",role:"alert",children:[t.jsx("div",{className:"text-lg font-bold text-green-600",children:a.includes("✅")||a.includes("🎉")||a.includes("✨")?"สำเร็จ":"แจ้งเตือน"}),t.jsx("div",{className:"pl-4 text-sm font-normal",children:a})]}):null,YN=({isOpen:a,onClose:l,title:s,children:r,className:o,showCloseButton:u=!0})=>(j.useEffect(()=>{const h=p=>{p.key==="Escape"&&l()};return a&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow=""}},[a,l]),a?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:l}),t.jsxs("div",{className:Xt("relative z-50 bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-4",o),children:[(s||u)&&t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s&&t.jsx("h2",{className:"text-lg font-semibold leading-none tracking-tight",children:s}),u&&t.jsx(qt,{onClick:l,variant:"ghost",size:"icon","aria-label":"ปิดหน้าต่าง",children:"✕"})]}),r]})]}):null),$N=(a,l)=>{const s=me(a.appointmentTime),r=s.add(1,"hour"),o=me(l.appointmentTime),u=o.add(1,"hour");return s.isBefore(u)&&r.isAfter(o)},KN=a=>a.status!==Be.INACTIVE&&a.status!==Be.OFFLINE,zu=({isOpen:a,onClose:l,onAssign:s,ride:r,allDrivers:o,allRides:u})=>{const[h,p]=j.useState(null);j.useEffect(()=>{a&&p(null)},[a]);const y=j.useMemo(()=>r?o.map(v=>{if(!KN(v))return{driver:v,isAvailable:!1,reason:"ไม่อยู่ในเวร"};const w=u.find(C=>{var A;return((A=C.driverInfo)==null?void 0:A.id)===v.id&&C.id!==r.id&&C.status!==ce.COMPLETED&&C.status!==ce.CANCELLED&&$N(r,C)});return w?{driver:v,isAvailable:!1,reason:`มีงานซ้อน (${me(w.appointmentTime).format("HH:mm")})`}:{driver:v,isAvailable:!0,reason:""}}).sort((v,b)=>v.isAvailable&&!b.isAvailable?-1:!v.isAvailable&&b.isAvailable?1:v.driver.fullName.localeCompare(b.driver.fullName)):[],[o,u,r]);if(!a||!r)return null;const x=()=>{h&&s(r.id,h)};return t.jsx(YN,{isOpen:a,onClose:l,title:`จ่ายงานสำหรับการเดินทาง ID: ${r.id}`,children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"ข้อมูลสรุป"}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold text-gray-600",children:"ผู้ป่วย:"})," ",r.patientName]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold text-gray-600",children:"เวลานัดหมาย:"})," ",un(r.appointmentTime)]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx(as,{className:"w-4 h-4 mr-2 mt-0.5 text-green-500 flex-shrink-0"}),t.jsx("span",{className:"font-semibold text-gray-600",children:"รับ:"})," ",r.pickupLocation]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx(as,{className:"w-4 h-4 mr-2 mt-0.5 text-red-500 flex-shrink-0"}),t.jsx("span",{className:"font-semibold text-gray-600",children:"ส่ง:"})," ",r.destination]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"เลือกคนขับที่พร้อมให้บริการ"}),t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 border-t border-b py-2",children:y.map(({driver:v,isAvailable:b,reason:w})=>t.jsxs("label",{htmlFor:v.id,className:`flex items-center p-3 border rounded-lg transition-all ${b?"cursor-pointer":"bg-gray-100 text-gray-400"} ${h===v.id?"bg-blue-50 border-blue-400 ring-2 ring-blue-200":b?"border-gray-300 hover:bg-gray-50":"border-gray-200"}`,children:[t.jsx("input",{type:"radio",id:v.id,name:"driverSelection",value:v.id,checked:h===v.id,onChange:C=>p(C.target.value),disabled:!b,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 disabled:bg-gray-200"}),t.jsxs("div",{className:"ml-3 flex-grow flex items-center",children:[t.jsx("img",{src:v.profileImageUrl,alt:v.fullName,className:"w-8 h-8 rounded-full mr-3"}),t.jsx("span",{className:`font-semibold ${b?"text-gray-800":"text-gray-500"}`,children:v.fullName})]}),t.jsx("span",{className:`text-xs font-medium ${b?"text-green-600":"text-red-600"}`,children:b?"ว่าง":w})]},v.id))})]}),t.jsxs("div",{className:"flex justify-end items-center gap-3",children:[t.jsx(qt,{onClick:l,variant:"outline",size:"sm",children:"ยกเลิก"}),t.jsx(qt,{onClick:x,disabled:!h,size:"sm",children:"ยืนยันการจ่ายงาน"})]})]})})},pp=it.forwardRef(({className:a,children:l,...s},r)=>t.jsx("select",{ref:r,className:Xt("flex h-10 w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:l}));pp.displayName="Select";const yp=it.forwardRef(({className:a,...l},s)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:s,className:Xt("w-full caption-bottom text-sm",a),...l})}));yp.displayName="Table";const vp=it.forwardRef(({className:a,...l},s)=>t.jsx("thead",{ref:s,className:Xt("[&_tr]:border-b",a),...l}));vp.displayName="TableHeader";const bp=it.forwardRef(({className:a,...l},s)=>t.jsx("tbody",{ref:s,className:Xt("[&_tr:last-child]:border-0",a),...l}));bp.displayName="TableBody";const pu=it.forwardRef(({className:a,...l},s)=>t.jsx("tr",{ref:s,className:Xt("h-10 border-b transition-colors hover:bg-neutral-50/50 data-[state=selected]:bg-neutral-100",a),...l}));pu.displayName="TableRow";const Es=it.forwardRef(({className:a,...l},s)=>t.jsx("th",{ref:s,className:Xt("h-12 px-6 py-3 text-left align-middle font-medium text-neutral-600 bg-gray-50/75",a),...l}));Es.displayName="TableHead";const As=it.forwardRef(({className:a,...l},s)=>t.jsx("td",{ref:s,className:Xt("px-6 py-3 align-middle",a),...l}));As.displayName="TableCell";const JN=it.forwardRef(({className:a,...l},s)=>t.jsx("caption",{ref:s,className:Xt("mt-4 text-sm text-neutral-500",a),...l}));JN.displayName="TableCaption";const XN=({currentPage:a,totalPages:l,onPageChange:s,className:r})=>{const o=()=>{a>1&&s(a-1)},u=()=>{a<l&&s(a+1)};return t.jsxs("div",{className:Xt("flex items-center justify-between",r),children:[t.jsxs("p",{className:"text-sm text-neutral-700",children:["หน้า ",t.jsx("span",{className:"font-medium",children:a})," จาก"," ",t.jsx("span",{className:"font-medium",children:Math.max(l,1)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(qt,{onClick:o,disabled:a===1,variant:"outline",size:"sm",children:"ก่อนหน้า"}),t.jsx(qt,{onClick:u,disabled:a===l||l===0,variant:"outline",size:"sm",children:"ถัดไป"})]})]})},tu=5,ZN=({setActiveView:a,initialFilter:l})=>{const[s,r]=j.useState([]),[o,u]=j.useState(""),[h,p]=j.useState(l||"All"),[y,x]=j.useState(1),[v,b]=j.useState(!1),[w,C]=j.useState(null),[A,_]=j.useState(!1),[M,k]=j.useState(null),[I,V]=j.useState(null),[B,L]=j.useState(!1),[te,W]=j.useState(null),[z,H]=j.useState([]),[Z,U]=j.useState(!0),ae=Q=>{V(Q),setTimeout(()=>{V(null)},3e3)},$=Q=>{C(Q),b(!0)},P=Q=>{k(Q),_(!0)},E=async()=>{U(!0);try{const ie=(await Aa.getRides()||[]).map(re=>({id:re.id,patientName:re.patient_name||re.patientName||"",destination:re.destination||"",appointmentTime:re.appointment_time||re.appointmentTime||new Date().toISOString(),status:re.status||ce.PENDING,driverName:re.driver_name||re.driverName||void 0,pickupLocation:re.pickup_location||re.pickupLocation||""}));r(ie)}catch{V("ไม่สามารถดึงข้อมูลการเดินทางได้"),setTimeout(()=>V(null),3e3)}finally{U(!1)}};j.useEffect(()=>{E()},[]);const S=async Q=>{W(Q),L(!0);try{const re=(await an.getAvailableDrivers()||[]).map(de=>({id:de.id,fullName:de.full_name||de.fullName||"Unknown",phone:de.phone||"",licensePlate:de.license_plate||de.licensePlate||"",status:de.status||"AVAILABLE",profileImageUrl:de.profile_image_url||de.profileImageUrl||void 0,email:de.email||"",address:de.address||"",vehicleBrand:de.brand||de.vehicleBrand||"",vehicleModel:de.model||de.vehicleModel||"",vehicleColor:de.vehicleColor||"",tripsThisMonth:de.tripsThisMonth||0,vehicleType:de.type||de.vehicleType||"",totalTrips:de.totalTrips||0,avgReviewScore:de.avg_review_score||de.avgReviewScore||0}));H(re)}catch{V("ไม่สามารถดึงรายชื่อคนขับที่ว่างได้"),setTimeout(()=>V(null),3e3)}},q=async(Q,ie)=>{try{await Aa.updateRideStatus(Q,"ASSIGNED",ie);const re=z.find(de=>de.id===ie);r(de=>de.map(xe=>xe.id===Q?{...xe,status:ce.ASSIGNED,driverName:re?re.fullName:xe.driverName}:xe)),V("จ่ายงานให้คนขับสำเร็จ")}catch{V("จ่ายงานล้มเหลว กรุณาลองใหม่")}finally{setTimeout(()=>V(null),3e3),L(!1),W(null)}},X=(Q,ie)=>{r(re=>re.map(de=>de.id===Q?{...de,rating:ie.rating,reviewTags:ie.tags,reviewComment:ie.comment}:de)),_(!1),ae("ขอบคุณสำหรับความคิดเห็น!")};j.useEffect(()=>{l&&p(l)},[l]);const oe=j.useMemo(()=>s.filter(Q=>{const ie=o.toLowerCase(),re=Q.patientName.toLowerCase().includes(ie)||Q.id.toLowerCase().includes(ie),de=h==="All"||Q.status===h;return re&&de}),[s,o,h]),D=Math.ceil(oe.length/tu),ee=oe.slice((y-1)*tu,y*tu);return Z?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-[var(--text-primary)]",children:"จัดการการเดินทาง"}),t.jsx(qt,{onClick:E,variant:"secondary",size:"sm",children:"รีเฟรช"})]}),t.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm border",children:"กำลังโหลดข้อมูลการเดินทาง..."})]}):s.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-[60vh]",children:[t.jsx(Rt,{className:"w-24 h-24 text-gray-300"}),t.jsx("h2",{className:"mt-6 text-2xl font-semibold text-gray-700",children:"คุณยังไม่มีรายการเดินทาง"}),t.jsx("p",{className:"mt-2 text-gray-500",children:"เริ่มต้นด้วยการสร้างคำขอการเดินทางครั้งแรกของคุณ"}),t.jsxs("button",{onClick:()=>a("request_ride"),className:"mt-6 flex items-center justify-center px-5 py-3 font-medium text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),"ร้องขอการเดินทางแรกของคุณ"]}),t.jsx("div",{className:"mt-4",children:t.jsx(qt,{onClick:E,variant:"secondary",size:"sm",children:"รีเฟรช"})})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-[var(--text-primary)]",children:"จัดการการเดินทาง"}),t.jsx("p",{className:"mt-1 text-[var(--text-secondary)]",children:"ตรวจสอบสถานะและรายละเอียดการเดินทางทั้งหมด"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{onClick:E,variant:"secondary",size:"sm",title:"รีเฟรชข้อมูล",children:"รีเฟรช"}),t.jsxs("button",{onClick:()=>a("request_ride"),className:"flex items-center justify-center px-5 py-2.5 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"ร้องขอการเดินทางใหม่"})]})]})]}),t.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-[var(--border-color)]",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"relative w-full md:w-auto flex-grow",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx(jl,{className:"w-5 h-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"ค้นหาด้วยชื่อผู้ป่วย หรือ Ride ID...",value:o,onChange:Q=>u(Q.target.value),className:"w-full md:w-80 pl-10"})]}),t.jsxs("div",{className:"relative w-full md:w-auto",children:[t.jsx("label",{htmlFor:"statusFilter",className:"sr-only",children:"กรองตามสถานะ"}),t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:t.jsx(Vu,{className:"w-5 h-5 text-gray-400"})}),t.jsxs(pp,{id:"statusFilter",value:h,onChange:Q=>p(Q.target.value),className:"w-full md:w-56 pl-10","aria-label":"กรองตามสถานะ",children:[t.jsx("option",{value:"All",children:"สถานะทั้งหมด"}),t.jsx("option",{value:ce.PENDING,children:"รอดำเนินการ"}),t.jsx("option",{value:ce.ASSIGNED,children:"อนุมัติแล้ว"}),t.jsx("option",{value:ce.IN_PROGRESS,children:"กำลังเดินทาง"}),t.jsx("option",{value:ce.COMPLETED,children:"เสร็จสิ้น"}),t.jsx("option",{value:ce.CANCELLED,children:"ยกเลิก"})]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-[var(--border-color)]",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(yp,{className:"text-left text-[var(--text-secondary)]",children:[t.jsx(vp,{children:t.jsxs(pu,{children:[t.jsx(Es,{children:"ชื่อผู้ป่วย"}),t.jsx(Es,{children:"ปลายทาง"}),t.jsx(Es,{children:"วัน-เวลานัดหมาย"}),t.jsx(Es,{children:"สถานะ"}),t.jsx(Es,{children:"คนขับ"}),t.jsx(Es,{className:"text-center",children:"การดำเนินการ"})]})}),t.jsx(bp,{children:ee.map(Q=>t.jsxs(pu,{children:[t.jsx(As,{className:"font-medium text-[var(--text-primary)] whitespace-nowrap",children:Q.patientName}),t.jsx(As,{className:"whitespace-nowrap",children:Q.destination}),t.jsx(As,{className:"whitespace-nowrap",children:un(Q.appointmentTime)}),t.jsx(As,{children:t.jsx(Ia,{status:Q.status})}),t.jsx(As,{className:"whitespace-nowrap",children:Q.driverName||"N/A"}),t.jsx(As,{children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("button",{onClick:()=>$(Q),className:"p-2 rounded-full hover:bg-blue-100 text-blue-600",title:"ดูรายละเอียด","aria-label":`ดูรายละเอียดของ ${Q.patientName}`,children:t.jsx(Cr,{className:"w-5 h-5"})}),Q.status===ce.PENDING&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"p-2 rounded-full hover:bg-red-100 text-red-600",title:"ยกเลิก","aria-label":`ยกเลิกรายการของ ${Q.patientName}`,children:t.jsx(Gt,{className:"w-5 h-5"})}),t.jsx(qt,{onClick:()=>S(Q),size:"sm",title:"จ่ายงานให้คนขับ","aria-label":`จ่ายงานให้คนขับสำหรับ ${Q.patientName}`,children:"จ่ายงาน"})]}),Q.status===ce.COMPLETED&&t.jsx("button",{onClick:()=>P(Q),disabled:!!Q.rating,className:"p-2 rounded-full disabled:text-gray-400 disabled:cursor-not-allowed disabled:bg-transparent enabled:hover:bg-yellow-100 enabled:text-yellow-600 transition-colors",title:Q.rating?`ให้คะแนนแล้ว: ${Q.rating} ดาว`:"ให้คะแนนการเดินทาง",children:Q.rating?t.jsxs("div",{className:"flex items-center text-yellow-500",children:[t.jsx(xr,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-bold ml-1",children:Q.rating})]}):t.jsx(xr,{className:"w-5 h-5 fill-none"})})]})})]},Q.id))})]})})}),t.jsx("div",{className:"mt-4",children:t.jsx(XN,{currentPage:y,totalPages:D,onPageChange:x})}),t.jsx(gp,{isOpen:v,onClose:()=>b(!1),ride:w}),t.jsx(FN,{isOpen:A,onClose:()=>_(!1),ride:M,onSubmit:X}),t.jsx(dn,{message:I}),te&&t.jsx(zu,{isOpen:B,onClose:()=>{L(!1),W(null)},onAssign:q,ride:te,allDrivers:z,allRides:s})]})},qu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10a10 10 0 0 0-10-10C6.477 2 2 6.477 2 12s4.477 10 10 10Z"}),t.jsx("path",{d:"M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),t.jsx("path",{d:"M10 9v6a2 2 0 0 0 2 2h2"}),t.jsx("path",{d:"M10 15h4"})]}),QN=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),t.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),xx=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polygon",{points:"3 11 22 2 13 21 11 13 3 11"})}),WN={[ce.PENDING]:{text:"รอดำเนินการ",bg:"bg-yellow-100",text_color:"text-yellow-800"},[ce.ASSIGNED]:{text:"ได้รับมอบหมาย",bg:"bg-blue-100",text_color:"text-blue-800"},[ce.EN_ROUTE_TO_PICKUP]:{text:"กำลังไปรับ",bg:"bg-orange-100",text_color:"text-orange-800"},[ce.ARRIVED_AT_PICKUP]:{text:"ถึงจุดรับแล้ว",bg:"bg-purple-100",text_color:"text-purple-800"},[ce.IN_PROGRESS]:{text:"กำลังเดินทาง",bg:"bg-green-100",text_color:"text-green-800"},[ce.COMPLETED]:{text:"เสร็จสิ้น",bg:"bg-gray-200",text_color:"text-gray-800"},[ce.CANCELLED]:{text:"ยกเลิก",bg:"bg-red-100",text_color:"text-red-800"}},e1=a=>{switch(a){case ce.ASSIGNED:return{text:"เริ่มเดินทาง (ไปรับผู้ป่วย)",nextStatus:ce.EN_ROUTE_TO_PICKUP,className:"bg-[#28A745] hover:bg-green-700"};case ce.EN_ROUTE_TO_PICKUP:return{text:"ถึงจุดรับแล้ว",nextStatus:ce.ARRIVED_AT_PICKUP,className:"bg-[#FD7E14] hover:bg-orange-600"};case ce.ARRIVED_AT_PICKUP:return{text:"รับผู้ป่วยแล้ว (มุ่งหน้าสู่ที่หมาย)",nextStatus:ce.IN_PROGRESS,className:"bg-[#6F42C1] hover:bg-purple-800"};case ce.IN_PROGRESS:return{text:"จบการเดินทาง",nextStatus:ce.COMPLETED,className:"bg-[#007BFF] hover:bg-blue-700"};default:return null}},t1=({ride:a,onUpdateStatus:l,isActionable:s=!0})=>{const{id:r,status:o,patientName:u,patientPhone:h,pickupLocation:p,destination:y,appointmentTime:x,village:v,specialNeeds:b,landmark:w,caregiverPhone:C}=a,A=WN[o],_=e1(o),M=w||C,k=s&&(o===ce.ASSIGNED||o===ce.EN_ROUTE_TO_PICKUP),I=s&&(o===ce.ARRIVED_AT_PICKUP||o===ce.IN_PROGRESS),V=k?"bg-[var(--wecare-blue)] hover:bg-blue-800":"bg-gray-300 cursor-not-allowed",B=I?"bg-[var(--wecare-green)] hover:bg-green-700":"bg-gray-300 cursor-not-allowed",L=z=>{const H=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(z)}`;window.open(H,"_blank")},te=()=>{_&&s&&l(r,_.nextStatus)},W=z=>{if(!z||z.length===0)return null;const H=z.some(Z=>Z.toLowerCase().includes("วีลแชร์")||Z.toLowerCase().includes("wheelchair"));return t.jsx("div",{className:"flex items-center space-x-2",children:H&&t.jsx("span",{title:"ต้องการวีลแชร์",children:t.jsx(qu,{className:"w-5 h-5 text-blue-600"})})})};return t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transform transition-all hover:shadow-xl border border-gray-200",children:[t.jsxs("div",{className:`px-4 py-2 ${A.bg} flex justify-between items-center`,children:[t.jsx("span",{className:`text-sm font-semibold ${A.text_color}`,children:A.text}),t.jsxs("div",{className:"flex items-center gap-3",children:[M&&t.jsx("span",{title:`ข้อมูลเพิ่มเติม: ${w}, โทร: ${C}`,children:t.jsx(QN,{className:"w-5 h-5 text-gray-500"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:r})]})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(on,{className:"w-6 h-6 text-[#005A9C]"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 text-sm",children:"ผู้ป่วย"}),t.jsx("p",{className:"font-bold text-lg text-gray-800",children:u})]})]}),t.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:W(b)})]}),t.jsxs("div",{className:"border-t border-gray-100 pt-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(as,{className:"w-5 h-5 text-green-500 mt-1 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 text-xs",children:"สถานที่รับ"}),t.jsx("p",{className:"text-gray-700",children:p}),v&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:v})]})]}),t.jsxs("button",{onClick:()=>L(p),disabled:!k,className:`flex items-center gap-2 text-white px-3 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${V}`,children:[t.jsx(xx,{className:"w-4 h-4"}),t.jsx("span",{children:"นำทาง"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(as,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 text-xs",children:"สถานที่ส่ง"}),t.jsx("p",{className:"text-gray-700",children:y})]})]}),t.jsxs("button",{onClick:()=>L(y),disabled:!I,className:`flex items-center gap-2 text-white px-3 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ${B}`,children:[t.jsx(xx,{className:"w-4 h-4"}),t.jsx("span",{children:"นำทาง"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(xp,{className:"w-5 h-5 text-gray-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 text-xs",children:"เวลานัดหมาย"}),t.jsx("p",{className:"font-semibold text-[#005A9C]",children:un(x)})]})]})]})]}),_&&t.jsx("div",{className:"bg-gray-50 p-3",children:t.jsx("button",{onClick:te,disabled:!s,className:`w-full text-white font-bold py-3 px-4 rounded-lg transition duration-300 shadow-sm ${s?_.className:"bg-gray-400 cursor-not-allowed"}`,children:_.text})})]})},n1=a=>t.jsxs("svg",{...a,viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{opacity:"0.3",children:[t.jsx("path",{d:"M 10 160 C 50 120, 150 120, 190 160",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeDasharray:"15 10",strokeLinecap:"round"}),t.jsx("path",{d:"M 40 140 L 50 110 H 110 L 120 140 H 40 Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"4",strokeLinejoin:"round"}),t.jsx("circle",{cx:"60",cy:"145",r:"8",fill:"#FFFFFF",stroke:"currentColor",strokeWidth:"4"}),t.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"#FFFFFF",stroke:"currentColor",strokeWidth:"4"})]}),t.jsx("text",{x:"130",y:"90",fontFamily:"Arial, sans-serif",fontSize:"24",fontWeight:"bold",fill:"currentColor",transform:"rotate(-15 130 90)",children:"Z"}),t.jsx("text",{x:"145",y:"80",fontFamily:"Arial, sans-serif",fontSize:"28",fontWeight:"bold",fill:"currentColor",transform:"rotate(-15 145 80)",children:"z"}),t.jsx("text",{x:"160",y:"75",fontFamily:"Arial, sans-serif",fontSize:"20",fontWeight:"bold",fill:"currentColor",transform:"rotate(-15 160 75)",children:"z"})]}),Gu=({rides:a,onUpdateStatus:l,isActionable:s=!0})=>a.length===0?t.jsxs("div",{className:"text-center py-10 px-4 flex-grow flex flex-col justify-center items-center",children:[t.jsx(n1,{className:"w-40 h-40 text-gray-300"}),t.jsx("h3",{className:"text-xl font-bold text-[#005A9C] mt-4",children:"ไม่มีงานในรายการ"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"ไม่มีงานที่ตรงกับวันที่เลือก"})]}):t.jsx("div",{className:"p-2 space-y-3",children:a.map(r=>t.jsx(t1,{ride:r,onUpdateStatus:l,isActionable:s},r.id))}),Np=()=>t.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",role:"status","aria-label":"Loading",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-[#005A9C] border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-[#005A9C] font-semibold",children:"กำลังโหลดข้อมูล..."})]}),s1=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 3L9.5 8.5L4 11L9.5 13.5L12 19L14.5 13.5L20 11L14.5 8.5L12 3z"}),t.jsx("path",{d:"M5 3v4"}),t.jsx("path",{d:"M19 17v4"}),t.jsx("path",{d:"M3 5h4"}),t.jsx("path",{d:"M17 19h4"})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let l1,a1;function i1(){return{geminiUrl:l1,vertexUrl:a1}}function r1(a,l,s){var r,o,u;if(!(!((r=a.httpOptions)===null||r===void 0)&&r.baseUrl)){const h=i1();return a.vertexai?(o=h.vertexUrl)!==null&&o!==void 0?o:l:(u=h.geminiUrl)!==null&&u!==void 0?u:s}return a.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ka{}function ve(a,l){const s=/\{([^}]+)\}/g;return a.replace(s,(r,o)=>{if(Object.prototype.hasOwnProperty.call(l,o)){const u=l[o];return u!=null?String(u):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(a,l,s){for(let u=0;u<l.length-1;u++){const h=l[u];if(h.endsWith("[]")){const p=h.slice(0,-2);if(!(p in a))if(Array.isArray(s))a[p]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(a[p])){const y=a[p];if(Array.isArray(s))for(let x=0;x<y.length;x++){const v=y[x];m(v,l.slice(u+1),s[x])}else for(const x of y)m(x,l.slice(u+1),s)}return}else if(h.endsWith("[0]")){const p=h.slice(0,-3);p in a||(a[p]=[{}]);const y=a[p];m(y[0],l.slice(u+1),s);return}(!a[h]||typeof a[h]!="object")&&(a[h]={}),a=a[h]}const r=l[l.length-1],o=a[r];if(o!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===o)return;if(typeof o=="object"&&typeof s=="object"&&o!==null&&s!==null)Object.assign(o,s);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else a[r]=s}function f(a,l){try{if(l.length===1&&l[0]==="_self")return a;for(let s=0;s<l.length;s++){if(typeof a!="object"||a===null)return;const r=l[s];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in a){const u=a[o];return Array.isArray(u)?u.map(h=>f(h,l.slice(s+1))):void 0}else return}else a=a[r]}return a}catch(s){if(s instanceof TypeError)return;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oe(a,l){if(!l||typeof l!="string")throw new Error("model is required and must be a string");if(a.isVertexAI()){if(l.startsWith("publishers/")||l.startsWith("projects/")||l.startsWith("models/"))return l;if(l.indexOf("/")>=0){const s=l.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${l}`}else return l.startsWith("models/")||l.startsWith("tunedModels/")?l:`models/${l}`}function jp(a,l){const s=Oe(a,l);return s?s.startsWith("publishers/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/${s}`:s.startsWith("models/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/publishers/google/${s}`:s:""}function wp(a,l){return Array.isArray(l)?l.map(s=>gr(a,s)):[gr(a,l)]}function gr(a,l){if(typeof l=="object"&&l!==null)return l;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof l}`)}function o1(a,l){const s=gr(a,l);if(s.mimeType&&s.mimeType.startsWith("image/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function c1(a,l){const s=gr(a,l);if(s.mimeType&&s.mimeType.startsWith("audio/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function gx(a,l){if(l==null)throw new Error("PartUnion is required");if(typeof l=="object")return l;if(typeof l=="string")return{text:l};throw new Error(`Unsupported part type: ${typeof l}`)}function Cp(a,l){if(l==null||Array.isArray(l)&&l.length===0)throw new Error("PartListUnion is required");return Array.isArray(l)?l.map(s=>gx(a,s)):[gx(a,l)]}function yu(a){return a!=null&&typeof a=="object"&&"parts"in a&&Array.isArray(a.parts)}function px(a){return a!=null&&typeof a=="object"&&"functionCall"in a}function yx(a){return a!=null&&typeof a=="object"&&"functionResponse"in a}function Nt(a,l){if(l==null)throw new Error("ContentUnion is required");return yu(l)?l:{role:"user",parts:Cp(a,l)}}function Tp(a,l){if(!l)return[];if(a.isVertexAI()&&Array.isArray(l))return l.flatMap(s=>{const r=Nt(a,s);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(a.isVertexAI()){const s=Nt(a,l);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(l)?l.map(s=>Nt(a,s)):[Nt(a,l)]}function is(a,l){if(l==null||Array.isArray(l)&&l.length===0)throw new Error("contents are required");if(!Array.isArray(l)){if(px(l)||yx(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Nt(a,l)]}const s=[],r=[],o=yu(l[0]);for(const u of l){const h=yu(u);if(h!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(h)s.push(u);else{if(px(u)||yx(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(u)}}return o||s.push({role:"user",parts:Cp(a,r)}),s}function Sp(a,l){return l}function Ep(a,l){if(typeof l=="object")return l;if(typeof l=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:l}}};throw new Error(`Unsupported speechConfig type: ${typeof l}`)}function Tr(a,l){return l}function Sr(a,l){if(!Array.isArray(l))throw new Error("tool is required and must be an array of Tools");return l}function u1(a,l,s,r=1){const o=!l.startsWith(`${s}/`)&&l.split("/").length===r;return a.isVertexAI()?l.startsWith("projects/")?l:l.startsWith("locations/")?`projects/${a.getProject()}/${l}`:l.startsWith(`${s}/`)?`projects/${a.getProject()}/locations/${a.getLocation()}/${l}`:o?`projects/${a.getProject()}/locations/${a.getLocation()}/${s}/${l}`:l:o?`${s}/${l}`:l}function rs(a,l){if(typeof l!="string")throw new Error("name must be a string");return u1(a,l,"cachedContents")}function Ap(a,l){switch(l){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return l}}function os(a,l){if(typeof l!="string")throw new Error("fromImageBytes must be a string");return l}function d1(a){return a!=null&&typeof a=="object"&&"name"in a}function f1(a){return a!=null&&typeof a=="object"&&"video"in a}function m1(a){return a!=null&&typeof a=="object"&&"uri"in a}function Mp(a,l){var s;let r;if(d1(l)&&(r=l.name),!(m1(l)&&(r=l.uri,r===void 0))&&!(f1(l)&&(r=(s=l.video)===null||s===void 0?void 0:s.uri,r===void 0))){if(typeof l=="string"&&(r=l),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const u=r.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${r}`);r=u[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function _p(a,l){let s;return a.isVertexAI()?s=l?"publishers/google/models":"models":s=l?"models":"tunedModels",s}function Dp(a,l){for(const s of["models","tunedModels","publisherModels"])if(h1(l,s))return l[s];return[]}function h1(a,l){return a!==null&&typeof a=="object"&&l in a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x1(a,l){const s={};if(f(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(l,["data"]);r!=null&&m(s,["data"],r);const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function g1(a,l){const s={};if(f(l,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=f(l,["thought"]);r!=null&&m(s,["thought"],r);const o=f(l,["inlineData"]);o!=null&&m(s,["inlineData"],x1(a,o));const u=f(l,["codeExecutionResult"]);u!=null&&m(s,["codeExecutionResult"],u);const h=f(l,["executableCode"]);h!=null&&m(s,["executableCode"],h);const p=f(l,["fileData"]);p!=null&&m(s,["fileData"],p);const y=f(l,["functionCall"]);y!=null&&m(s,["functionCall"],y);const x=f(l,["functionResponse"]);x!=null&&m(s,["functionResponse"],x);const v=f(l,["text"]);return v!=null&&m(s,["text"],v),s}function vx(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>g1(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function p1(){return{}}function y1(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["dynamicThreshold"]);return o!=null&&m(s,["dynamicThreshold"],o),s}function v1(a,l){const s={},r=f(l,["dynamicRetrievalConfig"]);return r!=null&&m(s,["dynamicRetrievalConfig"],y1(a,r)),s}function b1(a,l){const s={};if(f(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");f(l,["googleSearch"])!=null&&m(s,["googleSearch"],p1());const o=f(l,["googleSearchRetrieval"]);if(o!=null&&m(s,["googleSearchRetrieval"],v1(a,o)),f(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(l,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=f(l,["codeExecution"]);u!=null&&m(s,["codeExecution"],u);const h=f(l,["functionDeclarations"]);return h!=null&&m(s,["functionDeclarations"],h),s}function N1(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["allowedFunctionNames"]);return o!=null&&m(s,["allowedFunctionNames"],o),s}function j1(a,l){const s={},r=f(l,["functionCallingConfig"]);if(r!=null&&m(s,["functionCallingConfig"],N1(a,r)),f(l,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return s}function w1(a,l,s){const r={},o=f(l,["ttl"]);s!==void 0&&o!=null&&m(s,["ttl"],o);const u=f(l,["expireTime"]);s!==void 0&&u!=null&&m(s,["expireTime"],u);const h=f(l,["displayName"]);s!==void 0&&h!=null&&m(s,["displayName"],h);const p=f(l,["contents"]);if(s!==void 0&&p!=null){let b=is(a,p);Array.isArray(b)&&(b=b.map(w=>vx(a,w))),m(s,["contents"],b)}const y=f(l,["systemInstruction"]);s!==void 0&&y!=null&&m(s,["systemInstruction"],vx(a,Nt(a,y)));const x=f(l,["tools"]);if(s!==void 0&&x!=null){let b=x;Array.isArray(b)&&(b=b.map(w=>b1(a,w))),m(s,["tools"],b)}const v=f(l,["toolConfig"]);return s!==void 0&&v!=null&&m(s,["toolConfig"],j1(a,v)),r}function C1(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["model"],jp(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],w1(a,o,s)),s}function T1(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],rs(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function S1(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],rs(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function E1(a,l,s){const r={},o=f(l,["ttl"]);s!==void 0&&o!=null&&m(s,["ttl"],o);const u=f(l,["expireTime"]);return s!==void 0&&u!=null&&m(s,["expireTime"],u),r}function A1(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],rs(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],E1(a,o,s)),s}function M1(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);return s!==void 0&&u!=null&&m(s,["_query","pageToken"],u),r}function _1(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],M1(a,r,s)),s}function D1(a,l){const s={},r=f(l,["displayName"]);r!=null&&m(s,["displayName"],r);const o=f(l,["data"]);o!=null&&m(s,["data"],o);const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function R1(a,l){const s={},r=f(l,["videoMetadata"]);r!=null&&m(s,["videoMetadata"],r);const o=f(l,["thought"]);o!=null&&m(s,["thought"],o);const u=f(l,["inlineData"]);u!=null&&m(s,["inlineData"],D1(a,u));const h=f(l,["codeExecutionResult"]);h!=null&&m(s,["codeExecutionResult"],h);const p=f(l,["executableCode"]);p!=null&&m(s,["executableCode"],p);const y=f(l,["fileData"]);y!=null&&m(s,["fileData"],y);const x=f(l,["functionCall"]);x!=null&&m(s,["functionCall"],x);const v=f(l,["functionResponse"]);v!=null&&m(s,["functionResponse"],v);const b=f(l,["text"]);return b!=null&&m(s,["text"],b),s}function bx(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>R1(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function I1(){return{}}function k1(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["dynamicThreshold"]);return o!=null&&m(s,["dynamicThreshold"],o),s}function L1(a,l){const s={},r=f(l,["dynamicRetrievalConfig"]);return r!=null&&m(s,["dynamicRetrievalConfig"],k1(a,r)),s}function U1(){return{}}function O1(a,l){const s={},r=f(l,["apiKeyString"]);return r!=null&&m(s,["apiKeyString"],r),s}function P1(a,l){const s={},r=f(l,["apiKeyConfig"]);r!=null&&m(s,["apiKeyConfig"],O1(a,r));const o=f(l,["authType"]);o!=null&&m(s,["authType"],o);const u=f(l,["googleServiceAccountConfig"]);u!=null&&m(s,["googleServiceAccountConfig"],u);const h=f(l,["httpBasicAuthConfig"]);h!=null&&m(s,["httpBasicAuthConfig"],h);const p=f(l,["oauthConfig"]);p!=null&&m(s,["oauthConfig"],p);const y=f(l,["oidcConfig"]);return y!=null&&m(s,["oidcConfig"],y),s}function B1(a,l){const s={},r=f(l,["authConfig"]);return r!=null&&m(s,["authConfig"],P1(a,r)),s}function V1(a,l){const s={},r=f(l,["retrieval"]);r!=null&&m(s,["retrieval"],r),f(l,["googleSearch"])!=null&&m(s,["googleSearch"],I1());const u=f(l,["googleSearchRetrieval"]);u!=null&&m(s,["googleSearchRetrieval"],L1(a,u)),f(l,["enterpriseWebSearch"])!=null&&m(s,["enterpriseWebSearch"],U1());const p=f(l,["googleMaps"]);p!=null&&m(s,["googleMaps"],B1(a,p));const y=f(l,["codeExecution"]);y!=null&&m(s,["codeExecution"],y);const x=f(l,["functionDeclarations"]);return x!=null&&m(s,["functionDeclarations"],x),s}function z1(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["allowedFunctionNames"]);return o!=null&&m(s,["allowedFunctionNames"],o),s}function q1(a,l){const s={},r=f(l,["latitude"]);r!=null&&m(s,["latitude"],r);const o=f(l,["longitude"]);return o!=null&&m(s,["longitude"],o),s}function G1(a,l){const s={},r=f(l,["latLng"]);return r!=null&&m(s,["latLng"],q1(a,r)),s}function H1(a,l){const s={},r=f(l,["functionCallingConfig"]);r!=null&&m(s,["functionCallingConfig"],z1(a,r));const o=f(l,["retrievalConfig"]);return o!=null&&m(s,["retrievalConfig"],G1(a,o)),s}function F1(a,l,s){const r={},o=f(l,["ttl"]);s!==void 0&&o!=null&&m(s,["ttl"],o);const u=f(l,["expireTime"]);s!==void 0&&u!=null&&m(s,["expireTime"],u);const h=f(l,["displayName"]);s!==void 0&&h!=null&&m(s,["displayName"],h);const p=f(l,["contents"]);if(s!==void 0&&p!=null){let b=is(a,p);Array.isArray(b)&&(b=b.map(w=>bx(a,w))),m(s,["contents"],b)}const y=f(l,["systemInstruction"]);s!==void 0&&y!=null&&m(s,["systemInstruction"],bx(a,Nt(a,y)));const x=f(l,["tools"]);if(s!==void 0&&x!=null){let b=x;Array.isArray(b)&&(b=b.map(w=>V1(a,w))),m(s,["tools"],b)}const v=f(l,["toolConfig"]);return s!==void 0&&v!=null&&m(s,["toolConfig"],H1(a,v)),r}function Y1(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["model"],jp(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],F1(a,o,s)),s}function $1(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],rs(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function K1(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],rs(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function J1(a,l,s){const r={},o=f(l,["ttl"]);s!==void 0&&o!=null&&m(s,["ttl"],o);const u=f(l,["expireTime"]);return s!==void 0&&u!=null&&m(s,["expireTime"],u),r}function X1(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],rs(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],J1(a,o,s)),s}function Z1(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);return s!==void 0&&u!=null&&m(s,["_query","pageToken"],u),r}function Q1(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],Z1(a,r,s)),s}function ur(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["displayName"]);o!=null&&m(s,["displayName"],o);const u=f(l,["model"]);u!=null&&m(s,["model"],u);const h=f(l,["createTime"]);h!=null&&m(s,["createTime"],h);const p=f(l,["updateTime"]);p!=null&&m(s,["updateTime"],p);const y=f(l,["expireTime"]);y!=null&&m(s,["expireTime"],y);const x=f(l,["usageMetadata"]);return x!=null&&m(s,["usageMetadata"],x),s}function W1(){return{}}function ej(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["cachedContents"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>ur(a,h))),m(s,["cachedContents"],u)}return s}function dr(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["displayName"]);o!=null&&m(s,["displayName"],o);const u=f(l,["model"]);u!=null&&m(s,["model"],u);const h=f(l,["createTime"]);h!=null&&m(s,["createTime"],h);const p=f(l,["updateTime"]);p!=null&&m(s,["updateTime"],p);const y=f(l,["expireTime"]);y!=null&&m(s,["expireTime"],y);const x=f(l,["usageMetadata"]);return x!=null&&m(s,["usageMetadata"],x),s}function tj(){return{}}function nj(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["cachedContents"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>dr(a,h))),m(s,["cachedContents"],u)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bl;(function(a){a.PAGED_ITEM_BATCH_JOBS="batchJobs",a.PAGED_ITEM_MODELS="models",a.PAGED_ITEM_TUNING_JOBS="tuningJobs",a.PAGED_ITEM_FILES="files",a.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(bl||(bl={}));class Er{constructor(l,s,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(l,r,o)}init(l,s,r){var o,u;this.nameInternal=l,this.pageInternal=s[this.nameInternal]||[],this.idxInternal=0;let h={config:{}};r?typeof r=="object"?h=Object.assign({},r):h=r:h={config:{}},h.config&&(h.config.pageToken=s.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(u=(o=h.config)===null||o===void 0?void 0:o.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(l){this.init(this.nameInternal,l,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(l){return this.pageInternal[l]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const l=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:l,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const l=await this.requestInternal(this.params);return this.initNextPage(l),this.page}hasNextPage(){var l;return((l=this.params.config)===null||l===void 0?void 0:l.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nx;(function(a){a.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",a.OUTCOME_OK="OUTCOME_OK",a.OUTCOME_FAILED="OUTCOME_FAILED",a.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Nx||(Nx={}));var jx;(function(a){a.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",a.PYTHON="PYTHON"})(jx||(jx={}));var wx;(function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(wx||(wx={}));var Cx;(function(a){a.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",a.SEVERITY="SEVERITY",a.PROBABILITY="PROBABILITY"})(Cx||(Cx={}));var Tx;(function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",a.OFF="OFF"})(Tx||(Tx={}));var Sx;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(Sx||(Sx={}));var Ex;(function(a){a.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",a.NO_AUTH="NO_AUTH",a.API_KEY_AUTH="API_KEY_AUTH",a.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",a.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",a.OAUTH="OAUTH",a.OIDC_AUTH="OIDC_AUTH"})(Ex||(Ex={}));var Sa;(function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.STRING="STRING",a.NUMBER="NUMBER",a.INTEGER="INTEGER",a.BOOLEAN="BOOLEAN",a.ARRAY="ARRAY",a.OBJECT="OBJECT"})(Sa||(Sa={}));var Ax;(function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.IMAGE_SAFETY="IMAGE_SAFETY"})(Ax||(Ax={}));var Mx;(function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"})(Mx||(Mx={}));var _x;(function(a){a.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",a.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",a.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",a.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",a.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_x||(_x={}));var Dx;(function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Dx||(Dx={}));var Rx;(function(a){a.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",a.ON_DEMAND="ON_DEMAND",a.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Rx||(Rx={}));var pr;(function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.AUDIO="AUDIO"})(pr||(pr={}));var Ix;(function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ix||(Ix={}));var vu;(function(a){a.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",a.JOB_STATE_QUEUED="JOB_STATE_QUEUED",a.JOB_STATE_PENDING="JOB_STATE_PENDING",a.JOB_STATE_RUNNING="JOB_STATE_RUNNING",a.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",a.JOB_STATE_FAILED="JOB_STATE_FAILED",a.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",a.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",a.JOB_STATE_PAUSED="JOB_STATE_PAUSED",a.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",a.JOB_STATE_UPDATING="JOB_STATE_UPDATING",a.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vu||(vu={}));var kx;(function(a){a.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",a.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",a.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",a.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",a.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",a.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",a.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kx||(kx={}));var Lx;(function(a){a.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",a.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",a.BALANCED="BALANCED",a.PRIORITIZE_COST="PRIORITIZE_COST"})(Lx||(Lx={}));var Ux;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(Ux||(Ux={}));var Ox;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE"})(Ox||(Ox={}));var Px;(function(a){a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"})(Px||(Px={}));var Bx;(function(a){a.DONT_ALLOW="DONT_ALLOW",a.ALLOW_ADULT="ALLOW_ADULT",a.ALLOW_ALL="ALLOW_ALL"})(Bx||(Bx={}));var Vx;(function(a){a.auto="auto",a.en="en",a.ja="ja",a.ko="ko",a.hi="hi"})(Vx||(Vx={}));var zx;(function(a){a.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",a.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",a.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",a.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",a.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zx||(zx={}));var qx;(function(a){a.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",a.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",a.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",a.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qx||(qx={}));var Gx;(function(a){a.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",a.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",a.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",a.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gx||(Gx={}));var Hx;(function(a){a.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",a.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",a.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",a.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",a.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",a.EDIT_MODE_STYLE="EDIT_MODE_STYLE",a.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",a.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Hx||(Hx={}));var Fx;(function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.PROCESSING="PROCESSING",a.ACTIVE="ACTIVE",a.FAILED="FAILED"})(Fx||(Fx={}));var Yx;(function(a){a.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",a.UPLOADED="UPLOADED",a.GENERATED="GENERATED"})(Yx||(Yx={}));var $x;(function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.VIDEO="VIDEO",a.AUDIO="AUDIO",a.DOCUMENT="DOCUMENT"})($x||($x={}));var Kx;(function(a){a.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",a.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",a.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Kx||(Kx={}));var Jx;(function(a){a.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",a.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",a.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Jx||(Jx={}));var Xx;(function(a){a.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",a.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",a.NO_INTERRUPTION="NO_INTERRUPTION"})(Xx||(Xx={}));var Zx;(function(a){a.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",a.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",a.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Zx||(Zx={}));class Zi{get text(){var l,s,r,o,u,h,p,y;if(((o=(r=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let x="",v=!1;const b=[];for(const w of(y=(p=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[C,A]of Object.entries(w))C!=="text"&&C!=="thought"&&(A!==null||A!==void 0)&&b.push(C);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;v=!0,x+=w.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?x:void 0}get data(){var l,s,r,o,u,h,p,y;if(((o=(r=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let x="";const v=[];for(const b of(y=(p=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[w,C]of Object.entries(b))w!=="inlineData"&&(C!==null||C!==void 0)&&v.push(w);b.inlineData&&typeof b.inlineData.data=="string"&&(x+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),x.length>0?btoa(x):void 0}get functionCalls(){var l,s,r,o,u,h,p,y;if(((o=(r=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const x=(y=(p=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((x==null?void 0:x.length)!==0)return x}get executableCode(){var l,s,r,o,u,h,p,y,x;if(((o=(r=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(x=v==null?void 0:v[0])===null||x===void 0?void 0:x.code}get codeExecutionResult(){var l,s,r,o,u,h,p,y,x;if(((o=(r=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(x=v==null?void 0:v[0])===null||x===void 0?void 0:x.output}}class Qx{}class Wx{}class sj{}class lj{}class eg{}class tg{}class ng{}class aj{}class sg{}class lg{}class ag{}class ij{}class bu{constructor(l){const s={};for(const r of l.headers.entries())s[r[0]]=r[1];this.headers=s,this.responseInternal=l}json(){return this.responseInternal.json()}}class rj{}class oj{}class cj{get text(){var l,s,r;let o="",u=!1;const h=[];for(const p of(r=(s=(l=this.serverContent)===null||l===void 0?void 0:l.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&r!==void 0?r:[]){for(const[y,x]of Object.entries(p))y!=="text"&&y!=="thought"&&x!==null&&h.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,o+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?o:void 0}get data(){var l,s,r;let o="";const u=[];for(const h of(r=(s=(l=this.serverContent)===null||l===void 0?void 0:l.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&r!==void 0?r:[]){for(const[p,y]of Object.entries(h))p!=="inlineData"&&y!==null&&u.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(o+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uj extends ka{constructor(l){super(),this.apiClient=l,this.list=async(s={})=>new Er(bl.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(s),s)}async create(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Y1(this.apiClient,l);return p=ve("cachedContents",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>dr(this.apiClient,v))}else{const x=C1(this.apiClient,l);return p=ve("cachedContents",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>ur(this.apiClient,v))}}async get(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=$1(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>dr(this.apiClient,v))}else{const x=T1(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>ur(this.apiClient,v))}}async delete(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=K1(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(()=>{const v=tj(),b=new lg;return Object.assign(b,v),b})}else{const x=S1(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(()=>{const v=W1(),b=new lg;return Object.assign(b,v),b})}}async update(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=X1(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"PATCH",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>dr(this.apiClient,v))}else{const x=A1(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"PATCH",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>ur(this.apiClient,v))}}async listInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Q1(this.apiClient,l);return p=ve("cachedContents",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=nj(this.apiClient,v),w=new ag;return Object.assign(w,b),w})}else{const x=_1(this.apiClient,l);return p=ve("cachedContents",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=ej(this.apiClient,v),w=new ag;return Object.assign(w,b),w})}}}function ig(a){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&a[l],r=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&r>=a.length&&(a=void 0),{value:a&&a[r++],done:!a}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(a){return this instanceof dt?(this.v=a,this):new dt(a)}function yr(a,l,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(a,l||[]),o,u=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),o[Symbol.asyncIterator]=function(){return this},o;function h(C){return function(A){return Promise.resolve(A).then(C,b)}}function p(C,A){r[C]&&(o[C]=function(_){return new Promise(function(M,k){u.push([C,_,M,k])>1||y(C,_)})},A&&(o[C]=A(o[C])))}function y(C,A){try{x(r[C](A))}catch(_){w(u[0][3],_)}}function x(C){C.value instanceof dt?Promise.resolve(C.value.v).then(v,b):w(u[0][2],C)}function v(C){y("next",C)}function b(C){y("throw",C)}function w(C,A){C(A),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Nu(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=a[Symbol.asyncIterator],s;return l?l.call(a):(a=typeof ig=="function"?ig(a):a[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(u){s[u]=a[u]&&function(h){return new Promise(function(p,y){h=a[u](h),o(p,y,h.done,h.value)})}}function o(u,h,p,y){Promise.resolve(y).then(function(x){u({value:x,done:p})},h)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dj(a){var l;if(a.candidates==null||a.candidates.length===0)return!1;const s=(l=a.candidates[0])===null||l===void 0?void 0:l.content;return s===void 0?!1:Rp(s)}function Rp(a){if(a.parts===void 0||a.parts.length===0)return!1;for(const l of a.parts)if(l===void 0||Object.keys(l).length===0||l.text!==void 0&&l.text==="")return!1;return!0}function fj(a){if(a.length!==0){if(a[0].role!=="user")throw new Error("History must start with a user turn.");for(const l of a)if(l.role!=="user"&&l.role!=="model")throw new Error(`Role must be user or model, but got ${l.role}.`)}}function mj(a){if(a===void 0||a.length===0)return[];const l=[],s=a.length;let r=0,o=a[0];for(;r<s;)if(a[r].role==="user")o=a[r],r++;else{const u=[];let h=!0;for(;r<s&&a[r].role==="model";)u.push(a[r]),h&&!Rp(a[r])&&(h=!1),r++;h&&(l.push(o),l.push(...u))}return l}class hj{constructor(l,s){this.modelsModule=l,this.apiClient=s}create(l){return new xj(this.apiClient,this.modelsModule,l.model,l.config,l.history)}}class xj{constructor(l,s,r,o={},u=[]){this.apiClient=l,this.modelsModule=s,this.model=r,this.config=o,this.history=u,this.sendPromise=Promise.resolve(),fj(u)}async sendMessage(l){var s;await this.sendPromise;const r=Nt(this.apiClient,l.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=l.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var u,h;const y=(h=(u=(await o).candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content,x=y?[y]:[];this.recordHistory(r,x)})(),await this.sendPromise,o}async sendMessageStream(l){var s;await this.sendPromise;const r=Nt(this.apiClient,l.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=l.config)!==null&&s!==void 0?s:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const u=await o;return this.processStreamResponse(u,r)}getHistory(l=!1){return l?mj(this.history):this.history}processStreamResponse(l,s){var r,o;return yr(this,arguments,function*(){var h,p,y,x;const v=[];try{for(var b=!0,w=Nu(l),C;C=yield dt(w.next()),h=C.done,!h;b=!0){x=C.value,b=!1;const A=x;if(dj(A)){const _=(o=(r=A.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;_!==void 0&&v.push(_)}yield yield dt(A)}}catch(A){p={error:A}}finally{try{!b&&!h&&(y=w.return)&&(yield dt(y.call(w)))}finally{if(p)throw p.error}}this.recordHistory(s,v)})}recordHistory(l,s){let r=[];s.length>0&&s.every(o=>o.role==="model")?r=s:r.push({role:"model",parts:[]}),this.history.push(l),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gj(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);return s!==void 0&&u!=null&&m(s,["_query","pageToken"],u),r}function pj(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],gj(a,r,s)),s}function yj(a,l){const s={},r=f(l,["details"]);r!=null&&m(s,["details"],r);const o=f(l,["message"]);o!=null&&m(s,["message"],o);const u=f(l,["code"]);return u!=null&&m(s,["code"],u),s}function vj(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["displayName"]);o!=null&&m(s,["displayName"],o);const u=f(l,["mimeType"]);u!=null&&m(s,["mimeType"],u);const h=f(l,["sizeBytes"]);h!=null&&m(s,["sizeBytes"],h);const p=f(l,["createTime"]);p!=null&&m(s,["createTime"],p);const y=f(l,["expirationTime"]);y!=null&&m(s,["expirationTime"],y);const x=f(l,["updateTime"]);x!=null&&m(s,["updateTime"],x);const v=f(l,["sha256Hash"]);v!=null&&m(s,["sha256Hash"],v);const b=f(l,["uri"]);b!=null&&m(s,["uri"],b);const w=f(l,["downloadUri"]);w!=null&&m(s,["downloadUri"],w);const C=f(l,["state"]);C!=null&&m(s,["state"],C);const A=f(l,["source"]);A!=null&&m(s,["source"],A);const _=f(l,["videoMetadata"]);_!=null&&m(s,["videoMetadata"],_);const M=f(l,["error"]);return M!=null&&m(s,["error"],yj(a,M)),s}function bj(a,l){const s={},r=f(l,["file"]);r!=null&&m(s,["file"],vj(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function Nj(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","file"],Mp(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function jj(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","file"],Mp(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function wj(a,l){const s={},r=f(l,["details"]);r!=null&&m(s,["details"],r);const o=f(l,["message"]);o!=null&&m(s,["message"],o);const u=f(l,["code"]);return u!=null&&m(s,["code"],u),s}function ju(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["displayName"]);o!=null&&m(s,["displayName"],o);const u=f(l,["mimeType"]);u!=null&&m(s,["mimeType"],u);const h=f(l,["sizeBytes"]);h!=null&&m(s,["sizeBytes"],h);const p=f(l,["createTime"]);p!=null&&m(s,["createTime"],p);const y=f(l,["expirationTime"]);y!=null&&m(s,["expirationTime"],y);const x=f(l,["updateTime"]);x!=null&&m(s,["updateTime"],x);const v=f(l,["sha256Hash"]);v!=null&&m(s,["sha256Hash"],v);const b=f(l,["uri"]);b!=null&&m(s,["uri"],b);const w=f(l,["downloadUri"]);w!=null&&m(s,["downloadUri"],w);const C=f(l,["state"]);C!=null&&m(s,["state"],C);const A=f(l,["source"]);A!=null&&m(s,["source"],A);const _=f(l,["videoMetadata"]);_!=null&&m(s,["videoMetadata"],_);const M=f(l,["error"]);return M!=null&&m(s,["error"],wj(a,M)),s}function Cj(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["files"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>ju(a,h))),m(s,["files"],u)}return s}function Tj(){return{}}function Sj(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ej extends ka{constructor(l){super(),this.apiClient=l,this.list=async(s={})=>new Er(bl.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(s),s)}async upload(l){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(l.file,l.config).then(s=>ju(this.apiClient,s))}async download(l){await this.apiClient.downloadFile(l)}async listInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=pj(this.apiClient,l);return u=ve("files",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>{const x=Cj(this.apiClient,y),v=new ij;return Object.assign(v,x),v})}}async createInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=bj(this.apiClient,l);return u=ve("upload/v1beta/files",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(()=>{const y=Tj(),x=new rj;return Object.assign(x,y),x})}}async get(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Nj(this.apiClient,l);return u=ve("files/{file}",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>ju(this.apiClient,y))}}async delete(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=jj(this.apiClient,l);return u=ve("files/{file}",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(()=>{const y=Sj(),x=new oj;return Object.assign(x,y),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aj(a,l){const s={};if(f(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(l,["data"]);r!=null&&m(s,["data"],r);const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function Mj(a,l){const s={},r=f(l,["displayName"]);r!=null&&m(s,["displayName"],r);const o=f(l,["data"]);o!=null&&m(s,["data"],o);const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function _j(a,l){const s={};if(f(l,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=f(l,["thought"]);r!=null&&m(s,["thought"],r);const o=f(l,["inlineData"]);o!=null&&m(s,["inlineData"],Aj(a,o));const u=f(l,["codeExecutionResult"]);u!=null&&m(s,["codeExecutionResult"],u);const h=f(l,["executableCode"]);h!=null&&m(s,["executableCode"],h);const p=f(l,["fileData"]);p!=null&&m(s,["fileData"],p);const y=f(l,["functionCall"]);y!=null&&m(s,["functionCall"],y);const x=f(l,["functionResponse"]);x!=null&&m(s,["functionResponse"],x);const v=f(l,["text"]);return v!=null&&m(s,["text"],v),s}function Dj(a,l){const s={},r=f(l,["videoMetadata"]);r!=null&&m(s,["videoMetadata"],r);const o=f(l,["thought"]);o!=null&&m(s,["thought"],o);const u=f(l,["inlineData"]);u!=null&&m(s,["inlineData"],Mj(a,u));const h=f(l,["codeExecutionResult"]);h!=null&&m(s,["codeExecutionResult"],h);const p=f(l,["executableCode"]);p!=null&&m(s,["executableCode"],p);const y=f(l,["fileData"]);y!=null&&m(s,["fileData"],y);const x=f(l,["functionCall"]);x!=null&&m(s,["functionCall"],x);const v=f(l,["functionResponse"]);v!=null&&m(s,["functionResponse"],v);const b=f(l,["text"]);return b!=null&&m(s,["text"],b),s}function Rj(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>_j(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function Ij(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>Dj(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function kj(){return{}}function Lj(){return{}}function Uj(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["dynamicThreshold"]);return o!=null&&m(s,["dynamicThreshold"],o),s}function Oj(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["dynamicThreshold"]);return o!=null&&m(s,["dynamicThreshold"],o),s}function Pj(a,l){const s={},r=f(l,["dynamicRetrievalConfig"]);return r!=null&&m(s,["dynamicRetrievalConfig"],Uj(a,r)),s}function Bj(a,l){const s={},r=f(l,["dynamicRetrievalConfig"]);return r!=null&&m(s,["dynamicRetrievalConfig"],Oj(a,r)),s}function Vj(){return{}}function zj(a,l){const s={},r=f(l,["apiKeyString"]);return r!=null&&m(s,["apiKeyString"],r),s}function qj(a,l){const s={},r=f(l,["apiKeyConfig"]);r!=null&&m(s,["apiKeyConfig"],zj(a,r));const o=f(l,["authType"]);o!=null&&m(s,["authType"],o);const u=f(l,["googleServiceAccountConfig"]);u!=null&&m(s,["googleServiceAccountConfig"],u);const h=f(l,["httpBasicAuthConfig"]);h!=null&&m(s,["httpBasicAuthConfig"],h);const p=f(l,["oauthConfig"]);p!=null&&m(s,["oauthConfig"],p);const y=f(l,["oidcConfig"]);return y!=null&&m(s,["oidcConfig"],y),s}function Gj(a,l){const s={},r=f(l,["authConfig"]);return r!=null&&m(s,["authConfig"],qj(a,r)),s}function Hj(a,l){const s={};if(f(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");f(l,["googleSearch"])!=null&&m(s,["googleSearch"],kj());const o=f(l,["googleSearchRetrieval"]);if(o!=null&&m(s,["googleSearchRetrieval"],Pj(a,o)),f(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(l,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=f(l,["codeExecution"]);u!=null&&m(s,["codeExecution"],u);const h=f(l,["functionDeclarations"]);return h!=null&&m(s,["functionDeclarations"],h),s}function Fj(a,l){const s={},r=f(l,["retrieval"]);r!=null&&m(s,["retrieval"],r),f(l,["googleSearch"])!=null&&m(s,["googleSearch"],Lj());const u=f(l,["googleSearchRetrieval"]);u!=null&&m(s,["googleSearchRetrieval"],Bj(a,u)),f(l,["enterpriseWebSearch"])!=null&&m(s,["enterpriseWebSearch"],Vj());const p=f(l,["googleMaps"]);p!=null&&m(s,["googleMaps"],Gj(a,p));const y=f(l,["codeExecution"]);y!=null&&m(s,["codeExecution"],y);const x=f(l,["functionDeclarations"]);return x!=null&&m(s,["functionDeclarations"],x),s}function Yj(a,l){const s={},r=f(l,["handle"]);if(r!=null&&m(s,["handle"],r),f(l,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return s}function $j(a,l){const s={},r=f(l,["handle"]);r!=null&&m(s,["handle"],r);const o=f(l,["transparent"]);return o!=null&&m(s,["transparent"],o),s}function rg(){return{}}function og(){return{}}function Kj(a,l){const s={},r=f(l,["disabled"]);r!=null&&m(s,["disabled"],r);const o=f(l,["startOfSpeechSensitivity"]);o!=null&&m(s,["startOfSpeechSensitivity"],o);const u=f(l,["endOfSpeechSensitivity"]);u!=null&&m(s,["endOfSpeechSensitivity"],u);const h=f(l,["prefixPaddingMs"]);h!=null&&m(s,["prefixPaddingMs"],h);const p=f(l,["silenceDurationMs"]);return p!=null&&m(s,["silenceDurationMs"],p),s}function Jj(a,l){const s={},r=f(l,["disabled"]);r!=null&&m(s,["disabled"],r);const o=f(l,["startOfSpeechSensitivity"]);o!=null&&m(s,["startOfSpeechSensitivity"],o);const u=f(l,["endOfSpeechSensitivity"]);u!=null&&m(s,["endOfSpeechSensitivity"],u);const h=f(l,["prefixPaddingMs"]);h!=null&&m(s,["prefixPaddingMs"],h);const p=f(l,["silenceDurationMs"]);return p!=null&&m(s,["silenceDurationMs"],p),s}function Xj(a,l){const s={},r=f(l,["automaticActivityDetection"]);r!=null&&m(s,["automaticActivityDetection"],Kj(a,r));const o=f(l,["activityHandling"]);o!=null&&m(s,["activityHandling"],o);const u=f(l,["turnCoverage"]);return u!=null&&m(s,["turnCoverage"],u),s}function Zj(a,l){const s={},r=f(l,["automaticActivityDetection"]);r!=null&&m(s,["automaticActivityDetection"],Jj(a,r));const o=f(l,["activityHandling"]);o!=null&&m(s,["activityHandling"],o);const u=f(l,["turnCoverage"]);return u!=null&&m(s,["turnCoverage"],u),s}function Qj(a,l){const s={},r=f(l,["targetTokens"]);return r!=null&&m(s,["targetTokens"],r),s}function Wj(a,l){const s={},r=f(l,["targetTokens"]);return r!=null&&m(s,["targetTokens"],r),s}function e2(a,l){const s={},r=f(l,["triggerTokens"]);r!=null&&m(s,["triggerTokens"],r);const o=f(l,["slidingWindow"]);return o!=null&&m(s,["slidingWindow"],Qj(a,o)),s}function t2(a,l){const s={},r=f(l,["triggerTokens"]);r!=null&&m(s,["triggerTokens"],r);const o=f(l,["slidingWindow"]);return o!=null&&m(s,["slidingWindow"],Wj(a,o)),s}function n2(a,l,s){const r={},o=f(l,["generationConfig"]);s!==void 0&&o!=null&&m(s,["setup","generationConfig"],o);const u=f(l,["responseModalities"]);s!==void 0&&u!=null&&m(s,["setup","generationConfig","responseModalities"],u);const h=f(l,["temperature"]);s!==void 0&&h!=null&&m(s,["setup","generationConfig","temperature"],h);const p=f(l,["topP"]);s!==void 0&&p!=null&&m(s,["setup","generationConfig","topP"],p);const y=f(l,["topK"]);s!==void 0&&y!=null&&m(s,["setup","generationConfig","topK"],y);const x=f(l,["maxOutputTokens"]);s!==void 0&&x!=null&&m(s,["setup","generationConfig","maxOutputTokens"],x);const v=f(l,["mediaResolution"]);s!==void 0&&v!=null&&m(s,["setup","generationConfig","mediaResolution"],v);const b=f(l,["seed"]);s!==void 0&&b!=null&&m(s,["setup","generationConfig","seed"],b);const w=f(l,["speechConfig"]);s!==void 0&&w!=null&&m(s,["setup","generationConfig","speechConfig"],w);const C=f(l,["systemInstruction"]);s!==void 0&&C!=null&&m(s,["setup","systemInstruction"],Rj(a,Nt(a,C)));const A=f(l,["tools"]);if(s!==void 0&&A!=null){let B=Sr(a,A);Array.isArray(B)&&(B=B.map(L=>Hj(a,Tr(a,L)))),m(s,["setup","tools"],B)}const _=f(l,["sessionResumption"]);s!==void 0&&_!=null&&m(s,["setup","sessionResumption"],Yj(a,_));const M=f(l,["inputAudioTranscription"]);s!==void 0&&M!=null&&m(s,["setup","inputAudioTranscription"],rg());const k=f(l,["outputAudioTranscription"]);s!==void 0&&k!=null&&m(s,["setup","outputAudioTranscription"],rg());const I=f(l,["realtimeInputConfig"]);s!==void 0&&I!=null&&m(s,["setup","realtimeInputConfig"],Xj(a,I));const V=f(l,["contextWindowCompression"]);return s!==void 0&&V!=null&&m(s,["setup","contextWindowCompression"],e2(a,V)),r}function s2(a,l,s){const r={},o=f(l,["generationConfig"]);s!==void 0&&o!=null&&m(s,["setup","generationConfig"],o);const u=f(l,["responseModalities"]);s!==void 0&&u!=null&&m(s,["setup","generationConfig","responseModalities"],u);const h=f(l,["temperature"]);s!==void 0&&h!=null&&m(s,["setup","generationConfig","temperature"],h);const p=f(l,["topP"]);s!==void 0&&p!=null&&m(s,["setup","generationConfig","topP"],p);const y=f(l,["topK"]);s!==void 0&&y!=null&&m(s,["setup","generationConfig","topK"],y);const x=f(l,["maxOutputTokens"]);s!==void 0&&x!=null&&m(s,["setup","generationConfig","maxOutputTokens"],x);const v=f(l,["mediaResolution"]);s!==void 0&&v!=null&&m(s,["setup","generationConfig","mediaResolution"],v);const b=f(l,["seed"]);s!==void 0&&b!=null&&m(s,["setup","generationConfig","seed"],b);const w=f(l,["speechConfig"]);s!==void 0&&w!=null&&m(s,["setup","generationConfig","speechConfig"],w);const C=f(l,["systemInstruction"]);s!==void 0&&C!=null&&m(s,["setup","systemInstruction"],Ij(a,Nt(a,C)));const A=f(l,["tools"]);if(s!==void 0&&A!=null){let B=Sr(a,A);Array.isArray(B)&&(B=B.map(L=>Fj(a,Tr(a,L)))),m(s,["setup","tools"],B)}const _=f(l,["sessionResumption"]);s!==void 0&&_!=null&&m(s,["setup","sessionResumption"],$j(a,_));const M=f(l,["inputAudioTranscription"]);s!==void 0&&M!=null&&m(s,["setup","inputAudioTranscription"],og());const k=f(l,["outputAudioTranscription"]);s!==void 0&&k!=null&&m(s,["setup","outputAudioTranscription"],og());const I=f(l,["realtimeInputConfig"]);s!==void 0&&I!=null&&m(s,["setup","realtimeInputConfig"],Zj(a,I));const V=f(l,["contextWindowCompression"]);return s!==void 0&&V!=null&&m(s,["setup","contextWindowCompression"],t2(a,V)),r}function l2(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["setup","model"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],n2(a,o,s)),s}function a2(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["setup","model"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],s2(a,o,s)),s}function i2(){return{}}function r2(){return{}}function o2(){return{}}function c2(){return{}}function u2(a,l){const s={},r=f(l,["media"]);r!=null&&m(s,["mediaChunks"],wp(a,r));const o=f(l,["audio"]);o!=null&&m(s,["audio"],c1(a,o));const u=f(l,["audioStreamEnd"]);u!=null&&m(s,["audioStreamEnd"],u);const h=f(l,["video"]);h!=null&&m(s,["video"],o1(a,h));const p=f(l,["text"]);return p!=null&&m(s,["text"],p),f(l,["activityStart"])!=null&&m(s,["activityStart"],i2()),f(l,["activityEnd"])!=null&&m(s,["activityEnd"],o2()),s}function d2(a,l){const s={},r=f(l,["media"]);if(r!=null&&m(s,["mediaChunks"],wp(a,r)),f(l,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=f(l,["audioStreamEnd"]);if(o!=null&&m(s,["audioStreamEnd"],o),f(l,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(f(l,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return f(l,["activityStart"])!=null&&m(s,["activityStart"],r2()),f(l,["activityEnd"])!=null&&m(s,["activityEnd"],c2()),s}function f2(){return{}}function m2(){return{}}function h2(a,l){const s={},r=f(l,["data"]);r!=null&&m(s,["data"],r);const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function x2(a,l){const s={},r=f(l,["displayName"]);r!=null&&m(s,["displayName"],r);const o=f(l,["data"]);o!=null&&m(s,["data"],o);const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function g2(a,l){const s={},r=f(l,["thought"]);r!=null&&m(s,["thought"],r);const o=f(l,["inlineData"]);o!=null&&m(s,["inlineData"],h2(a,o));const u=f(l,["codeExecutionResult"]);u!=null&&m(s,["codeExecutionResult"],u);const h=f(l,["executableCode"]);h!=null&&m(s,["executableCode"],h);const p=f(l,["fileData"]);p!=null&&m(s,["fileData"],p);const y=f(l,["functionCall"]);y!=null&&m(s,["functionCall"],y);const x=f(l,["functionResponse"]);x!=null&&m(s,["functionResponse"],x);const v=f(l,["text"]);return v!=null&&m(s,["text"],v),s}function p2(a,l){const s={},r=f(l,["videoMetadata"]);r!=null&&m(s,["videoMetadata"],r);const o=f(l,["thought"]);o!=null&&m(s,["thought"],o);const u=f(l,["inlineData"]);u!=null&&m(s,["inlineData"],x2(a,u));const h=f(l,["codeExecutionResult"]);h!=null&&m(s,["codeExecutionResult"],h);const p=f(l,["executableCode"]);p!=null&&m(s,["executableCode"],p);const y=f(l,["fileData"]);y!=null&&m(s,["fileData"],y);const x=f(l,["functionCall"]);x!=null&&m(s,["functionCall"],x);const v=f(l,["functionResponse"]);v!=null&&m(s,["functionResponse"],v);const b=f(l,["text"]);return b!=null&&m(s,["text"],b),s}function y2(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>g2(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function v2(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>p2(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function cg(a,l){const s={},r=f(l,["text"]);r!=null&&m(s,["text"],r);const o=f(l,["finished"]);return o!=null&&m(s,["finished"],o),s}function ug(a,l){const s={},r=f(l,["text"]);r!=null&&m(s,["text"],r);const o=f(l,["finished"]);return o!=null&&m(s,["finished"],o),s}function b2(a,l){const s={},r=f(l,["modelTurn"]);r!=null&&m(s,["modelTurn"],y2(a,r));const o=f(l,["turnComplete"]);o!=null&&m(s,["turnComplete"],o);const u=f(l,["interrupted"]);u!=null&&m(s,["interrupted"],u);const h=f(l,["groundingMetadata"]);h!=null&&m(s,["groundingMetadata"],h);const p=f(l,["generationComplete"]);p!=null&&m(s,["generationComplete"],p);const y=f(l,["inputTranscription"]);y!=null&&m(s,["inputTranscription"],cg(a,y));const x=f(l,["outputTranscription"]);return x!=null&&m(s,["outputTranscription"],cg(a,x)),s}function N2(a,l){const s={},r=f(l,["modelTurn"]);r!=null&&m(s,["modelTurn"],v2(a,r));const o=f(l,["turnComplete"]);o!=null&&m(s,["turnComplete"],o);const u=f(l,["interrupted"]);u!=null&&m(s,["interrupted"],u);const h=f(l,["groundingMetadata"]);h!=null&&m(s,["groundingMetadata"],h);const p=f(l,["generationComplete"]);p!=null&&m(s,["generationComplete"],p);const y=f(l,["inputTranscription"]);y!=null&&m(s,["inputTranscription"],ug(a,y));const x=f(l,["outputTranscription"]);return x!=null&&m(s,["outputTranscription"],ug(a,x)),s}function j2(a,l){const s={},r=f(l,["id"]);r!=null&&m(s,["id"],r);const o=f(l,["args"]);o!=null&&m(s,["args"],o);const u=f(l,["name"]);return u!=null&&m(s,["name"],u),s}function w2(a,l){const s={},r=f(l,["args"]);r!=null&&m(s,["args"],r);const o=f(l,["name"]);return o!=null&&m(s,["name"],o),s}function C2(a,l){const s={},r=f(l,["functionCalls"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>j2(a,u))),m(s,["functionCalls"],o)}return s}function T2(a,l){const s={},r=f(l,["functionCalls"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>w2(a,u))),m(s,["functionCalls"],o)}return s}function S2(a,l){const s={},r=f(l,["ids"]);return r!=null&&m(s,["ids"],r),s}function E2(a,l){const s={},r=f(l,["ids"]);return r!=null&&m(s,["ids"],r),s}function Qi(a,l){const s={},r=f(l,["modality"]);r!=null&&m(s,["modality"],r);const o=f(l,["tokenCount"]);return o!=null&&m(s,["tokenCount"],o),s}function Wi(a,l){const s={},r=f(l,["modality"]);r!=null&&m(s,["modality"],r);const o=f(l,["tokenCount"]);return o!=null&&m(s,["tokenCount"],o),s}function A2(a,l){const s={},r=f(l,["promptTokenCount"]);r!=null&&m(s,["promptTokenCount"],r);const o=f(l,["cachedContentTokenCount"]);o!=null&&m(s,["cachedContentTokenCount"],o);const u=f(l,["responseTokenCount"]);u!=null&&m(s,["responseTokenCount"],u);const h=f(l,["toolUsePromptTokenCount"]);h!=null&&m(s,["toolUsePromptTokenCount"],h);const p=f(l,["thoughtsTokenCount"]);p!=null&&m(s,["thoughtsTokenCount"],p);const y=f(l,["totalTokenCount"]);y!=null&&m(s,["totalTokenCount"],y);const x=f(l,["promptTokensDetails"]);if(x!=null){let C=x;Array.isArray(C)&&(C=C.map(A=>Qi(a,A))),m(s,["promptTokensDetails"],C)}const v=f(l,["cacheTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(A=>Qi(a,A))),m(s,["cacheTokensDetails"],C)}const b=f(l,["responseTokensDetails"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(A=>Qi(a,A))),m(s,["responseTokensDetails"],C)}const w=f(l,["toolUsePromptTokensDetails"]);if(w!=null){let C=w;Array.isArray(C)&&(C=C.map(A=>Qi(a,A))),m(s,["toolUsePromptTokensDetails"],C)}return s}function M2(a,l){const s={},r=f(l,["promptTokenCount"]);r!=null&&m(s,["promptTokenCount"],r);const o=f(l,["cachedContentTokenCount"]);o!=null&&m(s,["cachedContentTokenCount"],o);const u=f(l,["candidatesTokenCount"]);u!=null&&m(s,["responseTokenCount"],u);const h=f(l,["toolUsePromptTokenCount"]);h!=null&&m(s,["toolUsePromptTokenCount"],h);const p=f(l,["thoughtsTokenCount"]);p!=null&&m(s,["thoughtsTokenCount"],p);const y=f(l,["totalTokenCount"]);y!=null&&m(s,["totalTokenCount"],y);const x=f(l,["promptTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(_=>Wi(a,_))),m(s,["promptTokensDetails"],A)}const v=f(l,["cacheTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(_=>Wi(a,_))),m(s,["cacheTokensDetails"],A)}const b=f(l,["candidatesTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(_=>Wi(a,_))),m(s,["responseTokensDetails"],A)}const w=f(l,["toolUsePromptTokensDetails"]);if(w!=null){let A=w;Array.isArray(A)&&(A=A.map(_=>Wi(a,_))),m(s,["toolUsePromptTokensDetails"],A)}const C=f(l,["trafficType"]);return C!=null&&m(s,["trafficType"],C),s}function _2(a,l){const s={},r=f(l,["timeLeft"]);return r!=null&&m(s,["timeLeft"],r),s}function D2(a,l){const s={},r=f(l,["timeLeft"]);return r!=null&&m(s,["timeLeft"],r),s}function R2(a,l){const s={},r=f(l,["newHandle"]);r!=null&&m(s,["newHandle"],r);const o=f(l,["resumable"]);o!=null&&m(s,["resumable"],o);const u=f(l,["lastConsumedClientMessageIndex"]);return u!=null&&m(s,["lastConsumedClientMessageIndex"],u),s}function I2(a,l){const s={},r=f(l,["newHandle"]);r!=null&&m(s,["newHandle"],r);const o=f(l,["resumable"]);o!=null&&m(s,["resumable"],o);const u=f(l,["lastConsumedClientMessageIndex"]);return u!=null&&m(s,["lastConsumedClientMessageIndex"],u),s}function k2(a,l){const s={};f(l,["setupComplete"])!=null&&m(s,["setupComplete"],f2());const o=f(l,["serverContent"]);o!=null&&m(s,["serverContent"],b2(a,o));const u=f(l,["toolCall"]);u!=null&&m(s,["toolCall"],C2(a,u));const h=f(l,["toolCallCancellation"]);h!=null&&m(s,["toolCallCancellation"],S2(a,h));const p=f(l,["usageMetadata"]);p!=null&&m(s,["usageMetadata"],A2(a,p));const y=f(l,["goAway"]);y!=null&&m(s,["goAway"],_2(a,y));const x=f(l,["sessionResumptionUpdate"]);return x!=null&&m(s,["sessionResumptionUpdate"],R2(a,x)),s}function L2(a,l){const s={};f(l,["setupComplete"])!=null&&m(s,["setupComplete"],m2());const o=f(l,["serverContent"]);o!=null&&m(s,["serverContent"],N2(a,o));const u=f(l,["toolCall"]);u!=null&&m(s,["toolCall"],T2(a,u));const h=f(l,["toolCallCancellation"]);h!=null&&m(s,["toolCallCancellation"],E2(a,h));const p=f(l,["usageMetadata"]);p!=null&&m(s,["usageMetadata"],M2(a,p));const y=f(l,["goAway"]);y!=null&&m(s,["goAway"],D2(a,y));const x=f(l,["sessionResumptionUpdate"]);return x!=null&&m(s,["sessionResumptionUpdate"],I2(a,x)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(a,l){const s={};if(f(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(l,["data"]);r!=null&&m(s,["data"],r);const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function O2(a,l){const s={};if(f(l,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=f(l,["thought"]);r!=null&&m(s,["thought"],r);const o=f(l,["inlineData"]);o!=null&&m(s,["inlineData"],U2(a,o));const u=f(l,["codeExecutionResult"]);u!=null&&m(s,["codeExecutionResult"],u);const h=f(l,["executableCode"]);h!=null&&m(s,["executableCode"],h);const p=f(l,["fileData"]);p!=null&&m(s,["fileData"],p);const y=f(l,["functionCall"]);y!=null&&m(s,["functionCall"],y);const x=f(l,["functionResponse"]);x!=null&&m(s,["functionResponse"],x);const v=f(l,["text"]);return v!=null&&m(s,["text"],v),s}function Ar(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>O2(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function P2(a,l){const s={};if(f(l,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(l,["category"]);r!=null&&m(s,["category"],r);const o=f(l,["threshold"]);return o!=null&&m(s,["threshold"],o),s}function B2(){return{}}function V2(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["dynamicThreshold"]);return o!=null&&m(s,["dynamicThreshold"],o),s}function z2(a,l){const s={},r=f(l,["dynamicRetrievalConfig"]);return r!=null&&m(s,["dynamicRetrievalConfig"],V2(a,r)),s}function q2(a,l){const s={};if(f(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");f(l,["googleSearch"])!=null&&m(s,["googleSearch"],B2());const o=f(l,["googleSearchRetrieval"]);if(o!=null&&m(s,["googleSearchRetrieval"],z2(a,o)),f(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(l,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=f(l,["codeExecution"]);u!=null&&m(s,["codeExecution"],u);const h=f(l,["functionDeclarations"]);return h!=null&&m(s,["functionDeclarations"],h),s}function G2(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["allowedFunctionNames"]);return o!=null&&m(s,["allowedFunctionNames"],o),s}function H2(a,l){const s={},r=f(l,["functionCallingConfig"]);if(r!=null&&m(s,["functionCallingConfig"],G2(a,r)),f(l,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return s}function F2(a,l){const s={},r=f(l,["voiceName"]);return r!=null&&m(s,["voiceName"],r),s}function Y2(a,l){const s={},r=f(l,["prebuiltVoiceConfig"]);return r!=null&&m(s,["prebuiltVoiceConfig"],F2(a,r)),s}function $2(a,l){const s={},r=f(l,["voiceConfig"]);r!=null&&m(s,["voiceConfig"],Y2(a,r));const o=f(l,["languageCode"]);return o!=null&&m(s,["languageCode"],o),s}function K2(a,l){const s={},r=f(l,["includeThoughts"]);r!=null&&m(s,["includeThoughts"],r);const o=f(l,["thinkingBudget"]);return o!=null&&m(s,["thinkingBudget"],o),s}function J2(a,l,s){const r={},o=f(l,["systemInstruction"]);s!==void 0&&o!=null&&m(s,["systemInstruction"],Ar(a,Nt(a,o)));const u=f(l,["temperature"]);u!=null&&m(r,["temperature"],u);const h=f(l,["topP"]);h!=null&&m(r,["topP"],h);const p=f(l,["topK"]);p!=null&&m(r,["topK"],p);const y=f(l,["candidateCount"]);y!=null&&m(r,["candidateCount"],y);const x=f(l,["maxOutputTokens"]);x!=null&&m(r,["maxOutputTokens"],x);const v=f(l,["stopSequences"]);v!=null&&m(r,["stopSequences"],v);const b=f(l,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const w=f(l,["logprobs"]);w!=null&&m(r,["logprobs"],w);const C=f(l,["presencePenalty"]);C!=null&&m(r,["presencePenalty"],C);const A=f(l,["frequencyPenalty"]);A!=null&&m(r,["frequencyPenalty"],A);const _=f(l,["seed"]);_!=null&&m(r,["seed"],_);const M=f(l,["responseMimeType"]);M!=null&&m(r,["responseMimeType"],M);const k=f(l,["responseSchema"]);if(k!=null&&m(r,["responseSchema"],Sp(a,k)),f(l,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(l,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=f(l,["safetySettings"]);if(s!==void 0&&I!=null){let Z=I;Array.isArray(Z)&&(Z=Z.map(U=>P2(a,U))),m(s,["safetySettings"],Z)}const V=f(l,["tools"]);if(s!==void 0&&V!=null){let Z=Sr(a,V);Array.isArray(Z)&&(Z=Z.map(U=>q2(a,Tr(a,U)))),m(s,["tools"],Z)}const B=f(l,["toolConfig"]);if(s!==void 0&&B!=null&&m(s,["toolConfig"],H2(a,B)),f(l,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=f(l,["cachedContent"]);s!==void 0&&L!=null&&m(s,["cachedContent"],rs(a,L));const te=f(l,["responseModalities"]);te!=null&&m(r,["responseModalities"],te);const W=f(l,["mediaResolution"]);W!=null&&m(r,["mediaResolution"],W);const z=f(l,["speechConfig"]);if(z!=null&&m(r,["speechConfig"],$2(a,Ep(a,z))),f(l,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=f(l,["thinkingConfig"]);return H!=null&&m(r,["thinkingConfig"],K2(a,H)),r}function dg(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);if(o!=null){let h=is(a,o);Array.isArray(h)&&(h=h.map(p=>Ar(a,p))),m(s,["contents"],h)}const u=f(l,["config"]);return u!=null&&m(s,["generationConfig"],J2(a,u,s)),s}function X2(a,l,s){const r={},o=f(l,["taskType"]);s!==void 0&&o!=null&&m(s,["requests[]","taskType"],o);const u=f(l,["title"]);s!==void 0&&u!=null&&m(s,["requests[]","title"],u);const h=f(l,["outputDimensionality"]);if(s!==void 0&&h!=null&&m(s,["requests[]","outputDimensionality"],h),f(l,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(l,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Z2(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);o!=null&&m(s,["requests[]","content"],Tp(a,o));const u=f(l,["config"]);u!=null&&m(s,["config"],X2(a,u,s));const h=f(l,["model"]);return h!==void 0&&m(s,["requests[]","model"],Oe(a,h)),s}function Q2(a,l,s){const r={};if(f(l,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(l,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(l,["numberOfImages"]);s!==void 0&&o!=null&&m(s,["parameters","sampleCount"],o);const u=f(l,["aspectRatio"]);s!==void 0&&u!=null&&m(s,["parameters","aspectRatio"],u);const h=f(l,["guidanceScale"]);if(s!==void 0&&h!=null&&m(s,["parameters","guidanceScale"],h),f(l,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=f(l,["safetyFilterLevel"]);s!==void 0&&p!=null&&m(s,["parameters","safetySetting"],p);const y=f(l,["personGeneration"]);s!==void 0&&y!=null&&m(s,["parameters","personGeneration"],y);const x=f(l,["includeSafetyAttributes"]);s!==void 0&&x!=null&&m(s,["parameters","includeSafetyAttributes"],x);const v=f(l,["includeRaiReason"]);s!==void 0&&v!=null&&m(s,["parameters","includeRaiReason"],v);const b=f(l,["language"]);s!==void 0&&b!=null&&m(s,["parameters","language"],b);const w=f(l,["outputMimeType"]);s!==void 0&&w!=null&&m(s,["parameters","outputOptions","mimeType"],w);const C=f(l,["outputCompressionQuality"]);if(s!==void 0&&C!=null&&m(s,["parameters","outputOptions","compressionQuality"],C),f(l,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(l,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function W2(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["prompt"]);o!=null&&m(s,["instances[0]","prompt"],o);const u=f(l,["config"]);return u!=null&&m(s,["config"],Q2(a,u,s)),s}function ew(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","name"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function tw(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);s!==void 0&&u!=null&&m(s,["_query","pageToken"],u);const h=f(l,["filter"]);s!==void 0&&h!=null&&m(s,["_query","filter"],h);const p=f(l,["queryBase"]);return s!==void 0&&p!=null&&m(s,["_url","models_url"],_p(a,p)),r}function nw(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],tw(a,r,s)),s}function sw(a,l,s){const r={},o=f(l,["displayName"]);s!==void 0&&o!=null&&m(s,["displayName"],o);const u=f(l,["description"]);s!==void 0&&u!=null&&m(s,["description"],u);const h=f(l,["defaultCheckpointId"]);return s!==void 0&&h!=null&&m(s,["defaultCheckpointId"],h),r}function lw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","name"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],sw(a,o,s)),s}function aw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","name"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function iw(a,l){const s={};if(f(l,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(l,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(l,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function rw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);if(o!=null){let h=is(a,o);Array.isArray(h)&&(h=h.map(p=>Ar(a,p))),m(s,["contents"],h)}const u=f(l,["config"]);return u!=null&&m(s,["config"],iw(a,u)),s}function ow(a,l){const s={};if(f(l,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=f(l,["imageBytes"]);r!=null&&m(s,["bytesBase64Encoded"],os(a,r));const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function cw(a,l,s){const r={},o=f(l,["numberOfVideos"]);if(s!==void 0&&o!=null&&m(s,["parameters","sampleCount"],o),f(l,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(l,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=f(l,["durationSeconds"]);if(s!==void 0&&u!=null&&m(s,["parameters","durationSeconds"],u),f(l,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(l,["aspectRatio"]);if(s!==void 0&&h!=null&&m(s,["parameters","aspectRatio"],h),f(l,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const p=f(l,["personGeneration"]);if(s!==void 0&&p!=null&&m(s,["parameters","personGeneration"],p),f(l,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(l,["negativePrompt"]);if(s!==void 0&&y!=null&&m(s,["parameters","negativePrompt"],y),f(l,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function uw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["prompt"]);o!=null&&m(s,["instances[0]","prompt"],o);const u=f(l,["image"]);u!=null&&m(s,["instances[0]","image"],ow(a,u));const h=f(l,["config"]);return h!=null&&m(s,["config"],cw(a,h,s)),s}function dw(a,l){const s={},r=f(l,["displayName"]);r!=null&&m(s,["displayName"],r);const o=f(l,["data"]);o!=null&&m(s,["data"],o);const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function fw(a,l){const s={},r=f(l,["videoMetadata"]);r!=null&&m(s,["videoMetadata"],r);const o=f(l,["thought"]);o!=null&&m(s,["thought"],o);const u=f(l,["inlineData"]);u!=null&&m(s,["inlineData"],dw(a,u));const h=f(l,["codeExecutionResult"]);h!=null&&m(s,["codeExecutionResult"],h);const p=f(l,["executableCode"]);p!=null&&m(s,["executableCode"],p);const y=f(l,["fileData"]);y!=null&&m(s,["fileData"],y);const x=f(l,["functionCall"]);x!=null&&m(s,["functionCall"],x);const v=f(l,["functionResponse"]);v!=null&&m(s,["functionResponse"],v);const b=f(l,["text"]);return b!=null&&m(s,["text"],b),s}function wl(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>fw(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function mw(a,l){const s={},r=f(l,["featureSelectionPreference"]);return r!=null&&m(s,["featureSelectionPreference"],r),s}function hw(a,l){const s={},r=f(l,["method"]);r!=null&&m(s,["method"],r);const o=f(l,["category"]);o!=null&&m(s,["category"],o);const u=f(l,["threshold"]);return u!=null&&m(s,["threshold"],u),s}function xw(){return{}}function gw(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["dynamicThreshold"]);return o!=null&&m(s,["dynamicThreshold"],o),s}function pw(a,l){const s={},r=f(l,["dynamicRetrievalConfig"]);return r!=null&&m(s,["dynamicRetrievalConfig"],gw(a,r)),s}function yw(){return{}}function vw(a,l){const s={},r=f(l,["apiKeyString"]);return r!=null&&m(s,["apiKeyString"],r),s}function bw(a,l){const s={},r=f(l,["apiKeyConfig"]);r!=null&&m(s,["apiKeyConfig"],vw(a,r));const o=f(l,["authType"]);o!=null&&m(s,["authType"],o);const u=f(l,["googleServiceAccountConfig"]);u!=null&&m(s,["googleServiceAccountConfig"],u);const h=f(l,["httpBasicAuthConfig"]);h!=null&&m(s,["httpBasicAuthConfig"],h);const p=f(l,["oauthConfig"]);p!=null&&m(s,["oauthConfig"],p);const y=f(l,["oidcConfig"]);return y!=null&&m(s,["oidcConfig"],y),s}function Nw(a,l){const s={},r=f(l,["authConfig"]);return r!=null&&m(s,["authConfig"],bw(a,r)),s}function Ip(a,l){const s={},r=f(l,["retrieval"]);r!=null&&m(s,["retrieval"],r),f(l,["googleSearch"])!=null&&m(s,["googleSearch"],xw());const u=f(l,["googleSearchRetrieval"]);u!=null&&m(s,["googleSearchRetrieval"],pw(a,u)),f(l,["enterpriseWebSearch"])!=null&&m(s,["enterpriseWebSearch"],yw());const p=f(l,["googleMaps"]);p!=null&&m(s,["googleMaps"],Nw(a,p));const y=f(l,["codeExecution"]);y!=null&&m(s,["codeExecution"],y);const x=f(l,["functionDeclarations"]);return x!=null&&m(s,["functionDeclarations"],x),s}function jw(a,l){const s={},r=f(l,["mode"]);r!=null&&m(s,["mode"],r);const o=f(l,["allowedFunctionNames"]);return o!=null&&m(s,["allowedFunctionNames"],o),s}function ww(a,l){const s={},r=f(l,["latitude"]);r!=null&&m(s,["latitude"],r);const o=f(l,["longitude"]);return o!=null&&m(s,["longitude"],o),s}function Cw(a,l){const s={},r=f(l,["latLng"]);return r!=null&&m(s,["latLng"],ww(a,r)),s}function Tw(a,l){const s={},r=f(l,["functionCallingConfig"]);r!=null&&m(s,["functionCallingConfig"],jw(a,r));const o=f(l,["retrievalConfig"]);return o!=null&&m(s,["retrievalConfig"],Cw(a,o)),s}function Sw(a,l){const s={},r=f(l,["voiceName"]);return r!=null&&m(s,["voiceName"],r),s}function Ew(a,l){const s={},r=f(l,["prebuiltVoiceConfig"]);return r!=null&&m(s,["prebuiltVoiceConfig"],Sw(a,r)),s}function Aw(a,l){const s={},r=f(l,["voiceConfig"]);r!=null&&m(s,["voiceConfig"],Ew(a,r));const o=f(l,["languageCode"]);return o!=null&&m(s,["languageCode"],o),s}function Mw(a,l){const s={},r=f(l,["includeThoughts"]);r!=null&&m(s,["includeThoughts"],r);const o=f(l,["thinkingBudget"]);return o!=null&&m(s,["thinkingBudget"],o),s}function _w(a,l,s){const r={},o=f(l,["systemInstruction"]);s!==void 0&&o!=null&&m(s,["systemInstruction"],wl(a,Nt(a,o)));const u=f(l,["temperature"]);u!=null&&m(r,["temperature"],u);const h=f(l,["topP"]);h!=null&&m(r,["topP"],h);const p=f(l,["topK"]);p!=null&&m(r,["topK"],p);const y=f(l,["candidateCount"]);y!=null&&m(r,["candidateCount"],y);const x=f(l,["maxOutputTokens"]);x!=null&&m(r,["maxOutputTokens"],x);const v=f(l,["stopSequences"]);v!=null&&m(r,["stopSequences"],v);const b=f(l,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const w=f(l,["logprobs"]);w!=null&&m(r,["logprobs"],w);const C=f(l,["presencePenalty"]);C!=null&&m(r,["presencePenalty"],C);const A=f(l,["frequencyPenalty"]);A!=null&&m(r,["frequencyPenalty"],A);const _=f(l,["seed"]);_!=null&&m(r,["seed"],_);const M=f(l,["responseMimeType"]);M!=null&&m(r,["responseMimeType"],M);const k=f(l,["responseSchema"]);k!=null&&m(r,["responseSchema"],Sp(a,k));const I=f(l,["routingConfig"]);I!=null&&m(r,["routingConfig"],I);const V=f(l,["modelSelectionConfig"]);V!=null&&m(r,["modelConfig"],mw(a,V));const B=f(l,["safetySettings"]);if(s!==void 0&&B!=null){let P=B;Array.isArray(P)&&(P=P.map(E=>hw(a,E))),m(s,["safetySettings"],P)}const L=f(l,["tools"]);if(s!==void 0&&L!=null){let P=Sr(a,L);Array.isArray(P)&&(P=P.map(E=>Ip(a,Tr(a,E)))),m(s,["tools"],P)}const te=f(l,["toolConfig"]);s!==void 0&&te!=null&&m(s,["toolConfig"],Tw(a,te));const W=f(l,["labels"]);s!==void 0&&W!=null&&m(s,["labels"],W);const z=f(l,["cachedContent"]);s!==void 0&&z!=null&&m(s,["cachedContent"],rs(a,z));const H=f(l,["responseModalities"]);H!=null&&m(r,["responseModalities"],H);const Z=f(l,["mediaResolution"]);Z!=null&&m(r,["mediaResolution"],Z);const U=f(l,["speechConfig"]);U!=null&&m(r,["speechConfig"],Aw(a,Ep(a,U)));const ae=f(l,["audioTimestamp"]);ae!=null&&m(r,["audioTimestamp"],ae);const $=f(l,["thinkingConfig"]);return $!=null&&m(r,["thinkingConfig"],Mw(a,$)),r}function fg(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);if(o!=null){let h=is(a,o);Array.isArray(h)&&(h=h.map(p=>wl(a,p))),m(s,["contents"],h)}const u=f(l,["config"]);return u!=null&&m(s,["generationConfig"],_w(a,u,s)),s}function Dw(a,l,s){const r={},o=f(l,["taskType"]);s!==void 0&&o!=null&&m(s,["instances[]","task_type"],o);const u=f(l,["title"]);s!==void 0&&u!=null&&m(s,["instances[]","title"],u);const h=f(l,["outputDimensionality"]);s!==void 0&&h!=null&&m(s,["parameters","outputDimensionality"],h);const p=f(l,["mimeType"]);s!==void 0&&p!=null&&m(s,["instances[]","mimeType"],p);const y=f(l,["autoTruncate"]);return s!==void 0&&y!=null&&m(s,["parameters","autoTruncate"],y),r}function Rw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);o!=null&&m(s,["instances[]","content"],Tp(a,o));const u=f(l,["config"]);return u!=null&&m(s,["config"],Dw(a,u,s)),s}function Iw(a,l,s){const r={},o=f(l,["outputGcsUri"]);s!==void 0&&o!=null&&m(s,["parameters","storageUri"],o);const u=f(l,["negativePrompt"]);s!==void 0&&u!=null&&m(s,["parameters","negativePrompt"],u);const h=f(l,["numberOfImages"]);s!==void 0&&h!=null&&m(s,["parameters","sampleCount"],h);const p=f(l,["aspectRatio"]);s!==void 0&&p!=null&&m(s,["parameters","aspectRatio"],p);const y=f(l,["guidanceScale"]);s!==void 0&&y!=null&&m(s,["parameters","guidanceScale"],y);const x=f(l,["seed"]);s!==void 0&&x!=null&&m(s,["parameters","seed"],x);const v=f(l,["safetyFilterLevel"]);s!==void 0&&v!=null&&m(s,["parameters","safetySetting"],v);const b=f(l,["personGeneration"]);s!==void 0&&b!=null&&m(s,["parameters","personGeneration"],b);const w=f(l,["includeSafetyAttributes"]);s!==void 0&&w!=null&&m(s,["parameters","includeSafetyAttributes"],w);const C=f(l,["includeRaiReason"]);s!==void 0&&C!=null&&m(s,["parameters","includeRaiReason"],C);const A=f(l,["language"]);s!==void 0&&A!=null&&m(s,["parameters","language"],A);const _=f(l,["outputMimeType"]);s!==void 0&&_!=null&&m(s,["parameters","outputOptions","mimeType"],_);const M=f(l,["outputCompressionQuality"]);s!==void 0&&M!=null&&m(s,["parameters","outputOptions","compressionQuality"],M);const k=f(l,["addWatermark"]);s!==void 0&&k!=null&&m(s,["parameters","addWatermark"],k);const I=f(l,["enhancePrompt"]);return s!==void 0&&I!=null&&m(s,["parameters","enhancePrompt"],I),r}function kw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["prompt"]);o!=null&&m(s,["instances[0]","prompt"],o);const u=f(l,["config"]);return u!=null&&m(s,["config"],Iw(a,u,s)),s}function Hu(a,l){const s={},r=f(l,["gcsUri"]);r!=null&&m(s,["gcsUri"],r);const o=f(l,["imageBytes"]);o!=null&&m(s,["bytesBase64Encoded"],os(a,o));const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function Lw(a,l){const s={},r=f(l,["maskMode"]);r!=null&&m(s,["maskMode"],r);const o=f(l,["segmentationClasses"]);o!=null&&m(s,["maskClasses"],o);const u=f(l,["maskDilation"]);return u!=null&&m(s,["dilation"],u),s}function Uw(a,l){const s={},r=f(l,["controlType"]);r!=null&&m(s,["controlType"],r);const o=f(l,["enableControlImageComputation"]);return o!=null&&m(s,["computeControl"],o),s}function Ow(a,l){const s={},r=f(l,["styleDescription"]);return r!=null&&m(s,["styleDescription"],r),s}function Pw(a,l){const s={},r=f(l,["subjectType"]);r!=null&&m(s,["subjectType"],r);const o=f(l,["subjectDescription"]);return o!=null&&m(s,["subjectDescription"],o),s}function Bw(a,l){const s={},r=f(l,["referenceImage"]);r!=null&&m(s,["referenceImage"],Hu(a,r));const o=f(l,["referenceId"]);o!=null&&m(s,["referenceId"],o);const u=f(l,["referenceType"]);u!=null&&m(s,["referenceType"],u);const h=f(l,["maskImageConfig"]);h!=null&&m(s,["maskImageConfig"],Lw(a,h));const p=f(l,["controlImageConfig"]);p!=null&&m(s,["controlImageConfig"],Uw(a,p));const y=f(l,["styleImageConfig"]);y!=null&&m(s,["styleImageConfig"],Ow(a,y));const x=f(l,["subjectImageConfig"]);return x!=null&&m(s,["subjectImageConfig"],Pw(a,x)),s}function Vw(a,l,s){const r={},o=f(l,["outputGcsUri"]);s!==void 0&&o!=null&&m(s,["parameters","storageUri"],o);const u=f(l,["negativePrompt"]);s!==void 0&&u!=null&&m(s,["parameters","negativePrompt"],u);const h=f(l,["numberOfImages"]);s!==void 0&&h!=null&&m(s,["parameters","sampleCount"],h);const p=f(l,["aspectRatio"]);s!==void 0&&p!=null&&m(s,["parameters","aspectRatio"],p);const y=f(l,["guidanceScale"]);s!==void 0&&y!=null&&m(s,["parameters","guidanceScale"],y);const x=f(l,["seed"]);s!==void 0&&x!=null&&m(s,["parameters","seed"],x);const v=f(l,["safetyFilterLevel"]);s!==void 0&&v!=null&&m(s,["parameters","safetySetting"],v);const b=f(l,["personGeneration"]);s!==void 0&&b!=null&&m(s,["parameters","personGeneration"],b);const w=f(l,["includeSafetyAttributes"]);s!==void 0&&w!=null&&m(s,["parameters","includeSafetyAttributes"],w);const C=f(l,["includeRaiReason"]);s!==void 0&&C!=null&&m(s,["parameters","includeRaiReason"],C);const A=f(l,["language"]);s!==void 0&&A!=null&&m(s,["parameters","language"],A);const _=f(l,["outputMimeType"]);s!==void 0&&_!=null&&m(s,["parameters","outputOptions","mimeType"],_);const M=f(l,["outputCompressionQuality"]);s!==void 0&&M!=null&&m(s,["parameters","outputOptions","compressionQuality"],M);const k=f(l,["editMode"]);s!==void 0&&k!=null&&m(s,["parameters","editMode"],k);const I=f(l,["baseSteps"]);return s!==void 0&&I!=null&&m(s,["parameters","editConfig","baseSteps"],I),r}function zw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["prompt"]);o!=null&&m(s,["instances[0]","prompt"],o);const u=f(l,["referenceImages"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>Bw(a,y))),m(s,["instances[0]","referenceImages"],p)}const h=f(l,["config"]);return h!=null&&m(s,["config"],Vw(a,h,s)),s}function qw(a,l,s){const r={},o=f(l,["includeRaiReason"]);s!==void 0&&o!=null&&m(s,["parameters","includeRaiReason"],o);const u=f(l,["outputMimeType"]);s!==void 0&&u!=null&&m(s,["parameters","outputOptions","mimeType"],u);const h=f(l,["outputCompressionQuality"]);s!==void 0&&h!=null&&m(s,["parameters","outputOptions","compressionQuality"],h);const p=f(l,["numberOfImages"]);s!==void 0&&p!=null&&m(s,["parameters","sampleCount"],p);const y=f(l,["mode"]);return s!==void 0&&y!=null&&m(s,["parameters","mode"],y),r}function Gw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["image"]);o!=null&&m(s,["instances[0]","image"],Hu(a,o));const u=f(l,["upscaleFactor"]);u!=null&&m(s,["parameters","upscaleConfig","upscaleFactor"],u);const h=f(l,["config"]);return h!=null&&m(s,["config"],qw(a,h,s)),s}function Hw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","name"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function Fw(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);s!==void 0&&u!=null&&m(s,["_query","pageToken"],u);const h=f(l,["filter"]);s!==void 0&&h!=null&&m(s,["_query","filter"],h);const p=f(l,["queryBase"]);return s!==void 0&&p!=null&&m(s,["_url","models_url"],_p(a,p)),r}function Yw(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],Fw(a,r,s)),s}function $w(a,l,s){const r={},o=f(l,["displayName"]);s!==void 0&&o!=null&&m(s,["displayName"],o);const u=f(l,["description"]);s!==void 0&&u!=null&&m(s,["description"],u);const h=f(l,["defaultCheckpointId"]);return s!==void 0&&h!=null&&m(s,["defaultCheckpointId"],h),r}function Kw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],$w(a,o,s)),s}function Jw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","name"],Oe(a,r));const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function Xw(a,l,s){const r={},o=f(l,["systemInstruction"]);s!==void 0&&o!=null&&m(s,["systemInstruction"],wl(a,Nt(a,o)));const u=f(l,["tools"]);if(s!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>Ip(a,y))),m(s,["tools"],p)}const h=f(l,["generationConfig"]);return s!==void 0&&h!=null&&m(s,["generationConfig"],h),r}function Zw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);if(o!=null){let h=is(a,o);Array.isArray(h)&&(h=h.map(p=>wl(a,p))),m(s,["contents"],h)}const u=f(l,["config"]);return u!=null&&m(s,["config"],Xw(a,u,s)),s}function Qw(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["contents"]);if(o!=null){let h=is(a,o);Array.isArray(h)&&(h=h.map(p=>wl(a,p))),m(s,["contents"],h)}const u=f(l,["config"]);return u!=null&&m(s,["config"],u),s}function Ww(a,l,s){const r={},o=f(l,["numberOfVideos"]);s!==void 0&&o!=null&&m(s,["parameters","sampleCount"],o);const u=f(l,["outputGcsUri"]);s!==void 0&&u!=null&&m(s,["parameters","storageUri"],u);const h=f(l,["fps"]);s!==void 0&&h!=null&&m(s,["parameters","fps"],h);const p=f(l,["durationSeconds"]);s!==void 0&&p!=null&&m(s,["parameters","durationSeconds"],p);const y=f(l,["seed"]);s!==void 0&&y!=null&&m(s,["parameters","seed"],y);const x=f(l,["aspectRatio"]);s!==void 0&&x!=null&&m(s,["parameters","aspectRatio"],x);const v=f(l,["resolution"]);s!==void 0&&v!=null&&m(s,["parameters","resolution"],v);const b=f(l,["personGeneration"]);s!==void 0&&b!=null&&m(s,["parameters","personGeneration"],b);const w=f(l,["pubsubTopic"]);s!==void 0&&w!=null&&m(s,["parameters","pubsubTopic"],w);const C=f(l,["negativePrompt"]);s!==void 0&&C!=null&&m(s,["parameters","negativePrompt"],C);const A=f(l,["enhancePrompt"]);return s!==void 0&&A!=null&&m(s,["parameters","enhancePrompt"],A),r}function eC(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["_url","model"],Oe(a,r));const o=f(l,["prompt"]);o!=null&&m(s,["instances[0]","prompt"],o);const u=f(l,["image"]);u!=null&&m(s,["instances[0]","image"],Hu(a,u));const h=f(l,["config"]);return h!=null&&m(s,["config"],Ww(a,h,s)),s}function tC(a,l){const s={},r=f(l,["data"]);r!=null&&m(s,["data"],r);const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function nC(a,l){const s={},r=f(l,["thought"]);r!=null&&m(s,["thought"],r);const o=f(l,["inlineData"]);o!=null&&m(s,["inlineData"],tC(a,o));const u=f(l,["codeExecutionResult"]);u!=null&&m(s,["codeExecutionResult"],u);const h=f(l,["executableCode"]);h!=null&&m(s,["executableCode"],h);const p=f(l,["fileData"]);p!=null&&m(s,["fileData"],p);const y=f(l,["functionCall"]);y!=null&&m(s,["functionCall"],y);const x=f(l,["functionResponse"]);x!=null&&m(s,["functionResponse"],x);const v=f(l,["text"]);return v!=null&&m(s,["text"],v),s}function sC(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>nC(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function lC(a,l){const s={},r=f(l,["citationSources"]);return r!=null&&m(s,["citations"],r),s}function aC(a,l){const s={},r=f(l,["content"]);r!=null&&m(s,["content"],sC(a,r));const o=f(l,["citationMetadata"]);o!=null&&m(s,["citationMetadata"],lC(a,o));const u=f(l,["tokenCount"]);u!=null&&m(s,["tokenCount"],u);const h=f(l,["finishReason"]);h!=null&&m(s,["finishReason"],h);const p=f(l,["avgLogprobs"]);p!=null&&m(s,["avgLogprobs"],p);const y=f(l,["groundingMetadata"]);y!=null&&m(s,["groundingMetadata"],y);const x=f(l,["index"]);x!=null&&m(s,["index"],x);const v=f(l,["logprobsResult"]);v!=null&&m(s,["logprobsResult"],v);const b=f(l,["safetyRatings"]);return b!=null&&m(s,["safetyRatings"],b),s}function mg(a,l){const s={},r=f(l,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>aC(a,y))),m(s,["candidates"],p)}const o=f(l,["modelVersion"]);o!=null&&m(s,["modelVersion"],o);const u=f(l,["promptFeedback"]);u!=null&&m(s,["promptFeedback"],u);const h=f(l,["usageMetadata"]);return h!=null&&m(s,["usageMetadata"],h),s}function iC(a,l){const s={},r=f(l,["values"]);return r!=null&&m(s,["values"],r),s}function rC(){return{}}function oC(a,l){const s={},r=f(l,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>iC(a,h))),m(s,["embeddings"],u)}return f(l,["metadata"])!=null&&m(s,["metadata"],rC()),s}function cC(a,l){const s={},r=f(l,["bytesBase64Encoded"]);r!=null&&m(s,["imageBytes"],os(a,r));const o=f(l,["mimeType"]);return o!=null&&m(s,["mimeType"],o),s}function kp(a,l){const s={},r=f(l,["safetyAttributes","categories"]);r!=null&&m(s,["categories"],r);const o=f(l,["safetyAttributes","scores"]);o!=null&&m(s,["scores"],o);const u=f(l,["contentType"]);return u!=null&&m(s,["contentType"],u),s}function uC(a,l){const s={},r=f(l,["_self"]);r!=null&&m(s,["image"],cC(a,r));const o=f(l,["raiFilteredReason"]);o!=null&&m(s,["raiFilteredReason"],o);const u=f(l,["_self"]);return u!=null&&m(s,["safetyAttributes"],kp(a,u)),s}function dC(a,l){const s={},r=f(l,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>uC(a,h))),m(s,["generatedImages"],u)}const o=f(l,["positivePromptSafetyAttributes"]);return o!=null&&m(s,["positivePromptSafetyAttributes"],kp(a,o)),s}function fC(a,l){const s={},r=f(l,["baseModel"]);r!=null&&m(s,["baseModel"],r);const o=f(l,["createTime"]);o!=null&&m(s,["createTime"],o);const u=f(l,["updateTime"]);return u!=null&&m(s,["updateTime"],u),s}function wu(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["displayName"]);o!=null&&m(s,["displayName"],o);const u=f(l,["description"]);u!=null&&m(s,["description"],u);const h=f(l,["version"]);h!=null&&m(s,["version"],h);const p=f(l,["_self"]);p!=null&&m(s,["tunedModelInfo"],fC(a,p));const y=f(l,["inputTokenLimit"]);y!=null&&m(s,["inputTokenLimit"],y);const x=f(l,["outputTokenLimit"]);x!=null&&m(s,["outputTokenLimit"],x);const v=f(l,["supportedGenerationMethods"]);return v!=null&&m(s,["supportedActions"],v),s}function mC(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["_self"]);if(o!=null){let u=Dp(a,o);Array.isArray(u)&&(u=u.map(h=>wu(a,h))),m(s,["models"],u)}return s}function hC(){return{}}function xC(a,l){const s={},r=f(l,["totalTokens"]);r!=null&&m(s,["totalTokens"],r);const o=f(l,["cachedContentTokenCount"]);return o!=null&&m(s,["cachedContentTokenCount"],o),s}function gC(a,l){const s={},r=f(l,["video","uri"]);r!=null&&m(s,["uri"],r);const o=f(l,["video","encodedVideo"]);o!=null&&m(s,["videoBytes"],os(a,o));const u=f(l,["encoding"]);return u!=null&&m(s,["mimeType"],u),s}function pC(a,l){const s={},r=f(l,["_self"]);return r!=null&&m(s,["video"],gC(a,r)),s}function yC(a,l){const s={},r=f(l,["generatedSamples"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>pC(a,p))),m(s,["generatedVideos"],h)}const o=f(l,["raiMediaFilteredCount"]);o!=null&&m(s,["raiMediaFilteredCount"],o);const u=f(l,["raiMediaFilteredReasons"]);return u!=null&&m(s,["raiMediaFilteredReasons"],u),s}function vC(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["metadata"]);o!=null&&m(s,["metadata"],o);const u=f(l,["done"]);u!=null&&m(s,["done"],u);const h=f(l,["error"]);h!=null&&m(s,["error"],h);const p=f(l,["response","generateVideoResponse"]);return p!=null&&m(s,["response"],yC(a,p)),s}function bC(a,l){const s={},r=f(l,["displayName"]);r!=null&&m(s,["displayName"],r);const o=f(l,["data"]);o!=null&&m(s,["data"],o);const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function NC(a,l){const s={},r=f(l,["videoMetadata"]);r!=null&&m(s,["videoMetadata"],r);const o=f(l,["thought"]);o!=null&&m(s,["thought"],o);const u=f(l,["inlineData"]);u!=null&&m(s,["inlineData"],bC(a,u));const h=f(l,["codeExecutionResult"]);h!=null&&m(s,["codeExecutionResult"],h);const p=f(l,["executableCode"]);p!=null&&m(s,["executableCode"],p);const y=f(l,["fileData"]);y!=null&&m(s,["fileData"],y);const x=f(l,["functionCall"]);x!=null&&m(s,["functionCall"],x);const v=f(l,["functionResponse"]);v!=null&&m(s,["functionResponse"],v);const b=f(l,["text"]);return b!=null&&m(s,["text"],b),s}function jC(a,l){const s={},r=f(l,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>NC(a,h))),m(s,["parts"],u)}const o=f(l,["role"]);return o!=null&&m(s,["role"],o),s}function wC(a,l){const s={},r=f(l,["citations"]);return r!=null&&m(s,["citations"],r),s}function CC(a,l){const s={},r=f(l,["content"]);r!=null&&m(s,["content"],jC(a,r));const o=f(l,["citationMetadata"]);o!=null&&m(s,["citationMetadata"],wC(a,o));const u=f(l,["finishMessage"]);u!=null&&m(s,["finishMessage"],u);const h=f(l,["finishReason"]);h!=null&&m(s,["finishReason"],h);const p=f(l,["avgLogprobs"]);p!=null&&m(s,["avgLogprobs"],p);const y=f(l,["groundingMetadata"]);y!=null&&m(s,["groundingMetadata"],y);const x=f(l,["index"]);x!=null&&m(s,["index"],x);const v=f(l,["logprobsResult"]);v!=null&&m(s,["logprobsResult"],v);const b=f(l,["safetyRatings"]);return b!=null&&m(s,["safetyRatings"],b),s}function hg(a,l){const s={},r=f(l,["candidates"]);if(r!=null){let x=r;Array.isArray(x)&&(x=x.map(v=>CC(a,v))),m(s,["candidates"],x)}const o=f(l,["createTime"]);o!=null&&m(s,["createTime"],o);const u=f(l,["responseId"]);u!=null&&m(s,["responseId"],u);const h=f(l,["modelVersion"]);h!=null&&m(s,["modelVersion"],h);const p=f(l,["promptFeedback"]);p!=null&&m(s,["promptFeedback"],p);const y=f(l,["usageMetadata"]);return y!=null&&m(s,["usageMetadata"],y),s}function TC(a,l){const s={},r=f(l,["truncated"]);r!=null&&m(s,["truncated"],r);const o=f(l,["token_count"]);return o!=null&&m(s,["tokenCount"],o),s}function SC(a,l){const s={},r=f(l,["values"]);r!=null&&m(s,["values"],r);const o=f(l,["statistics"]);return o!=null&&m(s,["statistics"],TC(a,o)),s}function EC(a,l){const s={},r=f(l,["billableCharacterCount"]);return r!=null&&m(s,["billableCharacterCount"],r),s}function AC(a,l){const s={},r=f(l,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>SC(a,h))),m(s,["embeddings"],u)}const o=f(l,["metadata"]);return o!=null&&m(s,["metadata"],EC(a,o)),s}function MC(a,l){const s={},r=f(l,["gcsUri"]);r!=null&&m(s,["gcsUri"],r);const o=f(l,["bytesBase64Encoded"]);o!=null&&m(s,["imageBytes"],os(a,o));const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function Lp(a,l){const s={},r=f(l,["safetyAttributes","categories"]);r!=null&&m(s,["categories"],r);const o=f(l,["safetyAttributes","scores"]);o!=null&&m(s,["scores"],o);const u=f(l,["contentType"]);return u!=null&&m(s,["contentType"],u),s}function Fu(a,l){const s={},r=f(l,["_self"]);r!=null&&m(s,["image"],MC(a,r));const o=f(l,["raiFilteredReason"]);o!=null&&m(s,["raiFilteredReason"],o);const u=f(l,["_self"]);u!=null&&m(s,["safetyAttributes"],Lp(a,u));const h=f(l,["prompt"]);return h!=null&&m(s,["enhancedPrompt"],h),s}function _C(a,l){const s={},r=f(l,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>Fu(a,h))),m(s,["generatedImages"],u)}const o=f(l,["positivePromptSafetyAttributes"]);return o!=null&&m(s,["positivePromptSafetyAttributes"],Lp(a,o)),s}function DC(a,l){const s={},r=f(l,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>Fu(a,u))),m(s,["generatedImages"],o)}return s}function RC(a,l){const s={},r=f(l,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>Fu(a,u))),m(s,["generatedImages"],o)}return s}function IC(a,l){const s={},r=f(l,["endpoint"]);r!=null&&m(s,["name"],r);const o=f(l,["deployedModelId"]);return o!=null&&m(s,["deployedModelId"],o),s}function kC(a,l){const s={},r=f(l,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&m(s,["baseModel"],r);const o=f(l,["createTime"]);o!=null&&m(s,["createTime"],o);const u=f(l,["updateTime"]);return u!=null&&m(s,["updateTime"],u),s}function LC(a,l){const s={},r=f(l,["checkpointId"]);r!=null&&m(s,["checkpointId"],r);const o=f(l,["epoch"]);o!=null&&m(s,["epoch"],o);const u=f(l,["step"]);return u!=null&&m(s,["step"],u),s}function Cu(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["displayName"]);o!=null&&m(s,["displayName"],o);const u=f(l,["description"]);u!=null&&m(s,["description"],u);const h=f(l,["versionId"]);h!=null&&m(s,["version"],h);const p=f(l,["deployedModels"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(C=>IC(a,C))),m(s,["endpoints"],w)}const y=f(l,["labels"]);y!=null&&m(s,["labels"],y);const x=f(l,["_self"]);x!=null&&m(s,["tunedModelInfo"],kC(a,x));const v=f(l,["defaultCheckpointId"]);v!=null&&m(s,["defaultCheckpointId"],v);const b=f(l,["checkpoints"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(C=>LC(a,C))),m(s,["checkpoints"],w)}return s}function UC(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["_self"]);if(o!=null){let u=Dp(a,o);Array.isArray(u)&&(u=u.map(h=>Cu(a,h))),m(s,["models"],u)}return s}function OC(){return{}}function PC(a,l){const s={},r=f(l,["totalTokens"]);return r!=null&&m(s,["totalTokens"],r),s}function BC(a,l){const s={},r=f(l,["tokensInfo"]);return r!=null&&m(s,["tokensInfo"],r),s}function VC(a,l){const s={},r=f(l,["gcsUri"]);r!=null&&m(s,["uri"],r);const o=f(l,["bytesBase64Encoded"]);o!=null&&m(s,["videoBytes"],os(a,o));const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function zC(a,l){const s={},r=f(l,["_self"]);return r!=null&&m(s,["video"],VC(a,r)),s}function qC(a,l){const s={},r=f(l,["videos"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>zC(a,p))),m(s,["generatedVideos"],h)}const o=f(l,["raiMediaFilteredCount"]);o!=null&&m(s,["raiMediaFilteredCount"],o);const u=f(l,["raiMediaFilteredReasons"]);return u!=null&&m(s,["raiMediaFilteredReasons"],u),s}function GC(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["metadata"]);o!=null&&m(s,["metadata"],o);const u=f(l,["done"]);u!=null&&m(s,["done"],u);const h=f(l,["error"]);h!=null&&m(s,["error"],h);const p=f(l,["response"]);return p!=null&&m(s,["response"],qC(a,p)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FC(a,l,s){const r=new cj;let o;if(s.data instanceof Blob?o=JSON.parse(await s.data.text()):o=JSON.parse(s.data),a.isVertexAI()){const u=L2(a,o);Object.assign(r,u)}else{const u=k2(a,o);Object.assign(r,u)}l(r)}class YC{constructor(l,s,r){this.apiClient=l,this.auth=s,this.webSocketFactory=r}async connect(l){var s,r,o,u;const h=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const x=XC(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())y=`${h}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x);else{const B=this.apiClient.getApiKey();y=`${h}/ws/google.ai.generativelanguage.${p}.GenerativeService.BidiGenerateContent?key=${B}`}let v=()=>{};const b=new Promise(B=>{v=B}),w=l.callbacks,C=function(){var B;(B=w==null?void 0:w.onopen)===null||B===void 0||B.call(w),v({})},A=this.apiClient,_={onopen:C,onmessage:B=>{FC(A,w.onmessage,B)},onerror:(s=w==null?void 0:w.onerror)!==null&&s!==void 0?s:function(B){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(B){}},M=this.webSocketFactory.create(y,JC(x),_);M.connect(),await b;let k=Oe(this.apiClient,l.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const B=this.apiClient.getProject(),L=this.apiClient.getLocation();k=`projects/${B}/locations/${L}/`+k}let I={};this.apiClient.isVertexAI()&&((o=l.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(l.config===void 0?l.config={responseModalities:[pr.AUDIO]}:l.config.responseModalities=[pr.AUDIO]),!((u=l.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V={model:k,config:l.config,callbacks:l.callbacks};return this.apiClient.isVertexAI()?I=a2(this.apiClient,V):I=l2(this.apiClient,V),delete I.config,M.send(JSON.stringify(I)),new KC(M,this.apiClient)}}const $C={turnComplete:!0};class KC{constructor(l,s){this.conn=l,this.apiClient=s}tLiveClientContent(l,s){if(s.turns!==null&&s.turns!==void 0){let r=[];try{r=is(l,s.turns),l.isVertexAI()?r=r.map(o=>wl(l,o)):r=r.map(o=>Ar(l,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:r,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(l,s){let r=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?r=s.functionResponses:r=[s.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const u of r){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!l.isVertexAI()&&!("id"in u))throw new Error(HC)}return{toolResponse:{functionResponses:r}}}sendClientContent(l){l=Object.assign(Object.assign({},$C),l);const s=this.tLiveClientContent(this.apiClient,l);this.conn.send(JSON.stringify(s))}sendRealtimeInput(l){let s={};this.apiClient.isVertexAI()?s={realtimeInput:d2(this.apiClient,l)}:s={realtimeInput:u2(this.apiClient,l)},this.conn.send(JSON.stringify(s))}sendToolResponse(l){if(l.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,l);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function JC(a){const l={};return a.forEach((s,r)=>{l[r]=s}),l}function XC(a){const l=new Headers;for(const[s,r]of Object.entries(a))l.append(s,r);return l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZC extends ka{constructor(l){super(),this.apiClient=l,this.generateContent=async s=>await this.generateContentInternal(s),this.generateContentStream=async s=>await this.generateContentStreamInternal(s),this.generateImages=async s=>await this.generateImagesInternal(s).then(r=>{var o;let u;const h=[];if(r!=null&&r.generatedImages)for(const y of r.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((o=y==null?void 0:y.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?u=y==null?void 0:y.safetyAttributes:h.push(y);let p;return u?p={generatedImages:h,positivePromptSafetyAttributes:u}:p={generatedImages:h},p}),this.list=async s=>{var r;const h={config:Object.assign(Object.assign({},{queryBase:!0}),s==null?void 0:s.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((r=h.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new Er(bl.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(h),h)},this.editImage=async s=>{const r={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(r.referenceImages=s.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async s=>{let r={numberOfImages:1,mode:"upscale"};s.config&&(r=Object.assign(Object.assign({},r),s.config));const o={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:r};return await this.upscaleImageInternal(o)}}async generateContentInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=fg(this.apiClient,l);return p=ve("{model}:generateContent",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=hg(this.apiClient,v),w=new Zi;return Object.assign(w,b),w})}else{const x=dg(this.apiClient,l);return p=ve("{model}:generateContent",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=mg(this.apiClient,v),w=new Zi;return Object.assign(w,b),w})}}async generateContentStreamInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=fg(this.apiClient,l);p=ve("{model}:streamGenerateContent?alt=sse",x._url),y=x._query,delete x.config,delete x._url,delete x._query;const v=this.apiClient;return h=v.requestStream({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}),h.then(function(b){return yr(this,arguments,function*(){var w,C,A,_;try{for(var M=!0,k=Nu(b),I;I=yield dt(k.next()),w=I.done,!w;M=!0){_=I.value,M=!1;const B=hg(v,yield dt(_.json())),L=new Zi;Object.assign(L,B),yield yield dt(L)}}catch(V){C={error:V}}finally{try{!M&&!w&&(A=k.return)&&(yield dt(A.call(k)))}finally{if(C)throw C.error}}})})}else{const x=dg(this.apiClient,l);p=ve("{model}:streamGenerateContent?alt=sse",x._url),y=x._query,delete x.config,delete x._url,delete x._query;const v=this.apiClient;return h=v.requestStream({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}),h.then(function(b){return yr(this,arguments,function*(){var w,C,A,_;try{for(var M=!0,k=Nu(b),I;I=yield dt(k.next()),w=I.done,!w;M=!0){_=I.value,M=!1;const B=mg(v,yield dt(_.json())),L=new Zi;Object.assign(L,B),yield yield dt(L)}}catch(V){C={error:V}}finally{try{!M&&!w&&(A=k.return)&&(yield dt(A.call(k)))}finally{if(C)throw C.error}}})})}}async embedContent(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Rw(this.apiClient,l);return p=ve("{model}:predict",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=AC(this.apiClient,v),w=new Qx;return Object.assign(w,b),w})}else{const x=Z2(this.apiClient,l);return p=ve("{model}:batchEmbedContents",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=oC(this.apiClient,v),w=new Qx;return Object.assign(w,b),w})}}async generateImagesInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=kw(this.apiClient,l);return p=ve("{model}:predict",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=_C(this.apiClient,v),w=new Wx;return Object.assign(w,b),w})}else{const x=W2(this.apiClient,l);return p=ve("{model}:predict",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=dC(this.apiClient,v),w=new Wx;return Object.assign(w,b),w})}}async editImageInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI()){const p=zw(this.apiClient,l);return u=ve("{model}:predict",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>{const x=DC(this.apiClient,y),v=new sj;return Object.assign(v,x),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI()){const p=Gw(this.apiClient,l);return u=ve("{model}:predict",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>{const x=RC(this.apiClient,y),v=new lj;return Object.assign(v,x),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Hw(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>Cu(this.apiClient,v))}else{const x=ew(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>wu(this.apiClient,v))}}async listInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Yw(this.apiClient,l);return p=ve("{models_url}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=UC(this.apiClient,v),w=new eg;return Object.assign(w,b),w})}else{const x=nw(this.apiClient,l);return p=ve("{models_url}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=mC(this.apiClient,v),w=new eg;return Object.assign(w,b),w})}}async update(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Kw(this.apiClient,l);return p=ve("{model}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"PATCH",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>Cu(this.apiClient,v))}else{const x=lw(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"PATCH",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>wu(this.apiClient,v))}}async delete(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Jw(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(()=>{const v=OC(),b=new tg;return Object.assign(b,v),b})}else{const x=aw(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(()=>{const v=hC(),b=new tg;return Object.assign(b,v),b})}}async countTokens(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=Zw(this.apiClient,l);return p=ve("{model}:countTokens",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=PC(this.apiClient,v),w=new ng;return Object.assign(w,b),w})}else{const x=rw(this.apiClient,l);return p=ve("{model}:countTokens",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=xC(this.apiClient,v),w=new ng;return Object.assign(w,b),w})}}async computeTokens(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI()){const p=Qw(this.apiClient,l);return u=ve("{model}:computeTokens",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>{const x=BC(this.apiClient,y),v=new aj;return Object.assign(v,x),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=eC(this.apiClient,l);return p=ve("{model}:predictLongRunning",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>GC(this.apiClient,v))}else{const x=uw(this.apiClient,l);return p=ve("{model}:predictLongRunning",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>vC(this.apiClient,v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QC(a,l){const s={},r=f(l,["operationName"]);r!=null&&m(s,["_url","operationName"],r);const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function WC(a,l){const s={},r=f(l,["operationName"]);r!=null&&m(s,["_url","operationName"],r);const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function eT(a,l){const s={},r=f(l,["operationName"]);r!=null&&m(s,["operationName"],r);const o=f(l,["resourceName"]);o!=null&&m(s,["_url","resourceName"],o);const u=f(l,["config"]);return u!=null&&m(s,["config"],u),s}function tT(a,l){const s={},r=f(l,["video","uri"]);r!=null&&m(s,["uri"],r);const o=f(l,["video","encodedVideo"]);o!=null&&m(s,["videoBytes"],os(a,o));const u=f(l,["encoding"]);return u!=null&&m(s,["mimeType"],u),s}function nT(a,l){const s={},r=f(l,["_self"]);return r!=null&&m(s,["video"],tT(a,r)),s}function sT(a,l){const s={},r=f(l,["generatedSamples"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>nT(a,p))),m(s,["generatedVideos"],h)}const o=f(l,["raiMediaFilteredCount"]);o!=null&&m(s,["raiMediaFilteredCount"],o);const u=f(l,["raiMediaFilteredReasons"]);return u!=null&&m(s,["raiMediaFilteredReasons"],u),s}function lT(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["metadata"]);o!=null&&m(s,["metadata"],o);const u=f(l,["done"]);u!=null&&m(s,["done"],u);const h=f(l,["error"]);h!=null&&m(s,["error"],h);const p=f(l,["response","generateVideoResponse"]);return p!=null&&m(s,["response"],sT(a,p)),s}function aT(a,l){const s={},r=f(l,["gcsUri"]);r!=null&&m(s,["uri"],r);const o=f(l,["bytesBase64Encoded"]);o!=null&&m(s,["videoBytes"],os(a,o));const u=f(l,["mimeType"]);return u!=null&&m(s,["mimeType"],u),s}function iT(a,l){const s={},r=f(l,["_self"]);return r!=null&&m(s,["video"],aT(a,r)),s}function rT(a,l){const s={},r=f(l,["videos"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>iT(a,p))),m(s,["generatedVideos"],h)}const o=f(l,["raiMediaFilteredCount"]);o!=null&&m(s,["raiMediaFilteredCount"],o);const u=f(l,["raiMediaFilteredReasons"]);return u!=null&&m(s,["raiMediaFilteredReasons"],u),s}function xg(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["metadata"]);o!=null&&m(s,["metadata"],o);const u=f(l,["done"]);u!=null&&m(s,["done"],u);const h=f(l,["error"]);h!=null&&m(s,["error"],h);const p=f(l,["response"]);return p!=null&&m(s,["response"],rT(a,p)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oT extends ka{constructor(l){super(),this.apiClient=l}async getVideosOperation(l){const s=l.operation,r=l.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=s.name.split("/operations/")[0];let u;return r&&"httpOptions"in r&&(u=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:o,config:{httpOptions:u}})}else return this.getVideosOperationInternal({operationName:s.name,config:r})}async getVideosOperationInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=WC(this.apiClient,l);return p=ve("{operationName}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>xg(this.apiClient,v))}else{const x=QC(this.apiClient,l);return p=ve("{operationName}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>lT(this.apiClient,v))}}async fetchPredictVideosOperationInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI()){const p=eT(this.apiClient,l);return u=ve("{resourceName}:fetchPredictOperation",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>xg(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cT="Content-Type",uT="X-Server-Timeout",dT="User-Agent",fT="x-goog-api-client",mT="0.14.1",hT=`google-genai-sdk/${mT}`,xT="v1beta1",gT="v1beta",gg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Up extends Error{constructor(l,s){s?super(l,{cause:s}):super(l,{cause:new Error().stack}),this.message=l,this.name="ClientError"}}class Tu extends Error{constructor(l,s){s?super(l,{cause:s}):super(l,{cause:new Error().stack}),this.message=l,this.name="ServerError"}}class pT{constructor(l){var s,r;this.clientOptions=Object.assign(Object.assign({},l),{project:l.project,location:l.location,apiKey:l.apiKey,vertexai:l.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:xT,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:gT,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,l.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,l.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var l;return(l=this.clientOptions.vertexai)!==null&&l!==void 0?l:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(l){if(!l||l.baseUrl===void 0||l.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[l.baseUrl.endsWith("/")?l.baseUrl.slice(0,-1):l.baseUrl];return l.apiVersion&&l.apiVersion!==""&&r.push(l.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const l=this.getBaseUrl(),s=new URL(l);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(l){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=l;else throw new Error("HTTP options are not correctly set.")}constructUrl(l,s,r){const o=[this.getRequestUrlInternal(s)];return r&&o.push(this.getBaseResourcePath()),l!==""&&o.push(l),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(l){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||l.path.startsWith("projects/")||l.httpMethod==="GET"&&l.path.startsWith("publishers/google/models"))}async request(l){let s=this.clientOptions.httpOptions;l.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,l.httpOptions));const r=this.shouldPrependVertexProjectPath(l),o=this.constructUrl(l.path,s,r);if(l.queryParams)for(const[h,p]of Object.entries(l.queryParams))o.searchParams.append(h,String(p));let u={};if(l.httpMethod==="GET"){if(l.body&&l.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=l.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,s,l.abortSignal),this.unaryApiCall(o,u,l.httpMethod)}patchHttpOptions(l,s){const r=JSON.parse(JSON.stringify(l));for(const[o,u]of Object.entries(s))typeof u=="object"?r[o]=Object.assign(Object.assign({},r[o]),u):u!==void 0&&(r[o]=u);return r}async requestStream(l){let s=this.clientOptions.httpOptions;l.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,l.httpOptions));const r=this.shouldPrependVertexProjectPath(l),o=this.constructUrl(l.path,s,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let u={};return u.body=l.body,u=await this.includeExtraHttpOptionsToRequestInit(u,s,l.abortSignal),this.streamApiCall(o,u,l.httpMethod)}async includeExtraHttpOptionsToRequestInit(l,s,r){if(s&&s.timeout||r){const o=new AbortController,u=o.signal;s.timeout&&(s==null?void 0:s.timeout)>0&&setTimeout(()=>o.abort(),s.timeout),r&&r.addEventListener("abort",()=>{o.abort()}),l.signal=u}return l.headers=await this.getHeadersInternal(s),l}async unaryApiCall(l,s,r){return this.apiCall(l.toString(),Object.assign(Object.assign({},s),{method:r})).then(async o=>(await pg(o),new bu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(l,s,r){return this.apiCall(l.toString(),Object.assign(Object.assign({},s),{method:r})).then(async o=>(await pg(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(l){var s;return yr(this,arguments,function*(){const o=(s=l==null?void 0:l.body)===null||s===void 0?void 0:s.getReader(),u=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let h="";for(;;){const{done:p,value:y}=yield dt(o.read());if(p){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=u.decode(y);try{const b=JSON.parse(x);if("error"in b){const w=JSON.parse(JSON.stringify(b.error)),C=w.status,A=w.code,_=`got status: ${C}. ${JSON.stringify(b)}`;if(A>=400&&A<500)throw new Up(_);if(A>=500&&A<600)throw new Tu(_)}}catch(b){const w=b;if(w.name==="ClientError"||w.name==="ServerError")throw b}h+=x;let v=h.match(gg);for(;v;){const b=v[1];try{const w=new Response(b,{headers:l==null?void 0:l.headers,status:l==null?void 0:l.status,statusText:l==null?void 0:l.statusText});yield yield dt(new bu(w)),h=h.slice(v[0].length),v=h.match(gg)}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}finally{o.releaseLock()}})}async apiCall(l,s){return fetch(l,s).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const l={},s=hT+" "+this.clientOptions.userAgentExtra;return l[dT]=s,l[fT]=s,l[cT]="application/json",l}async getHeadersInternal(l){const s=new Headers;if(l&&l.headers){for(const[r,o]of Object.entries(l.headers))s.append(r,o);l.timeout&&l.timeout>0&&s.append(uT,String(Math.ceil(l.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s),s}async uploadFile(l,s){var r;const o={};s!=null&&(o.mimeType=s.mimeType,o.name=s.name,o.displayName=s.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const u=this.clientOptions.uploader,h=await u.stat(l);o.sizeBytes=String(h.size);const p=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:h.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=p;const y=await this.fetchUploadUrl(o,s);return u.upload(l,y,this)}async downloadFile(l){await this.clientOptions.downloader.download(l,this)}async fetchUploadUrl(l,s){var r;let o={};s!=null&&s.httpOptions?o=s.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${l.mimeType}`}};const u={file:l},h=await this.request({path:ve("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:o});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(r=h==null?void 0:h.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function pg(a){var l;if(a===void 0)throw new Tu("response is undefined");if(!a.ok){const s=a.status,r=a.statusText;let o;!((l=a.headers.get("content-type"))===null||l===void 0)&&l.includes("application/json")?o=await a.json():o={error:{message:await a.text(),code:a.status,status:a.statusText}};const u=`got status: ${s} ${r}. ${JSON.stringify(o)}`;throw s>=400&&s<500?new Up(u):s>=500&&s<600?new Tu(u):new Error(u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yT(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],r);const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function vT(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);s!==void 0&&u!=null&&m(s,["_query","pageToken"],u);const h=f(l,["filter"]);return s!==void 0&&h!=null&&m(s,["_query","filter"],h),r}function bT(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],vT(a,r,s)),s}function NT(a,l){const s={},r=f(l,["textInput"]);r!=null&&m(s,["textInput"],r);const o=f(l,["output"]);return o!=null&&m(s,["output"],o),s}function jT(a,l){const s={};if(f(l,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=f(l,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>NT(a,u))),m(s,["examples","examples"],o)}return s}function wT(a,l,s){const r={};if(f(l,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(l,["tunedModelDisplayName"]);if(s!==void 0&&o!=null&&m(s,["displayName"],o),f(l,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=f(l,["epochCount"]);s!==void 0&&u!=null&&m(s,["tuningTask","hyperparameters","epochCount"],u);const h=f(l,["learningRateMultiplier"]);if(h!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],h),f(l,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(l,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=f(l,["batchSize"]);s!==void 0&&p!=null&&m(s,["tuningTask","hyperparameters","batchSize"],p);const y=f(l,["learningRate"]);return s!==void 0&&y!=null&&m(s,["tuningTask","hyperparameters","learningRate"],y),r}function CT(a,l){const s={},r=f(l,["baseModel"]);r!=null&&m(s,["baseModel"],r);const o=f(l,["trainingDataset"]);o!=null&&m(s,["tuningTask","trainingData"],jT(a,o));const u=f(l,["config"]);return u!=null&&m(s,["config"],wT(a,u,s)),s}function TT(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["_url","name"],r);const o=f(l,["config"]);return o!=null&&m(s,["config"],o),s}function ST(a,l,s){const r={},o=f(l,["pageSize"]);s!==void 0&&o!=null&&m(s,["_query","pageSize"],o);const u=f(l,["pageToken"]);s!==void 0&&u!=null&&m(s,["_query","pageToken"],u);const h=f(l,["filter"]);return s!==void 0&&h!=null&&m(s,["_query","filter"],h),r}function ET(a,l){const s={},r=f(l,["config"]);return r!=null&&m(s,["config"],ST(a,r,s)),s}function AT(a,l,s){const r={},o=f(l,["gcsUri"]);if(s!==void 0&&o!=null&&m(s,["supervisedTuningSpec","trainingDatasetUri"],o),f(l,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function MT(a,l){const s={},r=f(l,["gcsUri"]);return r!=null&&m(s,["validationDatasetUri"],r),s}function _T(a,l,s){const r={},o=f(l,["validationDataset"]);s!==void 0&&o!=null&&m(s,["supervisedTuningSpec"],MT(a,o));const u=f(l,["tunedModelDisplayName"]);s!==void 0&&u!=null&&m(s,["tunedModelDisplayName"],u);const h=f(l,["description"]);s!==void 0&&h!=null&&m(s,["description"],h);const p=f(l,["epochCount"]);s!==void 0&&p!=null&&m(s,["supervisedTuningSpec","hyperParameters","epochCount"],p);const y=f(l,["learningRateMultiplier"]);s!==void 0&&y!=null&&m(s,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const x=f(l,["exportLastCheckpointOnly"]);s!==void 0&&x!=null&&m(s,["supervisedTuningSpec","exportLastCheckpointOnly"],x);const v=f(l,["adapterSize"]);if(s!==void 0&&v!=null&&m(s,["supervisedTuningSpec","hyperParameters","adapterSize"],v),f(l,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(l,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function DT(a,l){const s={},r=f(l,["baseModel"]);r!=null&&m(s,["baseModel"],r);const o=f(l,["trainingDataset"]);o!=null&&m(s,["supervisedTuningSpec","trainingDatasetUri"],AT(a,o,s));const u=f(l,["config"]);return u!=null&&m(s,["config"],_T(a,u,s)),s}function RT(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["model"],r);const o=f(l,["name"]);return o!=null&&m(s,["endpoint"],o),s}function Op(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["state"]);o!=null&&m(s,["state"],Ap(a,o));const u=f(l,["createTime"]);u!=null&&m(s,["createTime"],u);const h=f(l,["tuningTask","startTime"]);h!=null&&m(s,["startTime"],h);const p=f(l,["tuningTask","completeTime"]);p!=null&&m(s,["endTime"],p);const y=f(l,["updateTime"]);y!=null&&m(s,["updateTime"],y);const x=f(l,["description"]);x!=null&&m(s,["description"],x);const v=f(l,["baseModel"]);v!=null&&m(s,["baseModel"],v);const b=f(l,["_self"]);b!=null&&m(s,["tunedModel"],RT(a,b));const w=f(l,["distillationSpec"]);w!=null&&m(s,["distillationSpec"],w);const C=f(l,["experiment"]);C!=null&&m(s,["experiment"],C);const A=f(l,["labels"]);A!=null&&m(s,["labels"],A);const _=f(l,["pipelineJob"]);_!=null&&m(s,["pipelineJob"],_);const M=f(l,["tunedModelDisplayName"]);return M!=null&&m(s,["tunedModelDisplayName"],M),s}function IT(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["tunedModels"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Op(a,h))),m(s,["tuningJobs"],u)}return s}function kT(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["metadata"]);o!=null&&m(s,["metadata"],o);const u=f(l,["done"]);u!=null&&m(s,["done"],u);const h=f(l,["error"]);return h!=null&&m(s,["error"],h),s}function LT(a,l){const s={},r=f(l,["checkpointId"]);r!=null&&m(s,["checkpointId"],r);const o=f(l,["epoch"]);o!=null&&m(s,["epoch"],o);const u=f(l,["step"]);u!=null&&m(s,["step"],u);const h=f(l,["endpoint"]);return h!=null&&m(s,["endpoint"],h),s}function UT(a,l){const s={},r=f(l,["model"]);r!=null&&m(s,["model"],r);const o=f(l,["endpoint"]);o!=null&&m(s,["endpoint"],o);const u=f(l,["checkpoints"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>LT(a,p))),m(s,["checkpoints"],h)}return s}function Su(a,l){const s={},r=f(l,["name"]);r!=null&&m(s,["name"],r);const o=f(l,["state"]);o!=null&&m(s,["state"],Ap(a,o));const u=f(l,["createTime"]);u!=null&&m(s,["createTime"],u);const h=f(l,["startTime"]);h!=null&&m(s,["startTime"],h);const p=f(l,["endTime"]);p!=null&&m(s,["endTime"],p);const y=f(l,["updateTime"]);y!=null&&m(s,["updateTime"],y);const x=f(l,["error"]);x!=null&&m(s,["error"],x);const v=f(l,["description"]);v!=null&&m(s,["description"],v);const b=f(l,["baseModel"]);b!=null&&m(s,["baseModel"],b);const w=f(l,["tunedModel"]);w!=null&&m(s,["tunedModel"],UT(a,w));const C=f(l,["supervisedTuningSpec"]);C!=null&&m(s,["supervisedTuningSpec"],C);const A=f(l,["tuningDataStats"]);A!=null&&m(s,["tuningDataStats"],A);const _=f(l,["encryptionSpec"]);_!=null&&m(s,["encryptionSpec"],_);const M=f(l,["partnerModelTuningSpec"]);M!=null&&m(s,["partnerModelTuningSpec"],M);const k=f(l,["distillationSpec"]);k!=null&&m(s,["distillationSpec"],k);const I=f(l,["experiment"]);I!=null&&m(s,["experiment"],I);const V=f(l,["labels"]);V!=null&&m(s,["labels"],V);const B=f(l,["pipelineJob"]);B!=null&&m(s,["pipelineJob"],B);const L=f(l,["tunedModelDisplayName"]);return L!=null&&m(s,["tunedModelDisplayName"],L),s}function OT(a,l){const s={},r=f(l,["nextPageToken"]);r!=null&&m(s,["nextPageToken"],r);const o=f(l,["tuningJobs"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Su(a,h))),m(s,["tuningJobs"],u)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PT extends ka{constructor(l){super(),this.apiClient=l,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new Er(bl.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(s),s),this.tune=async s=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(s);{const r=await this.tuneMldevInternal(s);let o="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?o=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(o=r.name.split("/operations/")[0]),{name:o,state:vu.JOB_STATE_QUEUED}}}}async getInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=TT(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>Su(this.apiClient,v))}else{const x=yT(this.apiClient,l);return p=ve("{name}",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>Op(this.apiClient,v))}}async listInternal(l){var s,r,o,u;let h,p="",y={};if(this.apiClient.isVertexAI()){const x=ET(this.apiClient,l);return p=ve("tuningJobs",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),h.then(v=>{const b=OT(this.apiClient,v),w=new sg;return Object.assign(w,b),w})}else{const x=bT(this.apiClient,l);return p=ve("tunedModels",x._url),y=x._query,delete x.config,delete x._url,delete x._query,h=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(o=l.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(u=l.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),h.then(v=>{const b=IT(this.apiClient,v),w=new sg;return Object.assign(w,b),w})}}async tuneInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI()){const p=DT(this.apiClient,l);return u=ve("tuningJobs",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>Su(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(l){var s,r;let o,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=CT(this.apiClient,l);return u=ve("tunedModels",p._url),h=p._query,delete p.config,delete p._url,delete p._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=l.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=l.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),o.then(y=>kT(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BT{async download(l,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const VT=1024*1024*8,zT=3,qT=1e3,GT=2,nu="x-goog-upload-status";async function HT(a,l,s){var r,o,u;let h=0,p=0,y=new bu(new Response),x="upload";for(h=a.size;p<h;){const b=Math.min(VT,h-p),w=a.slice(p,p+b);p+b>=h&&(x+=", finalize");let C=0,A=qT;for(;C<zT&&(y=await s.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:l,headers:{"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":String(p),"Content-Length":String(b)}}}),!(!((r=y==null?void 0:y.headers)===null||r===void 0)&&r[nu]));)C++,await YT(A),A=A*GT;if(p+=b,((o=y==null?void 0:y.headers)===null||o===void 0?void 0:o[nu])!=="active")break;if(h<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((u=y==null?void 0:y.headers)===null||u===void 0?void 0:u[nu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function FT(a){return{size:a.size,type:a.type}}function YT(a){return new Promise(l=>setTimeout(l,a))}class $T{async upload(l,s,r){if(typeof l=="string")throw new Error("File path is not supported in browser uploader.");return await HT(l,s,r)}async stat(l){if(typeof l=="string")throw new Error("File path is not supported in browser uploader.");return await FT(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KT{create(l,s,r){return new JT(l,s,r)}}class JT{constructor(l,s,r){this.url=l,this.headers=s,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(l){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(l)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yg="x-goog-api-key";class XT{constructor(l){this.apiKey=l}async addAuthHeaders(l){l.get(yg)===null&&l.append(yg,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZT="gl-node/";class QT{constructor(l){var s;if(l.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(l.project||l.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=l.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=l.apiKey;const r=r1(l,void 0,void 0);r&&(l.httpOptions?l.httpOptions.baseUrl=r:l.httpOptions={baseUrl:r}),this.apiVersion=l.apiVersion;const o=new XT(this.apiKey);this.apiClient=new pT({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:l.httpOptions,userAgentExtra:ZT+"web",uploader:new $T,downloader:new BT}),this.models=new ZC(this.apiClient),this.live=new YC(this.apiClient,o,new KT),this.chats=new hj(this.models,this.apiClient),this.caches=new uj(this.apiClient),this.files=new Ej(this.apiClient),this.operations=new oT(this.apiClient),this.tunings=new PT(this.apiClient)}}const su={},Eu=(su==null?void 0:su.VITE_GEMINI_API_KEY)||void 0||void 0,vg=Eu?new QT({apiKey:Eu}):null,WT=async a=>{if(!Eu||!vg)return console.warn("Gemini API key not set. Falling back to mock optimization."),[...a].map(r=>r.id).sort(()=>Math.random()-.5);const l=a.map(r=>({id:r.id,pickup:r.pickupLocation,destination:r.destination,appointmentTime:r.appointmentTime})),s=`
    You are a route optimization expert for a patient transport service in Bangkok, Thailand.
    Given the following list of rides, determine the most efficient sequence to complete them.
    Consider minimizing travel time and ensuring appointments are met.
    The current time is ${new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})}.
    Return the result as a JSON object with a key "optimizedOrder" which is an array of the ride IDs in the suggested sequence.

    Rides:
    ${JSON.stringify(l,null,2)}
  `;try{const o=(await vg.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:Sa.OBJECT,properties:{optimizedOrder:{type:Sa.ARRAY,items:{type:Sa.STRING},description:"An array of ride IDs in the most efficient sequence."}},required:["optimizedOrder"]}}})).text.trim(),u=JSON.parse(o);if(u&&Array.isArray(u.optimizedOrder))return u.optimizedOrder;throw new Error("Invalid response format from Gemini API")}catch(r){throw console.error("Error calling Gemini API:",r),new Error("Could not get an optimized route from the AI model.")}},eS={width:"100%",height:"250px",borderRadius:"0.5rem",marginBottom:"1rem"},tS=({rides:a})=>t.jsxs("div",{style:eS,className:"flex flex-col items-center justify-center bg-gray-100 text-gray-600 p-4 text-center border border-gray-200 rounded-lg animate-scale-in",children:[t.jsx(as,{className:"h-12 w-12 mb-3 text-gray-400"}),t.jsx("p",{className:"font-semibold",children:"ไม่สามารถแสดงแผนที่ได้"}),t.jsx("p",{className:"text-xs mt-1",children:"(จำเป็นต้องใช้ Google Maps API Key)"})]}),nS=["อา","จ","อ","พ","พฤ","ศ","ส"],sS=({allRides:a,onUpdateStatus:l})=>{const[s,r]=j.useState(me()),[o,u]=j.useState(me().startOf("day")),h=s.startOf("month"),p=s.endOf("month"),y=h.day(),x=j.useMemo(()=>{const M=new Map;return a.forEach(k=>{var V;const I=me(k.appointmentTime).format("YYYY-MM-DD");M.has(I)||M.set(I,[]),(V=M.get(I))==null||V.push(k)}),M},[a]),v=j.useMemo(()=>{const M=[];for(let k=0;k<y;k++)M.push(null);for(let k=1;k<=p.date();k++)M.push(h.date(k));return M},[s]),b=()=>r(s.subtract(1,"month")),w=()=>r(s.add(1,"month")),C=M=>u(M.startOf("day")),A=x.get(o.format("YYYY-MM-DD"))||[],_=fx(o.toDate());return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("button",{onClick:b,className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Zt,{className:"w-6 h-6"})}),t.jsx("h2",{className:"text-lg font-bold text-gray-800",children:s.format("MMMM BBBB")}),t.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Ht,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[nS.map(M=>t.jsx("div",{className:"text-xs font-semibold text-gray-500 py-2",children:M},M)),v.map((M,k)=>t.jsx("div",{className:"py-1",children:M?t.jsxs("button",{onClick:()=>C(M),className:`w-10 h-10 rounded-full flex flex-col items-center justify-center transition-colors relative ${o.isSame(M,"day")?"bg-[#005A9C] text-white":fx(M.toDate())?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,children:[t.jsx("span",{className:"text-sm",children:M.format("D")}),x.has(M.format("YYYY-MM-DD"))&&t.jsx("div",{className:`absolute bottom-1.5 h-1.5 w-1.5 rounded-full ${o.isSame(M,"day")?"bg-white":"bg-[#005A9C]"}`})]}):t.jsx("div",{})},k))]}),t.jsxs("div",{className:"mt-6 border-t pt-4",children:[t.jsxs("h3",{className:"font-bold text-lg mb-2",children:["งานสำหรับวันที่: ",o.format("D MMMM BBBB")]}),t.jsx(Gu,{rides:A,onUpdateStatus:l,isActionable:_})]})]})},Pp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),t.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),t.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),lS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),t.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),t.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),t.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),t.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),t.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),bg=()=>{const[a,l]=j.useState([]),[s,r]=j.useState(!0),[o,u]=j.useState(null),[h,p]=j.useState(!1),[y,x]=j.useState(!1),[v,b]=j.useState("list"),[w,C]=j.useState(!0),A=j.useRef(null),_=j.useCallback(async()=>{r(!0);try{const L=(await an.getMyRides()||[]).map(te=>({id:te.id,patientName:te.patient_name||"",patientPhone:te.patient_phone||"",pickupLocation:te.pickup_location||"",destination:te.destination||"",appointmentTime:te.appointment_time||new Date().toISOString(),status:te.status||ce.ASSIGNED}));l(L)}catch(B){console.error("Failed to load driver rides",B),l([])}finally{r(!1)}},[]);j.useEffect(()=>{_()},[_]),j.useEffect(()=>{if(w){const B=window.setInterval(()=>{_()},3e4);return A.current=B,()=>{A.current&&window.clearInterval(A.current)}}else A.current&&(window.clearInterval(A.current),A.current=null)},[w,_]);const M=B=>{u(B),setTimeout(()=>{u(null)},3e3)},k=j.useCallback(async(B,L)=>{if(a.find(W=>W.id===B))try{await Aa.updateRideStatus(B,L),l(z=>z.map(H=>H.id===B?{...H,status:L}:H));let W="";switch(L){case ce.EN_ROUTE_TO_PICKUP:W="✅ เริ่มเดินทางไปรับผู้ป่วยแล้ว";break;case ce.ARRIVED_AT_PICKUP:W="📍 ถึงจุดรับแล้ว";break;case ce.IN_PROGRESS:W="🚗 รับผู้ป่วยขึ้นรถแล้ว";break;case ce.COMPLETED:W=`🎉 การเดินทาง ${B} เสร็จสิ้น`;break}W&&M(W)}catch(W){console.error("Failed to update ride status",W),M("❌ อัปเดตสถานะไม่สำเร็จ")}},[a]),I=async()=>{const B=a.filter(L=>L.status===ce.ASSIGNED);if(B.length<2){M("ℹ️ มีงานที่ต้องทำน้อยกว่า 2 งาน");return}p(!0);try{const L=await WT(B),te=new Map(a.map(H=>[H.id,H])),W=L.map(H=>te.get(H)).filter(H=>H!==void 0),z=a.filter(H=>!L.includes(H.id));l([...W,...z]),x(!0),setTimeout(()=>x(!1),5e3),M("✨ จัดลำดับการเดินทางให้เรียบร้อยแล้ว!")}catch(L){console.error("Failed to optimize route:",L),M("❌ ไม่สามารถจัดลำดับได้ โปรดลองอีกครั้ง")}finally{p(!1)}};if(s)return t.jsx("div",{className:"flex justify-center items-center h-[60vh]",children:t.jsx(Np,{})});const V=a.filter(B=>{const L=me(B.appointmentTime).isSame(me(),"day"),te=B.status!==ce.COMPLETED&&B.status!==ce.CANCELLED;return L&&te});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"งานของฉัน"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex p-1 bg-gray-200/75 rounded-lg",children:[t.jsxs("button",{onClick:()=>b("list"),className:`px-4 py-1.5 text-sm font-semibold rounded-md transition-colors flex items-center gap-2 ${v==="list"?"bg-white text-[var(--wecare-blue)] shadow-sm":"text-gray-600"}`,children:[t.jsx(lS,{className:"w-5 h-5"}),t.jsx("span",{children:"รายการ"})]}),t.jsxs("button",{onClick:()=>b("calendar"),className:`px-4 py-1.5 text-sm font-semibold rounded-md transition-colors flex items-center gap-2 ${v==="calendar"?"bg-white text-[var(--wecare-blue)] shadow-sm":"text-gray-600"}`,children:[t.jsx(Pp,{className:"w-5 h-5"}),t.jsx("span",{children:"ปฏิทิน"})]})]}),t.jsx("button",{onClick:_,className:"px-4 py-1.5 text-sm font-semibold rounded-md transition-colors text-white bg-gray-600 hover:bg-gray-700","aria-label":"รีเฟรชรายการงานของฉัน",title:"รีเฟรช",children:"รีเฟรช"}),t.jsx("button",{onClick:()=>C(B=>!B),className:`px-4 py-1.5 text-sm font-semibold rounded-md transition-colors ${w?"text-white bg-green-600 hover:bg-green-700":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,"aria-label":w?"หยุดอัปเดตอัตโนมัติ":"เปิดอัปเดตอัตโนมัติ",title:w?"Auto-Update ON":"Auto-Update OFF",children:w?"Auto-Update ON":"Auto-Update OFF"})]})]}),v==="list"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx("button",{onClick:I,disabled:h||V.filter(B=>B.status===ce.ASSIGNED).length<2,className:"w-full flex items-center justify-center gap-2 bg-[var(--wecare-blue)] text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition duration-300 shadow-sm border disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed",children:h?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}),"กำลังประมวลผล..."]}):t.jsxs(t.Fragment,{children:[t.jsx(s1,{className:"w-5 h-5"}),"จัดลำดับให้ฉัน (Powered by Gemini)"]})})}),y&&t.jsx(tS,{rides:V.filter(B=>B.status===ce.ASSIGNED)}),t.jsx(Gu,{rides:V,onUpdateStatus:k,isActionable:!0})]}),v==="calendar"&&t.jsx(sS,{allRides:a,onUpdateStatus:k}),t.jsx(dn,{message:o})]})},aS=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],Je=({name:a,value:l,onChange:s,max:r,min:o,required:u})=>{const[h,p]=j.useState(""),[y,x]=j.useState(""),[v,b]=j.useState("");j.useEffect(()=>{if(l&&l.match(/^\d{4}-\d{2}-\d{2}$/)){const[Z,U,ae]=l.split("-");b((parseInt(Z,10)+543).toString()),x((parseInt(U,10)-1).toString()),p(parseInt(ae,10).toString())}else p(""),x(""),b("")},[l]);const w=(Z,U,ae)=>{if(Z&&U&&ae){const $=parseInt(ae,10)-543,P=parseInt(U,10)+1,E=parseInt(Z,10),S=`${$.toString().padStart(4,"0")}-${P.toString().padStart(2,"0")}-${E.toString().padStart(2,"0")}`;s({target:{name:a,value:S}})}else s({target:{name:a,value:""}})},C=Z=>{const U=Z.target.value;p(U),w(U,y,v)},A=Z=>{const U=Z.target.value;x(U);const ae=z(U,v);parseInt(h,10)>ae?(p(""),w("",U,v)):w(h,U,v)},_=Z=>{const U=Z.target.value;b(U),w(h,y,U)},{maxDay:M,maxMonth:k,maxYear:I}=j.useMemo(()=>{if(!r)return{maxDay:31,maxMonth:11,maxYear:new Date().getFullYear()+543};const[Z,U,ae]=r.split("-").map(Number);return{maxDay:ae,maxMonth:U-1,maxYear:Z+543}},[r]),{minDay:V,minMonth:B,minYear:L}=j.useMemo(()=>{if(!o)return{minDay:1,minMonth:0,minYear:new Date().getFullYear()+543-100};const[Z,U,ae]=o.split("-").map(Number);return{minDay:ae,minMonth:U-1,minYear:Z+543}},[o]),te=j.useMemo(()=>{const Z=[];for(let U=I;U>=L;U--)Z.push(U);return Z},[L,I]),W=j.useMemo(()=>{const Z=parseInt(v,10)===I,U=parseInt(v,10)===L;return aS.map((ae,$)=>({value:$,label:ae,disabled:Z&&$>k||U&&$<B}))},[v,I,k,L,B]),z=(Z,U)=>{if(Z===""||U==="")return 31;const ae=parseInt(U,10)-543,$=parseInt(Z,10);return new Date(ae,$+1,0).getDate()},H=j.useMemo(()=>{const Z=z(y,v),U=parseInt(v,10)===I&&parseInt(y,10)===k,ae=parseInt(v,10)===L&&parseInt(y,10)===B;return Array.from({length:Z},($,P)=>{const E=P+1;return{value:E,disabled:U&&E>M||ae&&E<V}})},[y,v,I,k,M,L,B,V]);return j.useEffect(()=>{const Z=parseInt(v,10),U=parseInt(y,10),ae=parseInt(h,10);let $=!1,P=h,E=y;Z<L||Z===L&&U<B?(E="",P="",$=!0):Z===L&&U===B&&ae<V&&(P="",$=!0),x(E),p(P),$&&w(P,E,v)},[v,y,h,L,B,V]),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:h,onChange:C,required:u,children:[t.jsx("option",{value:"",children:"วัน"}),H.map(Z=>t.jsx("option",{value:Z.value,disabled:Z.disabled,children:Z.value},Z.value))]}),t.jsxs("select",{value:y,onChange:A,required:u,children:[t.jsx("option",{value:"",children:"เดือน"}),W.map(Z=>t.jsx("option",{value:Z.value,disabled:Z.disabled,children:Z.label},Z.value))]}),t.jsxs("select",{value:v,onChange:_,required:u,children:[t.jsx("option",{value:"",children:"ปี (พ.ศ.)"}),te.map(Z=>t.jsx("option",{value:Z,children:Z},Z))]})]})},Mr=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),t.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),iS=[{id:"RIDE-301",patientName:"สมชาย ใจดี",pickupLocation:"123 สุขุมวิท",destination:"รพ. กรุงเทพ",appointmentTime:me().subtract(2,"day").toISOString(),status:ce.COMPLETED},{id:"RIDE-302",patientName:"สมหญิง มีสุข",pickupLocation:"456 พหลโยธิน",destination:"รพ. บำรุงราษฎร์",appointmentTime:me().subtract(5,"day").toISOString(),status:ce.COMPLETED},{id:"RIDE-303",patientName:"อาทิตย์ แจ่มใส",pickupLocation:"789 พระราม 4",destination:"รพ. สมิติเวช",appointmentTime:me().subtract(3,"day").toISOString(),status:ce.CANCELLED},{id:"RIDE-201",patientName:"จันทรา งามวงศ์วาน",pickupLocation:"101 รัชดา",destination:"รพ. รามาธิบดี",appointmentTime:me().subtract(1,"month").toISOString(),status:ce.COMPLETED},{id:"RIDE-202",patientName:"มานี รักเรียน",pickupLocation:"222 เพชรบุรี",destination:"รพ. พญาไท",appointmentTime:me().subtract(1,"month").subtract(2,"day").toISOString(),status:ce.COMPLETED},{id:"RIDE-203",patientName:"ปิติ ชูใจ",pickupLocation:"333 จรัญสนิทวงศ์",destination:"รพ. ศิริราช",appointmentTime:me().subtract(1,"month").subtract(5,"day").toISOString(),status:ce.CANCELLED},{id:"RIDE-101",patientName:"วีระ กล้าหาญ",pickupLocation:"555 ลาดพร้าว",destination:"รพ. ลาดพร้าว",appointmentTime:me().subtract(2,"month").toISOString(),status:ce.COMPLETED}],rS=()=>{const[a,l]=j.useState([]),[s,r]=j.useState(!0),[o,u]=j.useState({startDate:"",endDate:"",status:"All"});j.useEffect(()=>{r(!0),setTimeout(()=>{const v=iS.filter(b=>b.status===ce.COMPLETED||b.status===ce.CANCELLED);l(v),r(!1)},500)},[]);const h=v=>{const{name:b,value:w}=v.target;u(C=>({...C,[b]:w}))},p=()=>{u({startDate:"",endDate:"",status:"All"})},y=j.useMemo(()=>a.filter(v=>{const b=o.status==="All"||v.status===o.status;let w=!0;if(o.startDate&&o.endDate){const C=me(v.appointmentTime);w=C.isSameOrAfter(me(o.startDate),"day")&&C.isSameOrBefore(me(o.endDate),"day")}else o.startDate?w=me(v.appointmentTime).isSameOrAfter(me(o.startDate),"day"):o.endDate&&(w=me(v.appointmentTime).isSameOrBefore(me(o.endDate),"day"));return b&&w}),[a,o]),x=j.useMemo(()=>{const v=a.filter(w=>me(w.appointmentTime).isSame(me(),"week")).length,b=a.filter(w=>me(w.appointmentTime).isSame(me(),"month")).length;return{thisWeek:v,thisMonth:b}},[a]);return s?t.jsx("div",{className:"flex justify-center items-center h-[60vh]",children:t.jsx(Np,{})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ประวัติการเดินทาง"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(ft,{title:"เที่ยววิ่งทั้งหมด (สัปดาห์นี้)",value:x.thisWeek.toString(),icon:wr,variant:"info"}),t.jsx(ft,{title:"เที่ยววิ่งทั้งหมด (เดือนนี้)",value:x.thisMonth.toString(),icon:gu,variant:"success"})]}),t.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200 space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"lg:col-span-1",children:[t.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"จากวันที่"}),t.jsx(Je,{name:"startDate",value:o.startDate,onChange:h})]}),t.jsxs("div",{className:"lg:col-span-1",children:[t.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"ถึงวันที่"}),t.jsx(Je,{name:"endDate",value:o.endDate,onChange:h})]}),t.jsxs("div",{className:"lg:col-span-1",children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"สถานะ"}),t.jsxs("select",{name:"status",value:o.status,onChange:h,className:"w-full",children:[t.jsx("option",{value:"All",children:"ทั้งหมด"}),t.jsx("option",{value:ce.COMPLETED,children:"เสร็จสิ้น"}),t.jsx("option",{value:ce.CANCELLED,children:"ยกเลิก"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 text-sm text-gray-700 hover:text-red-700 font-medium py-2 px-4 rounded-lg bg-gray-100 hover:bg-red-50 transition-colors",children:[t.jsx(Mr,{className:"w-5 h-5"}),t.jsx("span",{children:"ล้างตัวกรอง"})]})})]})}),t.jsx(Gu,{rides:y,onUpdateStatus:()=>{},isActionable:!1})]})},Yu=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),t.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),t.jsx("polyline",{points:"7 3 7 8 15 8"})]}),Qt=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Jt="https://ui-avatars.com/api/?name=User&size=150&background=0D8ABC&color=fff",Bp=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Ng={id:"DRV-001",fullName:"สมศักดิ์ ขยันยิ่ง",phone:"081-234-5678",email:"driver1@wecare.dev",licensePlate:"กท 1234",vehicleBrand:"Toyota",vehicleModel:"Vios",vehicleColor:"บรอนซ์เงิน",vehicleType:"รถยนต์ 4 ประตู",status:Be.AVAILABLE,address:"123 ถนนสุขุมวิท, กรุงเทพฯ",profileImageUrl:"https://i.pravatar.cc/150?u=driver1@wecare.dev",dateCreated:"2023-01-15T10:00:00Z",avgReviewScore:4.8,totalTrips:152,tripsThisMonth:25},Ca=({label:a,value:l,isEditing:s,name:r,onChange:o})=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-500",children:a}),s?t.jsx("input",{type:"text",id:r,name:r,value:l,onChange:o,className:"mt-1"}):t.jsx("p",{className:"mt-1 text-md text-gray-800 font-semibold",children:l||"-"})]}),lu=({icon:a,label:l,value:s})=>t.jsxs("div",{className:"flex items-center p-3 bg-gray-50/75 rounded-lg",children:[t.jsx(a,{className:"w-6 h-6 text-gray-500 mr-4"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:l}),t.jsx("p",{className:"font-bold text-lg text-gray-800",children:s})]})]}),oS=({user:a,onLogout:l})=>{const[s,r]=j.useState(Ng),[o,u]=j.useState(!1),[h,p]=j.useState(null),[y,x]=j.useState(!1),v=A=>{p(A),setTimeout(()=>p(null),3e3)},b=A=>{const{name:_,value:M}=A.target;r(k=>({...k,[_]:M}))},w=A=>{A.preventDefault(),u(!1),v("✅ บันทึกข้อมูลสำเร็จแล้ว!")},C=()=>{r(Ng),u(!1)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("form",{id:"profileForm",onSubmit:w,children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"โปรไฟล์ของฉัน"}),t.jsx("div",{className:"flex items-center gap-3",children:o?t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"ยกเลิก"}),t.jsxs("button",{type:"submit",className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600",children:[t.jsx(Yu,{className:"w-5 h-5 mr-2"}),"บันทึก"]})]}):t.jsxs("button",{type:"button",onClick:()=>u(!0),className:"flex items-center text-sm font-semibold text-white bg-[var(--wecare-blue)] px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Qt,{className:"w-4 h-4 mr-2"}),"แก้ไขข้อมูล"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 mt-6",children:[t.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"ข้อมูลส่วนตัว"}),t.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[t.jsx("img",{src:s.profileImageUrl||Jt,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}),t.jsx("div",{children:t.jsx(Ca,{label:"ชื่อ-นามสกุล",name:"fullName",value:s.fullName,isEditing:o,onChange:b})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx(Ca,{label:"เบอร์โทรศัพท์",name:"phone",value:s.phone,isEditing:o,onChange:b}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"อีเมล"}),t.jsx("p",{className:"mt-1 text-md text-gray-600",children:s.email})]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"ข้อมูลยานพาหนะ"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx(Ca,{label:"ทะเบียนรถ",name:"licensePlate",value:s.licensePlate,isEditing:o,onChange:b}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"ยี่ห้อ / รุ่น"}),t.jsx("p",{className:"mt-1 text-md text-gray-800 font-semibold",children:`${s.vehicleBrand} ${s.vehicleModel}`})]}),t.jsx(Ca,{label:"ประเภทรถ",name:"vehicleType",value:s.vehicleType,isEditing:o,onChange:b}),t.jsx(Ca,{label:"สี",name:"vehicleColor",value:s.vehicleColor,isEditing:o,onChange:b})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"สถิติผลงาน"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(lu,{icon:xr,label:"คะแนนรีวิวเฉลี่ย",value:s.avgReviewScore.toFixed(1)}),t.jsx(lu,{icon:Rt,label:"จำนวนเที่ยววิ่งทั้งหมด",value:s.totalTrips}),t.jsx(lu,{icon:Pp,label:"เป็นสมาชิกตั้งแต่",value:me(s.dateCreated).format("D MMM YYYY")})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"ความปลอดภัย"}),t.jsxs("button",{type:"button",onClick:()=>x(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 px-4 font-semibold text-[var(--wecare-blue)] bg-blue-50 rounded-lg hover:bg-blue-100",children:[t.jsx(Bp,{className:"w-5 h-5"}),"เปลี่ยนรหัสผ่าน"]}),t.jsx("div",{className:"mt-4 border-t pt-4",children:t.jsxs("button",{type:"button",onClick:l,className:"w-full flex items-center justify-center gap-2 bg-red-100 text-red-700 font-bold py-2.5 px-4 rounded-lg hover:bg-red-200 transition duration-300",children:[t.jsx(Pu,{className:"w-5 h-5"}),t.jsx("span",{children:"ออกจากระบบ"})]})})]})]})]})]}),t.jsx(dn,{message:h})]})},fr=8,Vp=18,jg=Vp-fr,cS=({rides:a})=>{const l=Array.from({length:jg+1},(o,u)=>fr+u),r=(o=>{if(!o||o.length===0)return[];const u=[...o].sort((p,y)=>me(p.appointmentTime).diff(me(y.appointmentTime))),h=[];return u.forEach(p=>{let y=!1;for(const x of h){const v=x[x.length-1],b=me(p.appointmentTime),w=me(v.appointmentTime).add(1,"hour");if(!b.isBefore(w)){x.push(p),y=!0;break}}y||h.push([p])}),h})(a);return t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"ตารางเวลาการเดินทางวันนี้"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex h-8 border-b border-gray-200",children:l.slice(0,-1).map(o=>t.jsx("div",{className:"flex-1 border-r border-gray-100 flex items-center justify-center",children:t.jsx("span",{className:"text-xs text-gray-500",children:`${String(o).padStart(2,"0")}:00`})},o))}),t.jsxs("div",{className:"relative mt-2 space-y-1 min-h-[5rem]",children:[r.map((o,u)=>t.jsx("div",{className:"relative h-12",children:o.map(h=>{const p=me(h.appointmentTime);if(p.hour()<fr||p.hour()>=Vp)return null;const y=p.hour()*60+p.minute(),x=fr*60,v=jg*60,b=(y-x)/v*100,w=60/v*100;return t.jsx("div",{className:"absolute top-0 h-full bg-blue-100 border-l-4 border-blue-500 rounded-r-lg p-2 flex items-center shadow-sm hover:z-10 hover:scale-105 transition-transform duration-200",style:{left:`calc(${b}% + 2px)`,width:`calc(${w}% - 4px)`},title:`${h.patientName} @ ${p.format("HH:mm")}`,children:t.jsxs("div",{className:"truncate text-xs w-full",children:[t.jsx("p",{className:"font-bold text-blue-800",children:h.patientName}),t.jsxs("p",{className:"text-blue-600",children:[p.format("HH:mm")," - ",p.add(1,"hour").format("HH:mm")]})]})},h.id)})},u)),a.length===0&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:"ไม่มีการเดินทางที่จ่ายงานแล้วสำหรับวันนี้"})]})]})]})},uS={[Be.AVAILABLE]:{text:"✅ ว่าง",classes:"bg-green-100 text-green-800"},[Be.ON_TRIP]:{text:"🚗 กำลังเดินทาง",classes:"bg-blue-100 text-blue-800"},[Be.OFFLINE]:{text:"⚫ ออฟไลน์",classes:"bg-gray-200 text-gray-700"},[Be.INACTIVE]:{text:"🌙 พัก",classes:"bg-indigo-100 text-indigo-800"}},zp=({status:a})=>{const l=uS[a]||{text:"ไม่ทราบสถานะ",classes:"bg-gray-100 text-gray-800"};return t.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full ${l.classes}`,children:l.text})},dS=()=>{const[a,l]=j.useState([]),[s,r]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const u=await an.getDrivers();l(Array.isArray(u)?u:(u==null?void 0:u.drivers)||[])}catch(u){console.error("Failed to load drivers:",u)}finally{r(!1)}})()},[]),s?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-full",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 p-4 border-b",children:"สถานะคนขับ"}),t.jsx("div",{className:"p-4 flex items-center justify-center",children:t.jsx("div",{className:"text-gray-500",children:"กำลังโหลด..."})})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-full",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 p-4 border-b",children:"สถานะคนขับ"}),t.jsx("div",{className:"p-4 space-y-4 max-h-[calc(100vh-20rem)] overflow-y-auto",children:a.map(o=>t.jsxs("div",{className:"flex justify-between items-center pb-3 border-b last:border-b-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:o.profileImageUrl||Jt,alt:o.fullName,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:o.fullName}),t.jsx("p",{className:"text-xs text-gray-500 font-mono",children:o.id})]})]}),t.jsx(zp,{status:o.status})]},o.id))})]})},vl={getOfficeDashboard:async()=>ue("/office/dashboard"),getUrgentRides:async()=>ue("/office/rides/urgent"),getTodaysSchedule:async()=>ue("/office/rides/today"),getAvailableDrivers:async()=>ue("/driver/available"),assignDriver:async(a,l)=>ue(`/office/rides/${a}/assign`,{method:"POST",body:JSON.stringify({driver_id:l})}),getAdminDashboard:async()=>ue("/dashboard/admin"),getSystemStats:async()=>ue("/admin/stats"),getDriverDashboard:async()=>ue("/driver/dashboard"),getDriverJobs:async()=>ue("/driver/jobs"),getCommunityDashboard:async()=>ue("/community/dashboard"),getExecutiveDashboard:async()=>ue("/executive/dashboard"),getPatients:async()=>ue("/office/patients"),getPatientById:async a=>ue(`/office/patients/${a}`),createPatient:async a=>ue("/office/patients",{method:"POST",body:JSON.stringify(a)}),updatePatient:async(a,l)=>ue(`/office/patients/${a}`,{method:"PUT",body:JSON.stringify(l)}),deletePatient:async a=>ue(`/office/patients/${a}`,{method:"DELETE"}),getRides:async()=>ue("/office/rides"),getRideById:async a=>ue(`/office/rides/${a}`),createRide:async a=>ue("/office/rides",{method:"POST",body:JSON.stringify(a)}),updateRide:async(a,l)=>ue(`/office/rides/${a}`,{method:"PUT",body:JSON.stringify(l)}),deleteRide:async a=>ue(`/office/rides/${a}`,{method:"DELETE"}),getDrivers:async()=>ue("/office/drivers"),getDriverById:async a=>ue(`/office/drivers/${a}`),getVehicles:async()=>ue("/office/vehicles"),getNews:async()=>ue("/news"),getNewsById:async a=>ue(`/news/${a}`),createNews:async a=>ue("/news",{method:"POST",body:JSON.stringify(a)}),updateNews:async(a,l)=>ue(`/news/${a}`,{method:"PUT",body:JSON.stringify(l)}),deleteNews:async a=>ue(`/news/${a}`,{method:"DELETE"}),getUsers:async()=>ue("/admin/users"),createUser:async a=>ue("/admin/users",{method:"POST",body:JSON.stringify(a)}),updateUser:async(a,l)=>ue(`/admin/users/${a}`,{method:"PUT",body:JSON.stringify(l)}),deleteUser:async a=>ue(`/admin/users/${a}`,{method:"DELETE"}),getAuditLogs:async()=>ue("/admin/audit-logs")},wg=({setActiveView:a})=>{const l=fp(new Date),[s,r]=j.useState([]),[o,u]=j.useState([]),[h,p]=j.useState([]),[y,x]=j.useState(null),[v,b]=j.useState(!0),[w,C]=j.useState(!1),[A,_]=j.useState(!1),[M,k]=j.useState(null),[I,V]=j.useState(null);j.useEffect(()=>{B()},[]);const B=async()=>{try{b(!0);const[$,P,E,S]=await Promise.all([vl.getUrgentRides(),vl.getTodaysSchedule(),vl.getAvailableDrivers(),vl.getOfficeDashboard()]);r($.rides||[]),u(P.rides||[]),p(E.drivers||[]),x(S)}catch($){console.error("Failed to load dashboard data:",$),L("⚠️ ไม่สามารถโหลดข้อมูลได้ กรุณาลองใหม่อีกครั้ง")}finally{b(!1)}},L=$=>{V($),setTimeout(()=>V(null),3e3)},te=$=>{k($),C(!0)},W=$=>{k($),_(!0)},z=async($,P)=>{try{await vl.assignDriver($,P),await B();const E=h.find(S=>S.id===P);L(`✅ มอบหมายงาน ${$} ให้กับ ${(E==null?void 0:E.fullName)||"คนขับ"} สำเร็จแล้ว`),C(!1)}catch(E){console.error("Failed to assign driver:",E),L("⚠️ ไม่สามารถมอบหมายงานได้ กรุณาลองใหม่อีกครั้ง")}},H=[...s,...o],Z=(y==null?void 0:y.total_today_rides)||o.length,U=(y==null?void 0:y.available_drivers)||h.filter($=>$.status==="AVAILABLE").length,ae=(y==null?void 0:y.total_drivers)||h.length;return v?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"กำลังโหลดข้อมูล..."})}):t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"ศูนย์วิทยุ EMS"}),t.jsx("p",{className:"text-md text-gray-500 font-medium",children:l})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(ft,{title:"คำขอใหม่ (ยังไม่จ่ายงาน)",value:s.length.toString(),icon:mp,variant:"warning",onClick:()=>a("rides")}),t.jsx(ft,{title:"การเดินทางวันนี้ทั้งหมด",value:Z.toString(),icon:Rt,onClick:()=>a("rides")}),t.jsx(ft,{title:"คนขับที่พร้อมใช้งาน",value:`${U} / ${ae}`,icon:on,variant:"info",onClick:()=>a("drivers")}),t.jsx(ft,{title:"จำนวนผู้ป่วยทั้งหมด",value:"42",icon:Kt,onClick:()=>a("patients")})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 p-4 border-b",children:"รายการที่ต้องจัดการด่วน: คำขอเดินทางใหม่"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"ชื่อผู้ป่วย"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"หมู่บ้าน"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"เวลานัดหมาย"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"ประเภท/ความต้องการ"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold text-center",children:"การดำเนินการ"})]})}),t.jsxs("tbody",{children:[s.map($=>{var P;return t.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50/50 last:border-b-0",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:$.patientName}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.village}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:un($.appointmentTime)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:$.tripType}),((P=$.specialNeeds)==null?void 0:P.includes("ต้องการวีลแชร์"))&&t.jsx("span",{className:"flex items-center text-xs text-blue-600",title:"ต้องการวีลแชร์",children:t.jsx(qu,{className:"w-4 h-4"})})]})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsxs("div",{className:"flex justify-center items-center gap-2",children:[t.jsx("button",{onClick:()=>te($),className:"px-3 py-1.5 text-xs font-semibold text-white bg-[var(--wecare-blue)] rounded-md hover:bg-blue-700 transition-colors",children:"จ่ายงาน"}),t.jsx("button",{onClick:()=>W($),className:"px-3 py-1.5 text-xs font-semibold text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100 transition-colors",children:"ดูรายละเอียด"})]})})]},$.id)}),s.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"ไม่มีคำขอเดินทางใหม่ในขณะนี้"})})]})]})})]}),t.jsx(cS,{rides:o})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsx(dS,{})})]}),M&&t.jsx(zu,{isOpen:w,onClose:()=>C(!1),ride:M,onAssign:z,allDrivers:h,allRides:H}),t.jsx(gp,{isOpen:A,onClose:()=>_(!1),ride:M}),t.jsx(dn,{message:I})]})},fS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("polyline",{points:"16 11 18 13 22 9"})]}),mS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M17 11l4 4-4 4"}),t.jsx("path",{d:"M21 15H9"})]}),au=10,hS=["All","นัดหมอตามปกติ","รับยา","กายภาพบำบัด","ฉุกเฉิน"],Cg=()=>{const[a,l]=j.useState([]),[s,r]=j.useState([]),[o,u]=j.useState(!0),[h,p]=j.useState(null),[y,x]=j.useState(""),[v,b]=j.useState({status:"All",driver:"All",village:"All",tripType:"All",startDate:"",endDate:""}),[w,C]=j.useState(1),[A,_]=j.useState(!1),[M,k]=j.useState(null),[I,V]=j.useState(null);j.useEffect(()=>{B()},[]);const B=async()=>{try{u(!0),p(null);const[P,E]=await Promise.all([Aa.getRides(),an.getDrivers()]);l(P||[]),r(Array.isArray(E)?E:(E==null?void 0:E.drivers)||[])}catch(P){console.error("Failed to load data:",P),p(P.message||"ไม่สามารถโหลดข้อมูลได้")}finally{u(!1)}},L=j.useMemo(()=>{const P=new Set(a.map(E=>E.village).filter(E=>!!E));return["All",...Array.from(P)]},[a]),te=P=>{const{name:E,value:S}=P.target;b(q=>({...q,[E]:S}))},W=j.useMemo(()=>a.filter(P=>{const E=y.toLowerCase(),S=(P.patientName||"").toLowerCase().includes(E)||(P.id||"").toLowerCase().includes(E),q=v.status==="All"||P.status===v.status,X=v.driver==="All"||(P.driverName||"")===v.driver,oe=v.village==="All"||(P.village||"")===v.village,D=v.tripType==="All"||(P.tripType||"")===v.tripType;let ee=!0;if(v.startDate&&v.endDate){const Q=new Date(P.appointmentTime);ee=Q>=new Date(v.startDate)&&Q<=new Date(v.endDate)}return S&&q&&X&&oe&&D&&ee}),[a,y,v]),z=Math.ceil(W.length/au),H=W.slice((w-1)*au,w*au),Z=P=>{k(P),_(!0)},U=P=>{V(P),setTimeout(()=>{V(null)},3e3)},ae=(P,E)=>{const S=s.find(q=>q.id===E);S&&(l(q=>q.map(X=>X.id===P?{...X,driverName:S.fullName,status:ce.ASSIGNED,driverInfo:{id:S.id,fullName:S.fullName,phone:S.phone,licensePlate:S.licensePlate,vehicleModel:`${S.vehicleBrand} ${S.vehicleModel}`}}:X)),U(`✅ มอบหมายงาน ${P} ให้กับ ${S.fullName} สำเร็จแล้ว`),_(!1))},$=()=>{x(""),b({status:"All",driver:"All",village:"All",tripType:"All",startDate:"",endDate:""})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการการเดินทางทั้งหมด"}),t.jsxs("button",{className:"flex items-center justify-center px-5 py-2.5 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"ร้องขอการเดินทางใหม่"})]})]}),t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[t.jsxs("div",{className:"xl:col-span-2",children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"ค้นหา"}),t.jsx("input",{type:"text",placeholder:"ชื่อผู้ป่วย หรือ Ride ID...",value:y,onChange:P=>x(P.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"สถานะ"}),t.jsxs("select",{name:"status",value:v.status,onChange:te,children:[t.jsx("option",{value:"All",children:"สถานะทั้งหมด"}),t.jsx("option",{value:ce.PENDING,children:"รอดำเนินการ"}),t.jsx("option",{value:ce.ASSIGNED,children:"อนุมัติแล้ว"}),t.jsx("option",{value:ce.IN_PROGRESS,children:"กำลังเดินทาง"}),t.jsx("option",{value:ce.COMPLETED,children:"เสร็จสิ้น"}),t.jsx("option",{value:ce.CANCELLED,children:"ยกเลิก"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"คนขับ"}),t.jsxs("select",{name:"driver",value:v.driver,onChange:te,children:[t.jsx("option",{value:"All",children:"คนขับทั้งหมด"}),s.map(P=>t.jsx("option",{value:P.fullName,children:P.fullName},P.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"หมู่บ้าน"}),t.jsx("select",{name:"village",value:v.village,onChange:te,children:L.map(P=>t.jsx("option",{value:P,children:P==="All"?"ทุกหมู่บ้าน":P},P))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"ประเภท"}),t.jsx("select",{name:"tripType",value:v.tripType,onChange:te,children:hS.map(P=>t.jsx("option",{value:P,children:P==="All"?"ทุกประเภท":P},P))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[t.jsxs("div",{className:"xl:col-span-2 grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-1",children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"จากวันที่"}),t.jsx(Je,{name:"startDate",value:v.startDate,onChange:te})]}),t.jsxs("div",{className:"col-span-1",children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"ถึงวันที่"}),t.jsx(Je,{name:"endDate",value:v.endDate,onChange:te})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:$,className:"w-full flex items-center justify-center gap-2 text-sm text-gray-700 font-medium py-2.5 px-4 rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:[t.jsx(Mr,{className:"w-5 h-5"}),t.jsx("span",{children:"ล้างตัวกรอง"})]})})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 font-semibold",children:"Ride ID"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"ชื่อผู้ป่วย"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"ประเภท/ความต้องการ"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"คนขับ"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"เวลานัดหมาย"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"สถานะ"}),t.jsx("th",{className:"px-4 py-3 font-semibold text-center",children:"ดำเนินการ"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(P=>{var q;const E=P.status===ce.PENDING||P.status===ce.ASSIGNED,S=P.status===ce.PENDING||P.status===ce.ASSIGNED;return t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-4 py-3 font-mono text-xs text-gray-500",children:P.id}),t.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:[P.patientName,t.jsx("div",{className:"text-xs text-gray-500 font-normal",children:P.village})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:P.tripType}),((q=P.specialNeeds)==null?void 0:q.includes("ต้องการวีลแชร์"))&&t.jsx("span",{title:"ต้องการวีลแชร์",children:t.jsx(qu,{className:"w-5 h-5 text-blue-600"})})]})}),t.jsx("td",{className:"px-4 py-3",children:P.driverName||"N/A"}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:un(P.appointmentTime)}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Ia,{status:P.status})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-blue-600",title:"ดูรายละเอียด",children:t.jsx(Cr,{className:"w-5 h-5"})}),P.status===ce.PENDING&&t.jsx("button",{onClick:()=>Z(P),className:"p-2 rounded-full text-gray-400 hover:text-blue-600",title:"จ่ายงาน",children:t.jsx(fS,{className:"w-5 h-5"})}),(P.status===ce.ASSIGNED||P.status===ce.IN_PROGRESS)&&t.jsx("button",{onClick:()=>Z(P),className:"p-2 rounded-full text-gray-400 hover:text-yellow-600",title:"เปลี่ยนคนขับ",children:t.jsx(mS,{className:"w-5 h-5"})}),E&&t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-800",title:"แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),S&&t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-red-600",title:"ยกเลิก",children:t.jsx(Gt,{className:"w-5 h-5"})})]})})]},P.id)})})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["ผลลัพธ์ ",H.length," จาก ",W.length," รายการ"]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>C(P=>P>1?P-1:P),disabled:w===1,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Zt,{className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm font-semibold",children:["หน้า ",w," / ",z]}),t.jsx("button",{onClick:()=>C(P=>P<z?P+1:P),disabled:w===z,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Ht,{className:"w-5 h-5"})})]})]}),M&&t.jsx(zu,{isOpen:A,onClose:()=>_(!1),ride:M,onAssign:ae,allDrivers:s,allRides:a}),t.jsx(dn,{message:I})]})},xS={width:"100%",height:"400px"};function gS({onLocationChange:a,position:l}){return t.jsxs("div",{style:xS,className:"flex flex-col items-center justify-center h-full bg-gray-100 text-gray-600 p-4 text-center border border-gray-200",children:[t.jsx(as,{className:"h-12 w-12 mb-3 text-gray-400"}),t.jsx("p",{className:"font-semibold",children:"ไม่สามารถแสดงแผนที่ได้"}),t.jsx("p",{className:"text-xs mt-1",children:"(จำเป็นต้องใช้ Google Maps API Key)"})]})}const qp=it.memo(gS),pS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Ma=({tags:a,setTags:l,placeholder:s})=>{const[r,o]=j.useState(""),u=b=>{const w=b.trim();w&&!a.includes(w)&&l([...a,w]),o("")},h=b=>{b.key==="Enter"&&(b.preventDefault(),u(r))},p=()=>{u(r)},y=()=>{u(r)},x=b=>{b.preventDefault()},v=b=>{l(a.filter((w,C)=>C!==b))};return t.jsxs("div",{className:"flex flex-wrap items-center w-full p-2 border border-gray-400 rounded-md shadow-sm focus-within:ring-2 focus-within:ring-blue-200 focus-within:border-[#005A9C]",children:[a.map((b,w)=>t.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 text-sm font-medium mr-2 mb-1 px-2.5 py-1 rounded-full",children:[t.jsx("span",{children:b}),t.jsx("button",{type:"button",onClick:()=>v(w),className:"ml-2 text-blue-600 hover:text-blue-800 focus:outline-none","aria-label":`Remove ${b}`,children:t.jsx(ht,{className:"w-3 h-3"})})]},w)),t.jsxs("div",{className:"flex-grow flex items-center min-w-[150px]",children:[t.jsx("input",{type:"text",value:r,onChange:b=>o(b.target.value),onKeyDown:h,onBlur:p,placeholder:s||"เพิ่ม...ทีละรายการ",className:"flex-grow bg-transparent border-none focus:ring-0 p-1 text-sm outline-none w-full"}),r.trim()&&t.jsx("button",{type:"button",onClick:y,onMouseDown:x,className:"flex-shrink-0 ml-2 p-1.5 bg-[#005A9C] text-white rounded-full hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Add item",children:t.jsx(pS,{className:"w-4 h-4"})})]})]})},yS=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"m6 9 6 6 6-6"})}),_r=({id:a,options:l,selectedItems:s,setSelectedItems:r,placeholder:o="เลือกหรือพิมพ์เพื่อค้นหา..."})=>{const[u,h]=j.useState(""),[p,y]=j.useState(!1),x=j.useRef(null),v=l.filter(C=>!s.includes(C)&&C.toLowerCase().includes(u.toLowerCase())),b=C=>{r([...s,C]),h(""),y(!1)},w=C=>{r(s.filter(A=>A!==C))};return j.useEffect(()=>{const C=A=>{x.current&&!x.current.contains(A.target)&&y(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]),t.jsxs("div",{className:"relative",ref:x,children:[t.jsxs("div",{className:"flex flex-wrap items-center w-full p-2 border border-gray-400 rounded-md shadow-sm focus-within:ring-2 focus-within:ring-blue-200 focus-within:border-[#005A9C]",children:[s.map(C=>t.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 text-sm font-medium mr-2 mb-1 px-2.5 py-1 rounded-full",children:[t.jsx("span",{children:C}),t.jsx("button",{type:"button",onClick:()=>w(C),className:"ml-2 text-green-600 hover:text-green-800 focus:outline-none","aria-label":`Remove ${C}`,children:t.jsx(ht,{className:"w-3 h-3"})})]},C)),t.jsxs("div",{className:"flex-grow flex items-center min-w-[150px]",children:[t.jsx("input",{id:a,type:"text",value:u,onChange:C=>{h(C.target.value),y(!0)},onFocus:()=>y(!0),placeholder:o,className:"flex-grow bg-transparent border-none focus:ring-0 p-1 text-sm outline-none w-full"}),t.jsx(yS,{className:`w-5 h-5 text-gray-400 transition-transform ${p?"transform rotate-180":""}`})]})]}),p&&v.length>0&&t.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:v.map(C=>t.jsx("li",{onClick:()=>b(C),className:"px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100",children:C},C))})]})},$u=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t.jsx("polyline",{points:"17 8 12 3 7 8"}),t.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),Au=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),Tg=["หมู่ 1 บ้านหนองตุ้ม","หมู่ 2 ป่าบง","หมู่ 3 เต๋าดิน, เวียงสุทโธ","หมู่ 4 สวนดอก","หมู่ 5 ต้นหนุน","หมู่ 6 สันทรายคองน้อย","หมู่ 7 แม่ใจใต้","หมู่ 8 แม่ใจเหนือ","หมู่ 9 ริมฝาง,สันป่าไหน่","หมู่ 10 ห้วยเฮี่ยน,สันป่ายางยาง","หมู่ 11 ท่าสะแล","หมู่ 12 โป่งถืบ","หมู่ 13 ห้วยบอน","หมู่ 14 เสาหิน","หมู่ 15 โป่งถืบใน","หมู่ 16 ปางผึ้ง","หมู่ 17 ใหม่คองน้อย","หมู่ 18 ศรีดอนชัย","หมู่ 19 ใหม่ชยาราม","หมู่ 20 สระนิคม"],vS=["นาย","นาง","นางสาว","เด็กชาย","เด็กหญิง"],bS=["A","B","AB","O"],NS=["Rh+","Rh-"],jS=["สิทธิบัตรทอง (UC)","ประกันสังคม","ข้าราชการ","ชำระเงินเอง","อื่นๆ"],wS=["ผู้ป่วยติดเตียง","ผู้ป่วยภาวะพึงพิง","ผู้ป่วยยากไร้"],Gp=({isOpen:a,onClose:l,onSave:s,patient:r})=>{const[o,u]=j.useState(r),[h,p]=j.useState([]),[y,x]=j.useState([]),[v,b]=j.useState([]),[w,C]=j.useState({file:null,previewUrl:null}),[A,_]=j.useState([]),[M,k]=j.useState([]),[I,V]=j.useState("same");j.useEffect(()=>{if(r&&a){const E=JSON.stringify(r.idCardAddress)===JSON.stringify(r.currentAddress);V(E?"same":"new"),u({...r}),p(r.patientTypes||[]),x(r.chronicDiseases||[]),b(r.allergies||[]),C({file:null,previewUrl:r.profileImageUrl||Jt}),_([]),k(r.attachments||[])}},[r,a]),j.useEffect(()=>{const E={นาย:"ชาย",เด็กชาย:"ชาย",นาง:"หญิง",นางสาว:"หญิง",เด็กหญิง:"หญิง"};u(S=>({...S,gender:E[S.title]||""}))},[o.title]),j.useEffect(()=>{if(o.dob){const E=new Date(o.dob),S=new Date;let q=S.getFullYear()-E.getFullYear();const X=S.getMonth()-E.getMonth();(X<0||X===0&&S.getDate()<E.getDate())&&q--,u(oe=>({...oe,age:q>=0?q:0}))}else u(E=>({...E,age:0}))},[o.dob]),j.useEffect(()=>{I==="same"&&u(E=>({...E,currentAddress:E.idCardAddress}))},[o.idCardAddress,I]);const B=E=>{const{name:S,value:q}=E.target;u(X=>({...X,[S]:q}))},L=E=>{const{name:S,value:q}=E.target;u(X=>({...X,[S]:q}))},te=(E,S)=>{const{name:q,value:X}=E.target;u(oe=>({...oe,[S]:{...oe[S],[q]:X}}))},W=E=>{var S;if((S=E.target.files)!=null&&S[0]){const q=E.target.files[0];C({file:q,previewUrl:URL.createObjectURL(q)})}},z=E=>{if(E.target.files){const S=Array.from(E.target.files);if(M.length+A.length+S.length>5){alert("คุณสามารถอัปโหลดเอกสารได้สูงสุด 5 ไฟล์เท่านั้น");return}_(q=>[...q,...S])}},H=E=>{_(S=>S.filter((q,X)=>X!==E))},Z=E=>{k(S=>S.filter((q,X)=>X!==E))},U=E=>{u(S=>({...S,latitude:E.lat.toString(),longitude:E.lng.toString()}))},ae=E=>{E.preventDefault();const S={...o,patientTypes:h,chronicDiseases:y,allergies:v,attachments:M};s(S)};if(!a)return null;const $=new Date().toISOString().split("T")[0],P={lat:parseFloat(o.latitude),lng:parseFloat(o.longitude)};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"edit-patient-modal-title",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b flex-shrink-0",children:[t.jsxs("h2",{id:"edit-patient-modal-title",className:"text-xl font-bold text-gray-800",children:["แก้ไขข้อมูลผู้ป่วย - ID: ",t.jsx("span",{className:"font-mono",children:r.id})]}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:ae,className:"overflow-y-auto",children:[t.jsxs("div",{className:"p-6 space-y-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[#005A9C] mb-4",children:"1. ข้อมูลระบุตัวตน"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"md:col-span-1 flex flex-col items-center",children:[t.jsx("img",{src:w.previewUrl||Jt,alt:"Patient profile",className:"w-36 h-36 rounded-full object-cover border-4 border-gray-200"}),t.jsxs("label",{htmlFor:"profileImageModal",className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:["อัปโหลดรูปภาพ",t.jsx("input",{type:"file",id:"profileImageModal",accept:"image/*",onChange:W,className:"sr-only"})]})]}),t.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"คำนำหน้าชื่อ"}),t.jsxs("select",{name:"title",value:o.title,onChange:B,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm bg-white",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"-- เลือก --"}),vS.map(E=>t.jsx("option",{value:E,children:E},E))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"เพศ"}),t.jsx("input",{type:"text",name:"gender",value:o.gender,readOnly:!0,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm bg-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ชื่อ"}),t.jsx("input",{type:"text",name:"fullName",value:o.fullName.split(" ")[0]||"",onChange:E=>u(S=>({...S,fullName:`${E.target.value} ${S.fullName.split(" ")[1]||""}`})),className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"นามสกุล"}),t.jsx("input",{type:"text",name:"lastName",value:o.fullName.split(" ")[1]||"",onChange:E=>u(S=>({...S,fullName:`${S.fullName.split(" ")[0]||""} ${E.target.value}`})),className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"เลขบัตรประชาชน"}),t.jsx("input",{type:"text",name:"nationalId",value:o.nationalId,onChange:B,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",maxLength:13,pattern:"\\d{13}"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"วัน/เดือน/ปีเกิด"}),t.jsx(Je,{name:"dob",value:o.dob,onChange:L,max:$,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"อายุ"}),t.jsx("input",{type:"text",name:"age",value:`${o.age} ปี`,readOnly:!0,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm bg-gray-100"})]})]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[#005A9C] mb-4",children:"2. ข้อมูลทางการแพทย์เบื้องต้น"}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(_r,{id:"patientTypeModal",options:wS,selectedItems:h,setSelectedItems:p,placeholder:"เลือกประเภทผู้ป่วย (ได้มากกว่า 1)..."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(Ma,{tags:y,setTags:x,placeholder:"เพิ่มโรคประจำตัว...ทีละรายการ"}),t.jsx(Ma,{tags:v,setTags:b,placeholder:"เพิ่มประวัติการแพ้ยา/อาหาร..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("select",{name:"bloodType",value:o.bloodType,onChange:B,className:"w-full border-gray-300 rounded-md shadow-sm bg-white",children:[t.jsx("option",{value:"",children:"-- กรุ๊ปเลือด --"}),bS.map(E=>t.jsx("option",{value:E,children:E},E))]}),t.jsxs("select",{name:"rhFactor",value:o.rhFactor,onChange:B,className:"w-full border-gray-300 rounded-md shadow-sm bg-white",children:[t.jsx("option",{value:"",children:"-- Rh --"}),NS.map(E=>t.jsx("option",{value:E,children:E},E))]}),t.jsxs("select",{name:"healthCoverage",value:o.healthCoverage,onChange:B,className:"w-full border-gray-300 rounded-md shadow-sm bg-white",children:[t.jsx("option",{value:"",children:"-- สิทธิการรักษา --"}),jS.map(E=>t.jsx("option",{value:E,children:E},E))]})]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[#005A9C] mb-4",children:"3. ที่อยู่และข้อมูลติดต่อ"}),t.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ส่วนที่ 1: ที่อยู่ตามบัตรประชาชน"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"บ้านเลขที่"}),t.jsx("input",{type:"text",name:"houseNumber",value:o.idCardAddress.houseNumber,onChange:E=>te(E,"idCardAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"หมู่บ้าน"}),t.jsxs("select",{name:"village",value:o.idCardAddress.village,onChange:E=>te(E,"idCardAddress"),className:"mt-1 w-full border-gray-300 rounded-md bg-white",children:[t.jsx("option",{value:"",children:"-- เลือก --"}),Tg.map(E=>t.jsx("option",{value:E,children:E},E))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"ตำบล"}),t.jsx("input",{type:"text",name:"tambon",value:o.idCardAddress.tambon,onChange:E=>te(E,"idCardAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"อำเภอ"}),t.jsx("input",{type:"text",name:"amphoe",value:o.idCardAddress.amphoe,onChange:E=>te(E,"idCardAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"จังหวัด"}),t.jsx("input",{type:"text",name:"changwat",value:o.idCardAddress.changwat,onChange:E=>te(E,"idCardAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]})]})]}),t.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ส่วนที่ 2: ที่อยู่ปัจจุบัน"}),t.jsxs("div",{className:"flex space-x-6",children:[t.jsxs("label",{children:[t.jsx("input",{type:"radio",name:"addressOption",value:"same",checked:I==="same",onChange:E=>V(E.target.value)})," ใช้ที่อยู่เดียวกับบัตรประชาชน"]}),t.jsxs("label",{children:[t.jsx("input",{type:"radio",name:"addressOption",value:"new",checked:I==="new",onChange:E=>V(E.target.value)})," กรอกที่อยู่ใหม่"]})]}),I==="new"&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"บ้านเลขที่"}),t.jsx("input",{type:"text",name:"houseNumber",value:o.currentAddress.houseNumber,onChange:E=>te(E,"currentAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"หมู่บ้าน"}),t.jsxs("select",{name:"village",value:o.currentAddress.village,onChange:E=>te(E,"currentAddress"),className:"mt-1 w-full border-gray-300 rounded-md bg-white",children:[t.jsx("option",{value:"",children:"-- เลือก --"}),Tg.map(E=>t.jsx("option",{value:E,children:E},E))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"ตำบล"}),t.jsx("input",{type:"text",name:"tambon",value:o.currentAddress.tambon,onChange:E=>te(E,"currentAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"อำเภอ"}),t.jsx("input",{type:"text",name:"amphoe",value:o.currentAddress.amphoe,onChange:E=>te(E,"currentAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"จังหวัด"}),t.jsx("input",{type:"text",name:"changwat",value:o.currentAddress.changwat,onChange:E=>te(E,"currentAddress"),className:"mt-1 w-full border-gray-300 rounded-md"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ส่วนที่ 3: ข้อมูลติดต่อเพิ่มเติม"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"เบอร์โทรศัพท์ผู้ป่วย/ผู้ดูแล"}),t.jsx("input",{type:"tel",name:"contactPhone",value:o.contactPhone,onChange:B,className:"mt-1 w-full border-gray-300 rounded-md",required:!0})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"จุดสังเกต/รายละเอียดที่อยู่เพิ่มเติม"}),t.jsx("textarea",{name:"landmark",rows:2,value:o.landmark,onChange:B,className:"mt-1 w-full border-gray-300 rounded-md"})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("div",{className:"mt-2 border rounded-lg overflow-hidden",children:t.jsx(qp,{position:P,onLocationChange:U})})})]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[#005A9C] mb-4",children:"4. เอกสารแนบ"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx($u,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsxs("label",{htmlFor:"attachmentsModal",className:"mt-2 block text-sm font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:["เลือกไฟล์ (สูงสุด 5 ไฟล์)",t.jsx("input",{type:"file",id:"attachmentsModal",multiple:!0,onChange:z,className:"sr-only"})]})]}),M.length>0||A.length>0?t.jsxs("div",{className:"mt-4 space-y-4",children:[M.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium",children:"เอกสารที่มีอยู่แล้ว:"}),t.jsx("ul",{className:"mt-2 divide-y border rounded-md",children:M.map((E,S)=>t.jsxs("li",{className:"flex items-center justify-between p-3",children:[t.jsxs("div",{className:"flex items-center min-w-0",children:[t.jsx(Au,{className:"w-5 h-5 text-gray-400"}),t.jsx("p",{className:"ml-2 text-sm truncate",children:E.name})]}),t.jsx("button",{type:"button",onClick:()=>Z(S),className:"text-red-600 hover:text-red-800",children:t.jsx(Gt,{className:"w-5 h-5"})})]},S))})]}),A.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium",children:"ไฟล์ที่อัปโหลดใหม่:"}),t.jsx("ul",{className:"mt-2 divide-y border rounded-md",children:A.map((E,S)=>t.jsxs("li",{className:"flex items-center justify-between p-3",children:[t.jsxs("div",{className:"flex items-center min-w-0",children:[t.jsx(Au,{className:"w-5 h-5 text-gray-400"}),t.jsx("p",{className:"ml-2 text-sm truncate",children:E.name})]}),t.jsx("button",{type:"button",onClick:()=>H(S),className:"text-red-600 hover:text-red-800",children:t.jsx(Gt,{className:"w-5 h-5"})})]},S))})]})]}):t.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:t.jsx("p",{children:"ยังไม่มีเอกสารแนบ"})})]})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3 flex-shrink-0",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"บันทึกการเปลี่ยนแปลง"})]})]})]})})},CS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2 4v16"}),t.jsx("path",{d:"M2 12h18a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H2"}),t.jsx("path",{d:"M6 8v4"})]}),TS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),t.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),t.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]});me.extend(dp);const iu=10,Sg=()=>{const[a,l]=j.useState([]),[s,r]=j.useState(!1),[o,u]=j.useState(null);j.useEffect(()=>{(async()=>{r(!0),u(null);try{const ae=await Lu.getPatients(),P=(Array.isArray(ae)?ae:(ae==null?void 0:ae.patients)||[]).map(E=>{var S;return{id:E.id,fullName:E.full_name??"",profileImageUrl:void 0,title:E.title??"",gender:E.gender??"",nationalId:E.national_id??"",dob:E.dob??"",age:E.dob?me().diff(me(E.dob),"year"):0,patientTypes:Array.isArray(E.patient_types)?E.patient_types:[],bloodType:E.blood_type??"",rhFactor:E.rh_factor??"",healthCoverage:E.health_coverage??"",chronicDiseases:Array.isArray(E.chronic_diseases)?E.chronic_diseases:[],allergies:Array.isArray(E.allergies)?E.allergies:[],contactPhone:E.contact_phone??"",idCardAddress:E.id_card_address??{houseNumber:"",village:"",tambon:"",amphoe:"",changwat:""},currentAddress:E.current_address??{houseNumber:"",village:"",tambon:"",amphoe:"",changwat:""},landmark:E.landmark??"",latitude:(E.latitude??"").toString(),longitude:(E.longitude??"").toString(),attachments:Array.isArray(E.attachments)?E.attachments:[],registeredDate:E.registered_date??new Date().toISOString(),registeredBy:E.registered_by_id??"Unknown",keyInfo:typeof E.key_info=="string"?E.key_info:((S=E.key_info)==null?void 0:S.summary)??"",caregiverName:E.caregiver_name??void 0,caregiverPhone:E.caregiver_phone??void 0}});l(P)}catch(ae){u((ae==null?void 0:ae.message)||"Failed to load patients")}finally{r(!1)}})()},[]);const[h,p]=j.useState(""),[y,x]=j.useState({registeredBy:"All",village:"All",healthCoverage:"All",startDate:"",endDate:""}),[v,b]=j.useState(1),[w,C]=j.useState(!1),[A,_]=j.useState(null),M=j.useMemo(()=>{const U=a.length,ae=a.filter(P=>me(P.registeredDate).isSame(me(),"month")).length,$=a.filter(P=>P.patientTypes.includes("ผู้ป่วยติดเตียง")).length;return{total:U,newThisMonth:ae,bedridden:$}},[a]),k=j.useMemo(()=>{const U=new Set(a.map(ae=>ae.registeredBy));return["All",...Array.from(U)]},[a]),I=j.useMemo(()=>{const U=new Set(a.map(ae=>ae.currentAddress.village));return["All",...Array.from(U)]},[a]),V=j.useMemo(()=>{const U=new Set(a.map(ae=>ae.healthCoverage));return["All",...Array.from(U)]},[a]),B=U=>{const{name:ae,value:$}=U.target;x(P=>({...P,[ae]:$}))},L=j.useMemo(()=>a.filter(U=>{const ae=h.toLowerCase(),$=U.fullName.toLowerCase().includes(ae)||U.id.toLowerCase().includes(ae),P=y.registeredBy==="All"||U.registeredBy===y.registeredBy,E=y.village==="All"||U.currentAddress.village===y.village,S=y.healthCoverage==="All"||U.healthCoverage===y.healthCoverage;let q=!0;if(y.startDate&&y.endDate){const X=me(U.registeredDate);q=X.isAfter(me(y.startDate).subtract(1,"day"))&&X.isBefore(me(y.endDate).add(1,"day"))}return $&&P&&E&&S&&q}),[a,h,y]),te=Math.ceil(L.length/iu),W=L.slice((v-1)*iu,v*iu),z=U=>{_(U),C(!0)},H=U=>{l(ae=>ae.map($=>$.id===U.id?U:$)),C(!1)},Z=()=>{p(""),x({registeredBy:"All",village:"All",healthCoverage:"All",startDate:"",endDate:""})};return t.jsxs("div",{className:"space-y-6",children:[s&&t.jsx("div",{className:"p-3 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded",children:"กำลังดึงข้อมูลผู้ป่วยจากเซิร์ฟเวอร์..."}),o&&t.jsxs("div",{className:"p-3 text-sm text-red-700 bg-red-50 border border-red-200 rounded",children:["เกิดข้อผิดพลาดในการดึงข้อมูล: ",o]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการข้อมูลผู้ป่วยทั้งหมด"}),t.jsxs("button",{className:"flex items-center justify-center px-5 py-2.5 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-700 transition-colors",children:[t.jsx(_n,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"ลงทะเบียนผู้ป่วยใหม่"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(ft,{title:"ผู้ป่วยทั้งหมด",value:M.total.toString(),icon:Kt,variant:"default"}),t.jsx(ft,{title:"ผู้ป่วยใหม่ (เดือนนี้)",value:M.newThisMonth.toString(),icon:_n,variant:"info"}),t.jsx(ft,{title:"ผู้ป่วยติดเตียง",value:M.bedridden.toString(),icon:CS,variant:"warning"})]}),t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{htmlFor:"patientSearch",className:"block text-xs font-medium text-gray-600 mb-1",children:"ค้นหา"}),t.jsx("input",{id:"patientSearch",type:"text",placeholder:"ชื่อ, รหัสผู้ป่วย...",value:h,onChange:U=>p(U.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"filterRegisteredBy",className:"block text-xs font-medium text-gray-600 mb-1",children:"ชุมชน (ผู้ลงทะเบียน)"}),t.jsx("select",{id:"filterRegisteredBy",name:"registeredBy",value:y.registeredBy,onChange:B,children:k.map(U=>t.jsx("option",{value:U,children:U==="All"?"ทั้งหมด":U},U))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"filterVillage",className:"block text-xs font-medium text-gray-600 mb-1",children:"หมู่บ้าน"}),t.jsx("select",{id:"filterVillage",name:"village",value:y.village,onChange:B,children:I.map(U=>t.jsx("option",{value:U,children:U==="All"?"ทุกหมู่บ้าน":U},U))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"filterHealthCoverage",className:"block text-xs font-medium text-gray-600 mb-1",children:"สิทธิการรักษา"}),t.jsx("select",{id:"filterHealthCoverage",name:"healthCoverage",value:y.healthCoverage,onChange:B,children:V.map(U=>t.jsx("option",{value:U,children:U==="All"?"ทุกสิทธิ":U},U))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"startDate",className:"block text-xs font-medium text-gray-600 mb-1",children:"ลงทะเบียน (จากวันที่)"}),t.jsx(Je,{name:"startDate",value:y.startDate,onChange:B})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"endDate",className:"block text-xs font-medium text-gray-600 mb-1",children:"ลงทะเบียน (ถึงวันที่)"}),t.jsx(Je,{name:"endDate",value:y.endDate,onChange:B})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:Z,className:"w-full flex items-center justify-center gap-2 text-sm text-gray-700 font-medium py-2.5 px-4 rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:[t.jsx(Mr,{className:"w-5 h-5"}),"ล้างตัวกรอง"]})})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 font-semibold",children:"Patient ID"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"ชื่อ-นามสกุล"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"ข้อมูลสำคัญ"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"ลงทะเบียนโดย"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"วันที่ลงทะเบียน"}),t.jsx("th",{className:"px-4 py-3 font-semibold text-center",children:"ดำเนินการ"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:W.map(U=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-4 py-3 font-mono text-xs text-gray-500",children:U.id}),t.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:[U.fullName,t.jsxs("div",{className:"text-xs text-gray-500 font-normal",children:["อายุ ",U.age," ปี"]})]}),t.jsx("td",{className:"px-4 py-3",children:U.keyInfo}),t.jsx("td",{className:"px-4 py-3",children:U.registeredBy}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:Is(U.registeredDate)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("button",{onClick:()=>z(U),className:"p-2 rounded-full text-gray-400 hover:text-blue-600",title:"ดู/แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-red-600",title:"ลบ",children:t.jsx(Gt,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-green-600",title:"ร้องขอการเดินทาง",children:t.jsx(Rt,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-800",title:"พิมพ์บัตรข้อมูล",children:t.jsx(TS,{className:"w-5 h-5"})})]})})]},U.id))})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["ผลลัพธ์ ",W.length," จาก ",L.length," รายการ"]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>b(U=>U>1?U-1:U),disabled:v===1,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Zt,{className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm font-semibold",children:["หน้า ",v," / ",te]}),t.jsx("button",{onClick:()=>b(U=>U<te?U+1:U),disabled:v===te,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Ht,{className:"w-5 h-5"})})]})]}),A&&t.jsx(Gp,{isOpen:w,onClose:()=>C(!1),patient:A,onSave:H})]})},Eg={id:`DRV-${Math.floor(Math.random()*1e3)}`,fullName:"",phone:"",licensePlate:"",status:Be.OFFLINE,profileImageUrl:"",email:"",address:"",vehicleBrand:"",vehicleModel:"",vehicleColor:"",tripsThisMonth:0,vehicleType:"",totalTrips:0,avgReviewScore:0},SS=({isOpen:a,onClose:l,onSave:s,driver:r,availableStaff:o,availableDrivers:u})=>{const[h,p]=j.useState(r||Eg),[y,x]=j.useState(""),v=!!r;j.useEffect(()=>{p(r||Eg),r||x("")},[r,a]);const b=y?o.filter(_=>!u.some(M=>M.email===_.email)&&(_.name.toLowerCase().includes(y.toLowerCase())||_.email&&_.email.toLowerCase().includes(y.toLowerCase()))):[],w=_=>{p(M=>({...M,fullName:_.name,email:_.email,phone:_.phone||""})),x("")};if(!a)return null;const C=_=>{const{name:M,value:k}=_.target;p(I=>({...I,[M]:k}))},A=_=>{_.preventDefault(),s(h)};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"edit-driver-modal-title",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b flex-shrink-0",children:[t.jsx("h2",{id:"edit-driver-modal-title",className:"text-xl font-bold text-gray-800",children:v?"แก้ไขข้อมูลคนขับ":"เพิ่มคนขับใหม่"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:A,className:"overflow-y-auto",children:[t.jsxs("div",{className:"p-6 space-y-6",children:[!v&&t.jsxs("fieldset",{className:"pb-6",children:[t.jsx("legend",{className:"text-lg font-semibold text-[#005A9C] mb-4",children:"ค้นหาจากฐานข้อมูลสมาชิก"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",id:"searchMember",value:y,onChange:_=>x(_.target.value),placeholder:"พิมพ์ชื่อ หรือ อีเมลเพื่อค้นหา...",className:"w-full"}),b.length>0&&t.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto shadow-lg",children:b.map(_=>t.jsxs("li",{onClick:()=>w(_),className:"p-2 hover:bg-gray-100 cursor-pointer border-b last:border-b-0",children:[t.jsx("p",{className:"font-semibold",children:_.name}),t.jsx("p",{className:"text-xs text-gray-500",children:_.email})]},_.id))})]})]}),t.jsxs("fieldset",{className:"border-t pt-6",children:[t.jsx("legend",{className:"text-lg font-semibold text-[#005A9C] mb-4",children:"ข้อมูลส่วนตัว"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"ชื่อ-นามสกุล"}),t.jsx("input",{type:"text",name:"fullName",id:"fullName",value:h.fullName,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm focus:ring-[#005A9C] focus:border-[#005A9C]",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"เบอร์โทรติดต่อ"}),t.jsx("input",{type:"tel",name:"phone",id:"phone",value:h.phone,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm focus:ring-[#005A9C] focus:border-[#005A9C]",required:!0})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"ที่อยู่"}),t.jsx("textarea",{name:"address",id:"address",rows:2,value:h.address,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm focus:ring-[#005A9C] focus:border-[#005A9C]"})]})]})]}),t.jsxs("fieldset",{className:"border-t pt-6",children:[t.jsx("legend",{className:"text-lg font-semibold text-[#005A9C] mb-4",children:"ข้อมูลสำหรับเข้าระบบ"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"อีเมล (ใช้เป็น Username)"}),t.jsx("input",{type:"email",name:"email",id:"email",value:h.email,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm focus:ring-[#005A9C] focus:border-[#005A9C]",required:!0})]}),!v&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"ตั้งรหัสผ่านเริ่มต้น"}),t.jsx("input",{type:"password",name:"password",id:"password",className:"mt-1 w-full border-gray-300 rounded-md shadow-sm focus:ring-[#005A9C] focus:border-[#005A9C]"})]})]})]}),t.jsxs("fieldset",{className:"border-t pt-6",children:[t.jsx("legend",{className:"text-lg font-semibold text-[#005A9C] mb-4",children:"ข้อมูลรถ"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"vehicleBrand",className:"block text-sm font-medium text-gray-700",children:"ยี่ห้อ"}),t.jsx("input",{type:"text",name:"vehicleBrand",id:"vehicleBrand",value:h.vehicleBrand,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"vehicleModel",className:"block text-sm font-medium text-gray-700",children:"รุ่น"}),t.jsx("input",{type:"text",name:"vehicleModel",id:"vehicleModel",value:h.vehicleModel,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"vehicleColor",className:"block text-sm font-medium text-gray-700",children:"สี"}),t.jsx("input",{type:"text",name:"vehicleColor",id:"vehicleColor",value:h.vehicleColor,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm"})]}),t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{htmlFor:"licensePlate",className:"block text-sm font-medium text-gray-700",children:"หมายเลขทะเบียน"}),t.jsx("input",{type:"text",name:"licensePlate",id:"licensePlate",value:h.licensePlate,onChange:C,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm"})]})]})]}),t.jsxs("fieldset",{className:"border-t pt-6",children:[t.jsx("legend",{className:"text-lg font-semibold text-[#005A9C] mb-4",children:"อัปโหลดเอกสาร"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"รูปโปรไฟล์"}),t.jsxs("div",{className:"mt-1 flex items-center",children:[t.jsx("span",{className:"inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100",children:t.jsx(on,{className:"h-full w-full text-gray-300"})}),t.jsx("input",{type:"file",className:"ml-4 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"รูปถ่ายใบขับขี่"}),t.jsxs("div",{className:"mt-1 flex items-center",children:[t.jsx("span",{className:"inline-block h-12 w-12 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:t.jsx(Rt,{className:"h-8 w-8 text-gray-300"})}),t.jsx("input",{type:"file",className:"ml-4 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]})]})]})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3 flex-shrink-0",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"บันทึกข้อมูล"})]})]})]})})},Hp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),t.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),ru=10,Ag=()=>{const[a,l]=j.useState([]),[s,r]=j.useState([]),[o,u]=j.useState(!0),[h,p]=j.useState(null),[y,x]=j.useState(""),[v,b]=j.useState("All"),[w,C]=j.useState(1),[A,_]=j.useState(!1),[M,k]=j.useState(null);j.useEffect(()=>{I()},[]);const I=async()=>{try{u(!0),p(null);const[H,Z]=await Promise.all([an.getDrivers(),ue("/users")]);l(Array.isArray(H)?H:(H==null?void 0:H.drivers)||[]),r(Array.isArray(Z)?Z:(Z==null?void 0:Z.users)||[])}catch(H){console.error("Failed to load data:",H),p(H.message||"ไม่สามารถโหลดข้อมูลได้")}finally{u(!1)}},V=j.useMemo(()=>a.filter(H=>{const Z=(H.fullName||"").toLowerCase().includes(y.toLowerCase()),U=v==="All"||H.status===v;return Z&&U}),[a,y,v]),B=Math.ceil(V.length/ru),L=V.slice((w-1)*ru,w*ru),te=H=>{k(H),_(!0)},W=async H=>{try{M?await an.updateDriver(H.id,H):await an.createDriver(H),await I(),_(!1)}catch(Z){console.error("Failed to save driver:",Z),alert("ไม่สามารถบันทึกข้อมูลคนขับได้")}},z=H=>{l(Z=>Z.map(U=>U.id===H?{...U,status:U.status===Be.INACTIVE?Be.OFFLINE:Be.INACTIVE}:U))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการข้อมูลคนขับ"}),t.jsxs("button",{onClick:()=>te(null),className:"flex items-center justify-center px-5 py-2.5 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-700 transition-colors",children:[t.jsx(_n,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"เพิ่มคนขับใหม่"})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-3 md:space-y-0 p-4 bg-white rounded-lg shadow-sm border",children:[t.jsxs("div",{className:"relative w-full md:w-auto",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx(jl,{className:"w-5 h-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"ค้นหาคนขับ...",value:y,onChange:H=>x(H.target.value),className:"w-full md:w-64 pl-10"})]}),t.jsxs("div",{className:"relative w-full md:w-auto",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:t.jsx(Vu,{className:"w-5 h-5 text-gray-400"})}),t.jsxs("select",{value:v,onChange:H=>b(H.target.value),className:"w-full md:w-56 pl-10",children:[t.jsx("option",{value:"All",children:"สถานะทั้งหมด"}),t.jsx("option",{value:Be.AVAILABLE,children:"พร้อมใช้งาน"}),t.jsx("option",{value:Be.ON_TRIP,children:"กำลังเดินทาง"}),t.jsx("option",{value:Be.OFFLINE,children:"ออฟไลน์"}),t.jsx("option",{value:Be.INACTIVE,children:"ไม่ใช้งาน"})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 font-semibold",children:"คนขับ"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"เบอร์โทรศัพท์"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"ข้อมูลรถ"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"เที่ยววิ่ง (เดือนนี้)"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"สถานะ"}),t.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:L.map(H=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:H.profileImageUrl||Jt,alt:H.fullName,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{children:[H.fullName,t.jsx("div",{className:"text-xs text-gray-500 font-mono",children:H.id})]})]})}),t.jsx("td",{className:"px-6 py-4",children:H.phone}),t.jsxs("td",{className:"px-6 py-4",children:[H.vehicleBrand," ",H.vehicleModel,t.jsx("div",{className:"text-xs text-gray-500",children:H.licensePlate})]}),t.jsx("td",{className:"px-6 py-4 text-center",children:H.tripsThisMonth}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(zp,{status:H.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("button",{onClick:()=>te(H),className:"p-2 rounded-full text-gray-400 hover:text-blue-600",title:"ดู/แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-800",title:"ดูประวัติการเดินทาง",children:t.jsx(wr,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>z(H.id),className:`p-2 rounded-full text-gray-400 hover:text-${H.status===Be.INACTIVE?"green":"red"}-600`,title:H.status===Be.INACTIVE?"เปิดใช้งาน":"ปิดใช้งาน",children:t.jsx(Hp,{className:"w-5 h-5"})})]})})]},H.id))})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["ผลลัพธ์ ",L.length," จาก ",V.length," รายการ"]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>C(H=>H>1?H-1:H),disabled:w===1,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Zt,{className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm font-semibold",children:["Page ",w," of ",B]}),t.jsx("button",{onClick:()=>C(H=>H<B?H+1:H),disabled:w===B,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Ht,{className:"w-5 h-5"})})]})]}),t.jsx(SS,{isOpen:A,onClose:()=>_(!1),driver:M,onSave:W,availableStaff:s,availableDrivers:a})]})},ES={admin:{text:"Admin",classes:"bg-purple-100 text-purple-800"},DEVELOPER:{text:"Developer",classes:"bg-gray-700 text-gray-100"},office:{text:"Office",classes:"bg-cyan-100 text-cyan-800"},community:{text:"Community",classes:"bg-green-100 text-green-800"},driver:{text:"Driver",classes:"bg-yellow-100 text-yellow-800"},OFFICER:{text:"Officer",classes:"bg-blue-100 text-blue-800"},EXECUTIVE:{text:"Executive",classes:"bg-indigo-100 text-indigo-800"}},Dr=({role:a})=>{const l=ES[a]||{text:"Unknown",classes:"bg-gray-100 text-gray-800"};return t.jsx("span",{className:`px-2.5 py-0.5 text-xs font-semibold rounded-full ${l.classes}`,children:l.text})},AS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),t.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),t.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),Mg=({setActiveView:a})=>{const[l,s]=j.useState({totalUsers:0,totalRides:0,newUsers:0}),[r,o]=j.useState([]),[u,h]=j.useState(!0);j.useEffect(()=>{p()},[]);const p=async()=>{try{h(!0);const y=await vl.getAdminDashboard();s({totalUsers:y.totalUsers||0,totalRides:y.totalRides||0,newUsers:y.newUsers||0}),o(y.recentLogs||[])}catch(y){console.error("Failed to load dashboard:",y)}finally{h(!1)}};return u?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"กำลังโหลดข้อมูล..."})}):t.jsxs("div",{className:"space-y-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ภาพรวมระบบสำหรับผู้ดูแล"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(ft,{title:"จำนวนผู้ใช้ทั้งหมด",value:l.totalUsers.toString(),icon:Kt}),t.jsx(ft,{title:"การเดินทางทั้งหมด (เดือนนี้)",value:l.totalRides.toString(),icon:Rt}),t.jsx(ft,{title:"ผู้ใช้ใหม่ (7 วันล่าสุด)",value:l.newUsers.toString(),icon:_n}),t.jsx(ft,{title:"สถานะระบบ",value:"ปกติ",icon:Bu,variant:"success"})]}),t.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"ทางลัดการทำงาน"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("button",{onClick:()=>a("users"),className:"flex items-center justify-center p-4 bg-blue-50 text-[var(--wecare-blue)] rounded-lg hover:bg-blue-100 transition-colors duration-300",children:[t.jsx(_n,{className:"w-6 h-6 mr-3"}),t.jsx("span",{className:"text-md font-semibold",children:"เพิ่มผู้ใช้ใหม่"})]}),t.jsxs("button",{onClick:()=>a("logs"),className:"flex items-center justify-center p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-300",children:[t.jsx(op,{className:"w-6 h-6 mr-3"}),t.jsx("span",{className:"text-md font-semibold",children:"ดูบันทึกการใช้งาน"})]}),t.jsxs("button",{onClick:()=>a("settings"),className:"flex items-center justify-center p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-300",children:[t.jsx(cp,{className:"w-6 h-6 mr-3"}),t.jsx("span",{className:"text-md font-semibold",children:"ไปที่หน้าตั้งค่า"})]}),t.jsxs("button",{onClick:()=>a("test_map"),className:"flex items-center justify-center p-4 bg-yellow-50 text-yellow-800 rounded-lg hover:bg-yellow-100 transition-colors duration-300",children:[t.jsx(AS,{className:"w-6 h-6 mr-3"}),t.jsx("span",{className:"text-md font-semibold",children:"Test Map Component"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"กิจกรรมล่าสุด"}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"เวลา"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"ผู้ใช้"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"Role"}),t.jsx("th",{scope:"col",className:"px-6 py-3 font-semibold",children:"การกระทำ"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map((y,x)=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:y.time}),t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:y.user}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(Dr,{role:y.role})}),t.jsx("td",{className:"px-6 py-4",children:y.action})]},x))})]})})})]})]})},MS={Active:{text:"Active",classes:"bg-green-100 text-green-800"},Inactive:{text:"Inactive",classes:"bg-gray-200 text-gray-700"}},_S=({status:a})=>{const l=MS[a]||{text:"Unknown",classes:"bg-gray-100 text-gray-800"};return t.jsxs("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full inline-flex items-center gap-1.5 ${l.classes}`,children:[t.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${l.classes.replace(/text-\w+-\d+/,"").replace("bg","bg-opacity-50 bg")}`,style:{backgroundColor:"currentColor"}}),l.text]})},_g={id:`USR-${Math.floor(Math.random()*1e3)}`,fullName:"",email:"",role:"community",dateCreated:new Date().toISOString(),status:"Active"},DS=({isOpen:a,onClose:l,onSave:s,user:r})=>{const[o,u]=j.useState(r||_g),h=!!r;if(j.useEffect(()=>{u(r||_g)},[r,a]),!a)return null;const[p,y]=o.fullName.split(" "),x=C=>{const{name:A,value:_}=C.target;u(M=>({...M,[A]:_}))},v=C=>{const{name:A,value:_}=C.target,M=o.fullName.split(" ");let k="";A==="firstName"?k=`${_} ${M[1]||""}`.trim():k=`${M[0]||""} ${_}`.trim(),u(I=>({...I,fullName:k}))},b=C=>{C.preventDefault(),s(o)},w=["admin","office","OFFICER","driver","community","EXECUTIVE"];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"edit-user-modal-title",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b flex-shrink-0",children:[t.jsx("h2",{id:"edit-user-modal-title",className:"text-xl font-bold text-gray-800",children:h?"แก้ไขข้อมูลผู้ใช้":"เพิ่มผู้ใช้ใหม่"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:b,className:"overflow-y-auto",children:[t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"ชื่อ"}),t.jsx("input",{type:"text",name:"firstName",id:"firstName",value:p||"",onChange:v,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"นามสกุล"}),t.jsx("input",{type:"text",name:"lastName",id:"lastName",value:y||"",onChange:v,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"อีเมล"}),t.jsx("input",{type:"email",name:"email",id:"email",value:o.email,onChange:x,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role (บทบาท)"}),t.jsx("select",{name:"role",id:"role",value:o.role,onChange:x,className:"mt-1 w-full border-gray-300 rounded-md shadow-sm bg-white",required:!0,children:w.map(C=>t.jsx("option",{value:C,className:"capitalize",children:C},C))})]}),!h&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"ตั้งรหัสผ่านเริ่มต้น"}),t.jsx("input",{type:"password",name:"password",id:"password",className:"mt-1 w-full border-gray-300 rounded-md shadow-sm"})]})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3 flex-shrink-0",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"บันทึกข้อมูล"})]})]})]})})},ou=10,RS=({currentUser:a})=>{const[l,s]=j.useState([]),[r,o]=j.useState(!0),[u,h]=j.useState(null),[p,y]=j.useState(""),[x,v]=j.useState({role:"All",status:"All"}),[b,w]=j.useState(1),[C,A]=j.useState(!1),[_,M]=j.useState(null);j.useEffect(()=>{k()},[]);const k=async()=>{try{o(!0),h(null);const z=await ue("/users"),Z=(Array.isArray(z)?z:z.users||[]).map(U=>{var ae;return{id:((ae=U.id)==null?void 0:ae.toString())||"",fullName:U.full_name||U.name||U.username||"",email:U.email||"",role:U.role||"community",dateCreated:U.created_at||new Date().toISOString(),status:U.is_active===!1?"Inactive":"Active",profileImageUrl:U.profile_image_url||void 0}});s(Z)}catch(z){console.error("Failed to load users:",z),h(z.message||"ไม่สามารถโหลดข้อมูลผู้ใช้ได้")}finally{o(!1)}},I=j.useMemo(()=>a.role==="admin"?l.filter(z=>z.role!=="DEVELOPER"):l,[l,a]),V=j.useMemo(()=>I.filter(z=>{const H=p.toLowerCase(),Z=z.fullName.toLowerCase().includes(H)||z.email.toLowerCase().includes(H),U=x.role==="All"||z.role===x.role,ae=x.status==="All"||z.status===x.status;return Z&&U&&ae}),[I,p,x]),B=Math.ceil(V.length/ou),L=V.slice((b-1)*ou,b*ou),te=z=>{M(z),A(!0)},W=async z=>{try{_?await ue(`/users/${z.id}`,{method:"PUT",body:JSON.stringify({username:z.fullName,email:z.email})}):await ue("/users",{method:"POST",body:JSON.stringify({username:z.fullName,email:z.email})}),await k(),A(!1)}catch(H){console.error("Failed to save user:",H),alert("ไม่สามารถบันทึกข้อมูลผู้ใช้ได้")}};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"กำลังโหลดข้อมูล..."})}):u?t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[t.jsx("div",{className:"text-red-500",children:u}),t.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"ลองใหม่"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการบัญชีผู้ใช้"}),t.jsxs("button",{onClick:()=>te(null),className:"flex items-center justify-center px-5 py-2.5 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-700 transition-colors",children:[t.jsx(_n,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"เพิ่มผู้ใช้ใหม่"})]})]}),t.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"md:col-span-1",children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"ค้นหา"}),t.jsx("input",{type:"text",placeholder:"ชื่อ หรือ อีเมล...",value:p,onChange:z=>y(z.target.value),className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Role"}),t.jsxs("select",{value:x.role,onChange:z=>v(H=>({...H,role:z.target.value})),children:[t.jsx("option",{value:"All",children:"All Roles"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"office",children:"Office"}),t.jsx("option",{value:"OFFICER",children:"Officer"}),t.jsx("option",{value:"driver",children:"Driver"}),t.jsx("option",{value:"community",children:"Community"}),t.jsx("option",{value:"EXECUTIVE",children:"Executive"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600",children:"สถานะ"}),t.jsxs("select",{value:x.status,onChange:z=>v(H=>({...H,status:z.target.value})),children:[t.jsx("option",{value:"All",children:"All Statuses"}),t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 font-semibold",children:"ผู้ใช้"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"Role"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"วันที่สร้าง"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"สถานะ"}),t.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"ดำเนินการ"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:L.map(z=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:z.profileImageUrl||Jt,alt:z.fullName,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{children:[z.fullName,t.jsx("div",{className:"text-xs text-gray-500",children:z.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(Dr,{role:z.role})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Is(z.dateCreated)}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(_S,{status:z.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("button",{onClick:()=>te(z),className:"p-2 rounded-full text-gray-400 hover:text-blue-600",title:"แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-yellow-600",title:"รีเซ็ตรหัสผ่าน",children:t.jsx(Bp,{className:"w-5 h-5"})}),t.jsx("button",{className:`p-2 rounded-full text-gray-400 hover:text-${z.status==="Active"?"red":"green"}-600`,title:z.status==="Active"?"ปิดใช้งาน":"เปิดใช้งาน",children:t.jsx(Hp,{className:"w-5 h-5"})})]})})]},z.id))})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["ผลลัพธ์ ",L.length," จาก ",V.length," รายการ"]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>w(z=>z>1?z-1:z),disabled:b===1,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Zt,{className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm font-semibold",children:["Page ",b," of ",B]}),t.jsx("button",{onClick:()=>w(z=>z<B?z+1:z),disabled:b===B,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Ht,{className:"w-5 h-5"})})]})]}),t.jsx(DS,{isOpen:C,onClose:()=>A(!1),user:_,onSave:W})]})},IS=({isOpen:a,onClose:l,log:s})=>a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"log-details-modal-title",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b flex-shrink-0",children:[t.jsxs("h2",{id:"log-details-modal-title",className:"text-xl font-bold text-gray-800",children:["รายละเอียด Log - ID: ",t.jsx("span",{className:"font-mono",children:s.id})]}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[t.jsx("strong",{children:"Timestamp:"}),t.jsx("br",{}),un(s.timestamp)]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[t.jsx("strong",{children:"User:"}),t.jsx("br",{}),s.userEmail]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[t.jsx("strong",{children:"Role:"}),t.jsx("br",{}),t.jsx(Dr,{role:s.userRole})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[t.jsx("strong",{children:"Action:"}),t.jsx("br",{}),s.action]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[t.jsx("strong",{children:"Target ID:"}),t.jsx("br",{}),s.targetId||"N/A"]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[t.jsx("strong",{children:"IP Address:"}),t.jsx("br",{}),s.ipAddress]})]}),s.dataPayload&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700 mt-4 mb-2",children:"Data Payload"}),t.jsx("div",{className:"bg-gray-800 text-white p-4 rounded-md text-xs font-mono overflow-x-auto",children:t.jsx("pre",{children:t.jsx("code",{children:JSON.stringify(s.dataPayload,null,2)})})})]})]}),t.jsx("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3 flex-shrink-0",children:t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ปิด"})})]})}):null,cu=10,kS=()=>{const[a,l]=j.useState([]),[s,r]=j.useState(!0),[o,u]=j.useState(""),[h,p]=j.useState({user:"",role:"All",actionType:"All",startDate:"",endDate:""}),[y,x]=j.useState(1),[v,b]=j.useState(!1),[w,C]=j.useState(null);j.useEffect(()=>{A()},[]);const A=async()=>{try{r(!0);const L=await ue("/audit-logs");l(Array.isArray(L)?L:(L==null?void 0:L.logs)||[])}catch(L){console.error("Failed to load audit logs:",L)}finally{r(!1)}},_=L=>{const{name:te,value:W}=L.target;p(z=>({...z,[te]:W}))},M=j.useMemo(()=>a.filter(L=>{const te=!o||L.action.toLowerCase().includes(o.toLowerCase())||L.targetId&&L.targetId.toLowerCase().includes(o.toLowerCase()),W=!h.user||L.userEmail.toLowerCase().includes(h.user.toLowerCase()),z=h.role==="All"||L.userRole===h.role,H=h.actionType==="All"||L.action===h.actionType;let Z=!0;if(h.startDate&&h.endDate){const U=new Date(L.timestamp);Z=U>=new Date(h.startDate)&&U<=new Date(h.endDate)}return te&&W&&z&&H&&Z}),[a,o,h]),k=Math.ceil(M.length/cu),I=M.slice((y-1)*cu,y*cu),V=L=>{C(L),b(!0)},B=()=>{u(""),p({user:"",role:"All",actionType:"All",startDate:"",endDate:""})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"บันทึกการใช้งานระบบ"}),t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx("input",{type:"text",placeholder:"ค้นหา Keyword...",value:o,onChange:L=>u(L.target.value)}),t.jsx("input",{type:"text",placeholder:"กรองตามผู้ใช้ (Email)...",name:"user",value:h.user,onChange:_}),t.jsxs("select",{name:"role",value:h.role,onChange:_,children:[t.jsx("option",{value:"All",children:"All Roles"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"office",children:"Office"}),t.jsx("option",{value:"driver",children:"Driver"}),t.jsx("option",{value:"community",children:"Community"})]}),t.jsxs("select",{name:"actionType",value:h.actionType,onChange:_,children:[t.jsx("option",{value:"All",children:"All Action Types"}),Object.values(hp).map(L=>t.jsx("option",{value:L,children:L},L))]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"จากวันที่"}),t.jsx(Je,{name:"startDate",value:h.startDate,onChange:_})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"ถึงวันที่"}),t.jsx(Je,{name:"endDate",value:h.endDate,onChange:_})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:B,className:"w-full flex items-center justify-center gap-2 text-sm text-gray-700 font-medium py-2.5 px-4 rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:[t.jsx(Mr,{className:"w-5 h-5"}),"ล้างตัวกรอง"]})})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 font-semibold",children:"วัน-เวลา"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"ผู้ใช้งาน"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"Role"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"การกระทำ"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"เป้าหมาย"}),t.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"รายละเอียด"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:I.map(L=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 font-mono text-xs whitespace-nowrap",children:un(L.timestamp)}),t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:L.userEmail}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(Dr,{role:L.userRole})}),t.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:L.action}),t.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:L.targetId||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("button",{onClick:()=>V(L),className:"p-2 rounded-full text-gray-400 hover:text-blue-600",title:"ดูรายละเอียด",children:t.jsx(Cr,{className:"w-5 h-5"})})})]},L.id))})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["ผลลัพธ์ ",I.length," จาก ",M.length," รายการ"]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>x(L=>L>1?L-1:L),disabled:y===1,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Zt,{className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm font-semibold",children:["Page ",y," of ",k]}),t.jsx("button",{onClick:()=>x(L=>L<k?L+1:L),disabled:y===k,className:"p-2 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Ht,{className:"w-5 h-5"})})]})]}),w&&t.jsx(IS,{isOpen:v,onClose:()=>b(!1),log:w})]})},Fp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),t.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),t.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Yp=({name:a,checked:l,onChange:s})=>t.jsx("button",{type:"button",role:"switch","aria-checked":l,onClick:()=>s(!l),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#005A9C] ${l?"bg-[#28A745]":"bg-gray-300"}`,children:t.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform duration-300 ${l?"translate-x-6":"translate-x-1"}`})}),at={appName:"WeCare Platform",organizationName:"องค์การบริหารส่วนตำบลเวียง",organizationAddress:"เลขที่ 666 ถ.รอบเวียงสุทโธ ม.3 ต.เวียง อ.ฝาง จ.เชียงใหม่ 50110",organizationPhone:"053-382670",contactEmail:"contact@wecare.dev",logoUrl:void 0,googleMapsApiKey:"",mapCenterLat:19.9213,mapCenterLng:99.2131,googleRecaptchaSiteKey:"your-recaptcha-site-key-here",googleRecaptchaSecretKey:"your-recaptcha-secret-key-here",maintenanceMode:!1,maintenanceMessage:"ระบบกำลังปิดปรับปรุงชั่วคราว ขออภัยในความไม่สะดวก",schedulingModel:"individual",developerName:"เจษฎา มูลมาวัน",developerTitle:"ผู้ช่วยนักวิชาการคอมพิวเตอร์, สังกัด สำนักปลัด"},Dg=()=>{try{return{...at,appName:localStorage.getItem("wecare_appName")||at.appName,organizationName:localStorage.getItem("wecare_organizationName")||at.organizationName,organizationAddress:localStorage.getItem("wecare_organizationAddress")||at.organizationAddress,organizationPhone:localStorage.getItem("wecare_organizationPhone")||at.organizationPhone,contactEmail:localStorage.getItem("wecare_contactEmail")||at.contactEmail,logoUrl:localStorage.getItem("wecare_logoUrl")||at.logoUrl,googleMapsApiKey:localStorage.getItem("wecare_googleMapsApiKey")||at.googleMapsApiKey,mapCenterLat:parseFloat(localStorage.getItem("wecare_mapCenterLat")||String(at.mapCenterLat)),mapCenterLng:parseFloat(localStorage.getItem("wecare_mapCenterLng")||String(at.mapCenterLng)),developerName:localStorage.getItem("wecare_developerName")||at.developerName,developerTitle:localStorage.getItem("wecare_developerTitle")||at.developerTitle,maintenanceMode:localStorage.getItem("wecare_maintenanceMode")==="true",maintenanceMessage:localStorage.getItem("wecare_maintenanceMessage")||at.maintenanceMessage,schedulingModel:localStorage.getItem("wecare_schedulingModel")||at.schedulingModel,googleRecaptchaSiteKey:localStorage.getItem("wecare_googleRecaptchaSiteKey")||at.googleRecaptchaSiteKey,googleRecaptchaSecretKey:localStorage.getItem("wecare_googleRecaptchaSecretKey")||at.googleRecaptchaSecretKey}}catch(a){return console.error("Could not load settings from localStorage",a),at}},LS=()=>{const[a,l]=j.useState(Dg()),[s,r]=j.useState("general"),o=v=>{const{name:b,value:w,type:C}=v.target;l(A=>({...A,[b]:C==="number"?parseFloat(w)||0:w}))},u=(v,b)=>{l(w=>({...w,[v]:b}))},h=v=>{if(v.target.files&&v.target.files[0]){const b=v.target.files[0],w=new FileReader;w.onloadend=()=>{l(C=>({...C,logoUrl:w.result}))},w.readAsDataURL(b)}},p=()=>{l(v=>({...v,logoUrl:void 0}))},y=v=>{v.preventDefault();let b=!1;const w=Dg();(w.googleMapsApiKey!==a.googleMapsApiKey||w.mapCenterLat!==a.mapCenterLat||w.mapCenterLng!==a.mapCenterLng)&&(b=!0),localStorage.setItem("wecare_appName",a.appName),localStorage.setItem("wecare_organizationName",a.organizationName),localStorage.setItem("wecare_organizationAddress",a.organizationAddress||""),localStorage.setItem("wecare_organizationPhone",a.organizationPhone||""),localStorage.setItem("wecare_contactEmail",a.contactEmail),localStorage.setItem("wecare_googleMapsApiKey",a.googleMapsApiKey),localStorage.setItem("wecare_mapCenterLat",String(a.mapCenterLat)),localStorage.setItem("wecare_mapCenterLng",String(a.mapCenterLng)),localStorage.setItem("wecare_developerName",a.developerName||""),localStorage.setItem("wecare_developerTitle",a.developerTitle||""),a.logoUrl?localStorage.setItem("wecare_logoUrl",a.logoUrl):localStorage.removeItem("wecare_logoUrl"),window.dispatchEvent(new CustomEvent("settingsChanged")),b?confirm("การตั้งค่า API Key และพิกัดแผนที่ถูกบันทึกแล้ว จำเป็นต้องรีโหลดหน้าเว็บเพื่อให้การเปลี่ยนแปลงสมบูรณ์ รีโหลดเลยหรือไม่?")?window.location.reload():alert("บันทึกการตั้งค่าสำเร็จ! (กรุณารีโหลดหน้าเว็บเพื่อให้การตั้งค่าแผนที่มีผล)"):alert("บันทึกการตั้งค่าสำเร็จ!")},x=({tabId:v,label:b})=>{const w=s===v;return t.jsx("button",{type:"button",role:"tab","aria-selected":w,onClick:()=>r(v),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors duration-200 focus:outline-none ${w?"border-b-2 border-[var(--wecare-blue)] text-[var(--wecare-blue)]":"text-gray-500 hover:text-gray-700"}`,children:b})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ตั้งค่าระบบ"}),t.jsx("p",{className:"text-gray-600",children:"จัดการการตั้งค่าหลักของแอปพลิเคชัน"}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[t.jsx(x,{tabId:"general",label:"การตั้งค่าทั่วไป"}),t.jsx(x,{tabId:"api",label:"API & Integration"}),t.jsx(x,{tabId:"ride_schedule",label:"การตั้งค่าการเดินทาง"})]})}),t.jsxs("form",{onSubmit:y,className:"space-y-8",children:[s==="general"&&t.jsxs("div",{className:"space-y-8 animate-scale-in",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"ข้อมูลทั่วไป"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"appName",className:"block text-sm font-medium text-gray-700",children:"ชื่อแอปพลิเคชัน"}),t.jsx("input",{type:"text",name:"appName",id:"appName",value:a.appName,onChange:o,className:"mt-1 w-full md:w-1/2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"โลโก้องค์กร"}),t.jsxs("div",{className:"mt-2 flex items-center gap-6",children:[t.jsx("div",{className:"w-32 h-16 bg-gray-100 border rounded-md flex items-center justify-center",children:a.logoUrl?t.jsx("img",{src:a.logoUrl,alt:"Logo Preview",className:"max-w-full max-h-full object-contain"}):t.jsx("span",{className:"text-xs text-gray-500",children:"ไม่มีโลโก้"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{htmlFor:"logoUpload",className:"cursor-pointer px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:[t.jsx("span",{children:"อัปโหลดโลโก้"}),t.jsx("input",{id:"logoUpload",name:"logoUpload",type:"file",className:"sr-only",accept:"image/png, image/jpeg, image/svg+xml",onChange:h})]}),a.logoUrl&&t.jsx("button",{type:"button",onClick:p,className:"p-2 text-red-600 hover:bg-red-50 rounded-full",title:"ลบโลโก้",children:t.jsx(Gt,{className:"w-5 h-5"})})]})]})]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"การตั้งค่าองค์กรและผู้พัฒนา"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700",children:"ชื่อองค์กร"}),t.jsx("input",{type:"text",name:"organizationName",id:"organizationName",value:a.organizationName,onChange:o,className:"mt-1 w-full md:w-1/2"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"organizationAddress",className:"block text-sm font-medium text-gray-700",children:"ที่อยู่องค์กร"}),t.jsx("textarea",{name:"organizationAddress",id:"organizationAddress",rows:3,value:a.organizationAddress||"",onChange:o,className:"mt-1 w-full md:w-1/2"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"organizationPhone",className:"block text-sm font-medium text-gray-700",children:"เบอร์โทรศัพท์องค์กร"}),t.jsx("input",{type:"tel",name:"organizationPhone",id:"organizationPhone",value:a.organizationPhone||"",onChange:o,className:"mt-1 w-full md:w-1/2"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700",children:"อีเมลสำหรับติดต่อ (สาธารณะ)"}),t.jsx("input",{type:"email",name:"contactEmail",id:"contactEmail",value:a.contactEmail,onChange:o,className:"mt-1 w-full md:w-1/2"})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("label",{htmlFor:"developerName",className:"block text-sm font-medium text-gray-700",children:"ชื่อผู้พัฒนา"}),t.jsx("input",{type:"text",name:"developerName",id:"developerName",value:a.developerName||"",onChange:o,className:"mt-1 w-full md:w-1/2"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"developerTitle",className:"block text-sm font-medium text-gray-700",children:"ตำแหน่ง/สังกัดผู้พัฒนา"}),t.jsx("input",{type:"text",name:"developerTitle",id:"developerTitle",value:a.developerTitle||"",onChange:o,className:"mt-1 w-full md:w-1/2"})]})]})]}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-red-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Fp,{className:"h-6 w-6 text-red-500 mr-4 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-red-700",children:"โหมดบำรุงรักษา"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1 mb-4",children:"เมื่อเปิดใช้งาน ผู้ใช้ทั้งหมด (ยกเว้น Admin) จะไม่สามารถเข้าสู่ระบบได้ และจะเห็นข้อความแจ้งเตือนการบำรุงรักษา"}),t.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.jsx("label",{htmlFor:"maintenanceMode",className:"block text-sm font-medium text-gray-700",children:"ปิด / เปิด โหมดบำรุงรักษา"}),t.jsx(Yp,{name:"maintenanceMode",checked:a.maintenanceMode,onChange:v=>u("maintenanceMode",v)})]}),a.maintenanceMode&&t.jsxs("div",{className:"animate-scale-in",children:[t.jsx("label",{htmlFor:"maintenanceMessage",className:"block text-sm font-medium text-gray-700",children:"ข้อความที่จะแสดง"}),t.jsx("textarea",{name:"maintenanceMessage",id:"maintenanceMessage",rows:3,value:a.maintenanceMessage,onChange:o,className:"mt-1 w-full"})]})]})]})})]}),s==="api"&&t.jsx("div",{className:"space-y-8 animate-scale-in",children:t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"Google Maps Settings"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"googleMapsApiKey",className:"block text-sm font-medium text-gray-700",children:"Google Maps API Key"}),t.jsx("input",{type:"text",name:"googleMapsApiKey",id:"googleMapsApiKey",value:a.googleMapsApiKey,onChange:o,className:"mt-1 w-full",placeholder:"ใส่ API Key ของคุณที่นี่"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"จำเป็นต้องรีโหลดหน้าเว็บใหม่หลังการเปลี่ยนแปลง"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"mapCenterLat",className:"block text-sm font-medium text-gray-700",children:"พิกัดศูนย์กลาง (ละติจูด)"}),t.jsx("input",{type:"number",step:"any",name:"mapCenterLat",id:"mapCenterLat",value:a.mapCenterLat,onChange:o,className:"mt-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"mapCenterLng",className:"block text-sm font-medium text-gray-700",children:"พิกัดศูนย์กลาง (ลองจิจูด)"}),t.jsx("input",{type:"number",step:"any",name:"mapCenterLng",id:"mapCenterLng",value:a.mapCenterLng,onChange:o,className:"mt-1 w-full"})]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"ใช้สำหรับกำหนดค่าเริ่มต้นของแผนที่เมื่อเปิดใช้งานครั้งแรก (เช่น ศูนย์กลางของพื้นที่ให้บริการ)"})]})]})}),s==="ride_schedule"&&t.jsx("div",{className:"animate-scale-in",children:t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"รูปแบบการจัดการตารางเวรคนขับ"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'การตั้งค่านี้จะเปลี่ยน UI ของหน้า "จัดการตารางเวร" สำหรับ Role OFFICE'}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all ${a.schedulingModel==="individual"?"bg-blue-50 border-blue-400":"border-gray-300 hover:bg-gray-50"}`,children:[t.jsx("input",{type:"radio",name:"schedulingModel",value:"individual",checked:a.schedulingModel==="individual",onChange:o,className:"h-5 w-5 text-blue-600 border-gray-300 focus:ring-blue-500 mt-0.5"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("span",{className:"block text-md font-semibold text-gray-800",children:"รายบุคคล (Individual Shifts)"}),t.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"เจ้าหน้าที่ OFFICE จะกำหนดกะการทำงาน (เช่น กะเช้า, กะบ่าย) ให้กับคนขับแต่ละคนโดยตรง"})]})]}),t.jsxs("label",{className:`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all ${a.schedulingModel==="team"?"bg-blue-50 border-blue-400":"border-gray-300 hover:bg-gray-50"}`,children:[t.jsx("input",{type:"radio",name:"schedulingModel",value:"team",checked:a.schedulingModel==="team",onChange:o,className:"h-5 w-5 text-blue-600 border-gray-300 focus:ring-blue-500 mt-0.5"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("span",{className:"block text-md font-semibold text-gray-800",children:"แบบชุดเวร (Team-based Shifts)"}),t.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"เจ้าหน้าที่ OFFICE จะจัดทีม (คนขับ+เจ้าหน้าที่) และกำหนดวันเข้าเวรแบบ 24 ชั่วโมงให้กับทั้งทีม"})]})]})]})]})}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsxs("button",{type:"submit",className:"flex items-center justify-center px-6 py-3 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-700 transition-colors",children:[t.jsx(Yu,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"บันทึกการตั้งค่า"})]})})]})]})},La=({isOpen:a,onClose:l,onConfirm:s,title:r,message:o})=>a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity duration-300",role:"dialog","aria-modal":"true","aria-labelledby":"confirmation-title","aria-describedby":"confirmation-message",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all duration-300 scale-95 animate-scale-in",children:[t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 p-2 flex items-center justify-center mx-auto mb-4",children:t.jsx(Fp,{className:"w-10 h-10 text-[#005A9C]"})}),t.jsx("h3",{id:"confirmation-title",className:"text-xl font-bold text-gray-800",children:r}),t.jsx("p",{id:"confirmation-message",className:"text-md text-gray-600 mt-2",children:o})]}),t.jsxs("div",{className:"flex justify-center items-center p-4 bg-gray-50 border-t space-x-4",children:[t.jsx("button",{onClick:l,className:"px-8 py-2.5 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"ยกเลิก"}),t.jsx("button",{onClick:s,className:"px-8 py-2.5 text-sm font-semibold text-white bg-[#005A9C] rounded-lg hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"ยืนยัน"})]})]})}):null,US=({isOpen:a,onClose:l,title:s,options:r})=>a?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",role:"dialog","aria-modal":"true","aria-labelledby":s?"action-sheet-title":void 0,children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:l,"aria-hidden":"true"}),t.jsx("div",{className:"relative w-full bg-gray-100 rounded-t-2xl shadow-xl transition-transform duration-300 transform translate-y-0 animate-slide-up",children:t.jsxs("div",{className:"p-4",children:[s&&t.jsx("h3",{id:"action-sheet-title",className:"text-center text-sm font-semibold text-gray-500 mb-3",children:s}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.map((o,u)=>t.jsxs("button",{onClick:o.onClick,className:`w-full text-left text-lg text-blue-600 p-4 flex items-center ${u<r.length-1?"border-b border-gray-200":""}`,children:[o.icon&&t.jsx(o.icon,{className:"w-6 h-6 mr-4 text-gray-600"}),t.jsx("span",{children:o.label})]},o.label))}),t.jsx("div",{className:"mt-3",children:t.jsx("button",{onClick:l,className:"w-full text-lg font-semibold text-blue-600 p-4 bg-white rounded-xl shadow-sm",children:"ยกเลิก"})})]})})]}):null,$p=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Kp=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),t.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),OS=({isOpen:a,onClose:l,onCapture:s})=>{const r=j.useRef(null),o=j.useRef(null),[u,h]=j.useState(null),[p,y]=j.useState(null),x=j.useCallback(()=>{u&&(u.getTracks().forEach(w=>w.stop()),h(null))},[u]);j.useEffect(()=>(a?(y(null),(async()=>{try{const C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});h(C),r.current&&(r.current.srcObject=C)}catch(C){console.error("Error accessing camera:",C),y("ไม่สามารถเข้าถึงกล้องได้ กรุณาตรวจสอบการอนุญาตในเบราว์เซอร์ของคุณ")}})()):x(),()=>{x()}),[a,x]);const v=()=>{if(r.current&&o.current){const w=r.current,C=o.current,A=C.getContext("2d");if(A){C.width=w.videoWidth,C.height=w.videoHeight,A.drawImage(w,0,0,C.width,C.height);const _=C.toDataURL("image/jpeg",.9);s(_)}}},b=()=>{x(),l()};return a?t.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-50 flex flex-col justify-center items-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"camera-modal-title",children:[t.jsx("h2",{id:"camera-modal-title",className:"sr-only",children:"Camera for profile picture"}),t.jsxs("div",{className:"relative w-full max-w-lg aspect-square bg-black rounded-lg overflow-hidden shadow-2xl",children:[p?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white p-4",children:[t.jsx(Kp,{className:"w-16 h-16 text-red-400 mb-4"}),t.jsx("p",{className:"text-center",children:p})]}):t.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),t.jsx("canvas",{ref:o,style:{display:"none"}})]}),t.jsxs("div",{className:"flex items-center justify-around w-full max-w-lg mt-6",children:[t.jsxs("button",{onClick:b,className:"flex flex-col items-center justify-center text-white font-semibold","aria-label":"Close camera",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-700 bg-opacity-50 flex items-center justify-center mb-1",children:t.jsx(ht,{className:"w-8 h-8"})}),t.jsx("span",{children:"ยกเลิก"})]}),t.jsxs("button",{onClick:v,disabled:!!p,className:"flex flex-col items-center justify-center text-white font-semibold disabled:opacity-50","aria-label":"Capture photo",children:[t.jsx("div",{className:"w-20 h-20 rounded-full bg-white flex items-center justify-center p-1.5 shadow-lg mb-1",children:t.jsx("div",{className:"w-full h-full rounded-full border-4 border-black"})}),t.jsx("span",{children:"ถ่ายภาพ"})]}),t.jsx("div",{className:"w-16 h-16"})]})]}):null},uu=({user:a,onLogout:l})=>{const[s,r]=j.useState(!1),[o,u]=j.useState(!1),[h,p]=j.useState(null),[y,x]=j.useState(!1),[v,b]=j.useState(!1),[w,C]=j.useState(a.profileImageUrl||Jt),[A,_]=j.useState({firstName:a.name.split(" ")[0]||"",lastName:a.name.split(" ")[1]||"",phone:a.phone||""}),[M,k]=j.useState({currentPassword:"",newPassword:"",confirmNewPassword:""});j.useEffect(()=>{_({firstName:a.name.split(" ")[0]||"",lastName:a.name.split(" ")[1]||"",phone:a.phone||""}),C(a.profileImageUrl||Jt)},[a]);const I=ae=>{p(ae),setTimeout(()=>p(null),3e3)},V=()=>{r(!0)},B=()=>{_({firstName:a.name.split(" ")[0]||"",lastName:a.name.split(" ")[1]||"",phone:a.phone||""}),r(!1)},L=ae=>{ae.preventDefault(),u(!0)},te=()=>{u(!1),console.log("Saving profile:",{...a,name:`${A.firstName} ${A.lastName}`,phone:A.phone}),r(!1),I("✅ บันทึกข้อมูลสำเร็จแล้ว!")},W=ae=>{const{name:$,value:P}=ae.target;_(E=>({...E,[$]:P}))},z=ae=>{const{name:$,value:P}=ae.target;k(E=>({...E,[$]:P}))},H=ae=>{if(ae.preventDefault(),M.newPassword!==M.confirmNewPassword){alert("New passwords do not match!");return}if(!M.newPassword||M.newPassword.length<6){alert("New password must be at least 6 characters long.");return}console.log("Changing password..."),alert("Password changed successfully!"),k({currentPassword:"",newPassword:"",confirmNewPassword:""})},Z=ae=>{C(ae),b(!1),I("📸 อัปเดตรูปภาพโปรไฟล์สำเร็จแล้ว!")},U=[{label:"เลือกรูปภาพจากคลัง",icon:$p,onClick:()=>{console.log("Choose from library"),x(!1),I("อัปโหลดรูปภาพสำเร็จแล้ว")}},{label:"ถ่ายภาพใหม่",icon:Kp,onClick:()=>{x(!1),b(!0)}}];return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"โปรไฟล์และการตั้งค่า"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx("form",{onSubmit:L,children:t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)]",children:"ข้อมูลส่วนตัว"}),!s&&t.jsxs("button",{type:"button",onClick:V,className:"flex items-center text-sm font-semibold text-white bg-[var(--wecare-blue)] px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Qt,{className:"w-4 h-4 mr-2"}),"แก้ไขข้อมูล"]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("img",{src:w,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}),s&&t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-sm font-semibold text-[var(--wecare-blue)] hover:underline",children:"เปลี่ยนรูปภาพ"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, GIF or PNG. 1MB max."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"ชื่อ"}),s?t.jsx("input",{type:"text",name:"firstName",id:"firstName",value:A.firstName,onChange:W,className:"mt-1 w-full"}):t.jsx("p",{className:"mt-1 text-lg text-gray-900",children:A.firstName})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"นามสกุล"}),s?t.jsx("input",{type:"text",name:"lastName",id:"lastName",value:A.lastName,onChange:W,className:"mt-1 w-full"}):t.jsx("p",{className:"mt-1 text-lg text-gray-900",children:A.lastName})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"อีเมล"}),t.jsx("p",{className:"mt-1 text-gray-700",children:a.email})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"เบอร์โทรศัพท์"}),s?t.jsx("input",{type:"tel",name:"phone",id:"phone",value:A.phone,onChange:W,className:"mt-1 w-full"}):t.jsx("p",{className:"mt-1 text-lg text-gray-900",children:A.phone||"-"})]}),s&&t.jsxs("div",{className:"flex justify-end pt-4 gap-3 border-t",children:[t.jsx("button",{type:"button",onClick:B,className:"px-6 py-2 font-semibold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"ยกเลิก"}),t.jsxs("button",{type:"submit",className:"flex items-center justify-center px-6 py-2 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600 transition-colors",children:[t.jsx(Yu,{className:"w-5 h-5 mr-2"}),"บันทึก"]})]})]})]})})}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"เปลี่ยนรหัสผ่าน"}),t.jsxs("form",{onSubmit:H,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"รหัสผ่านปัจจุบัน"}),t.jsx("input",{type:"password",name:"currentPassword",id:"currentPassword",value:M.currentPassword,onChange:z,className:"mt-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"รหัสผ่านใหม่"}),t.jsx("input",{type:"password",name:"newPassword",id:"newPassword",value:M.newPassword,onChange:z,className:"mt-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmNewPassword",className:"block text-sm font-medium text-gray-700",children:"ยืนยันรหัสผ่านใหม่"}),t.jsx("input",{type:"password",name:"confirmNewPassword",id:"confirmNewPassword",value:M.confirmNewPassword,onChange:z,className:"mt-1 w-full"})]}),t.jsx("div",{className:"pt-2",children:t.jsx("button",{type:"submit",className:"w-full flex items-center justify-center px-4 py-2.5 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-700 transition-colors",children:"เปลี่ยนรหัสผ่าน"})})]})]}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 bg-red-100 text-red-700 font-bold py-2.5 px-4 rounded-lg hover:bg-red-200 transition duration-300",children:[t.jsx(Pu,{className:"w-5 h-5"}),t.jsx("span",{children:"ออกจากระบบ"})]})})]})]}),t.jsx(La,{isOpen:o,onClose:()=>u(!1),onConfirm:te,title:"ยืนยันการแก้ไขข้อมูล",message:"คุณต้องการบันทึกการเปลี่ยนแปลงข้อมูลส่วนตัวใช่หรือไม่?"}),t.jsx(US,{isOpen:y,onClose:()=>x(!1),title:"เปลี่ยนรูปโปรไฟล์",options:U}),t.jsx(OS,{isOpen:v,onClose:()=>b(!1),onCapture:Z}),t.jsx(dn,{message:h})]})},Rg=["หมู่ 1 บ้านหนองตุ้ม","หมู่ 2 ป่าบง","หมู่ 3 เต๋าดิน, เวียงสุทโธ","หมู่ 4 สวนดอก","หมู่ 5 ต้นหนุน","หมู่ 6 สันทรายคองน้อย","หมู่ 7 แม่ใจใต้","หมู่ 8 แม่ใจเหนือ","หมู่ 9 ริมฝาง,สันป่าไหน่","หมู่ 10 ห้วยเฮี่ยน,สันป่ายางยาง","หมู่ 11 ท่าสะแล","หมู่ 12 โป่งถืบ","หมู่ 13 ห้วยบอน","หมู่ 14 เสาหิน","หมู่ 15 โป่งถืบใน","หมู่ 16 ปางผึ้ง","หมู่ 17 ใหม่คองน้อย","หมู่ 18 ศรีดอนชัย","หมู่ 19 ใหม่ชยาราม","หมู่ 20 สระนิคม"],PS=["นาย","นาง","นางสาว","เด็กชาย","เด็กหญิง"],BS=["A","B","AB","O"],VS=["Rh+","Rh-"],zS=["สิทธิบัตรทอง (UC)","ประกันสังคม","ข้าราชการ","ชำระเงินเอง","อื่นๆ"],qS=["ผู้ป่วยติดเตียง","ผู้ป่วยภาวะพึงพิง","ผู้ป่วยยากไร้"],GS=({setActiveView:a})=>{const[l,s]=j.useState(1),r=4,[o,u]=j.useState({title:"",firstName:"",lastName:"",gender:"",nationalId:"",dob:"",age:"",bloodType:"",rhFactor:"",healthCoverage:"",idCardAddress:{houseNumber:"",village:"",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},currentAddress:{houseNumber:"",village:"",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},addressOption:"same",contactPhone:"",landmark:"",latitude:"19.9213",longitude:"99.2131"}),[h,p]=j.useState([]),[y,x]=j.useState([]),[v,b]=j.useState([]),[w,C]=j.useState({file:null,previewUrl:null}),[A,_]=j.useState([]);j.useEffect(()=>{const $={นาย:"ชาย",เด็กชาย:"ชาย",นาง:"หญิง",นางสาว:"หญิง",เด็กหญิง:"หญิง"};u(P=>({...P,gender:$[P.title]||""}))},[o.title]),j.useEffect(()=>{if(o.dob){const $=new Date(o.dob),P=new Date;let E=P.getFullYear()-$.getFullYear();const S=P.getMonth()-$.getMonth();(S<0||S===0&&P.getDate()<$.getDate())&&E--,u(q=>({...q,age:E>=0?`${E} ปี`:""}))}else u($=>({...$,age:""}))},[o.dob]),j.useEffect(()=>{o.addressOption==="same"&&u($=>({...$,currentAddress:$.idCardAddress}))},[o.idCardAddress,o.addressOption]);const M=$=>{const{name:P,value:E}=$.target;u(S=>({...S,[P]:E}))},k=($,P)=>{const{name:E,value:S}=$.target;u(q=>({...q,[P]:{...q[P],[E]:S}}))},I=$=>{u(P=>({...P,addressOption:$.target.value}))},V=$=>{var P;if((P=$.target.files)!=null&&P[0]){const E=$.target.files[0];C({file:E,previewUrl:URL.createObjectURL(E)})}},B=$=>{if($.target.files){const P=Array.from($.target.files);if(A.length+P.length>5){alert("คุณสามารถอัปโหลดเอกสารได้สูงสุด 5 ไฟล์เท่านั้น");return}_(E=>[...E,...P])}},L=$=>{_(P=>P.filter((E,S)=>S!==$))},te=$=>{u(P=>({...P,latitude:$.lat.toString(),longitude:$.lng.toString()}))},W=async $=>{$.preventDefault();const P={full_name:`${o.title?o.title+" ":""}${o.firstName} ${o.lastName}`.trim(),patient_types:h,key_info:{summary:o.landmark||"ข้อมูลสำคัญ",chronic_diseases:y,allergies:v,contact_phone:o.contactPhone,address:o.currentAddress,latitude:o.latitude,longitude:o.longitude}};try{await Lu.createPatient(P),alert("บันทึกข้อมูลผู้ป่วยใหม่สำเร็จ!"),a("patients")}catch(E){alert(`บันทึกไม่สำเร็จ: ${(E==null?void 0:E.message)||"เกิดข้อผิดพลาด"}`)}},z=new Date().toISOString().split("T")[0],H={lat:parseFloat(o.latitude),lng:parseFloat(o.longitude)},Z="mt-1 w-full bg-gray-100 rounded-lg py-2.5 px-3.5 text-gray-800 text-sm",U=()=>s($=>Math.min($+1,r)),ae=()=>s($=>Math.max($-1,1));return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ลงทะเบียนผู้ป่วยใหม่"}),t.jsx("div",{className:"flex items-center justify-between mb-8",children:[1,2,3,4].map($=>t.jsxs("div",{className:"flex items-center flex-1",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${l>=$?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"} font-bold`,children:$}),$<4&&t.jsx("div",{className:`flex-1 h-1 mx-2 ${l>$?"bg-blue-600":"bg-gray-300"}`})]},$))}),t.jsxs("form",{onSubmit:W,className:"space-y-8",children:[l===1&&t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"1. ข้อมูลระบุตัวตน"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"md:col-span-1 flex flex-col items-center",children:[t.jsx("img",{src:w.previewUrl||Jt,alt:"Patient profile",className:"w-36 h-36 rounded-full object-cover border-4 border-gray-200"}),t.jsxs("label",{htmlFor:"profileImage",className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:["อัปโหลดรูปภาพ",t.jsx("input",{type:"file",id:"profileImage",accept:"image/*",onChange:V,className:"sr-only"})]})]}),t.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"คำนำหน้าชื่อ"}),t.jsxs("select",{name:"title",value:o.title,onChange:M,className:"mt-1",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"-- เลือก --"}),PS.map($=>t.jsx("option",{value:$,children:$},$))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"เพศ"}),t.jsx("div",{className:Z,children:o.gender||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ชื่อ"}),t.jsx("input",{type:"text",name:"firstName",value:o.firstName,onChange:M,className:"mt-1",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"นามสกุล"}),t.jsx("input",{type:"text",name:"lastName",value:o.lastName,onChange:M,className:"mt-1",required:!0})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"เลขบัตรประชาชน"}),t.jsx("input",{type:"text",name:"nationalId",value:o.nationalId,onChange:M,className:"mt-1",maxLength:13,pattern:"\\d{13}"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"วัน/เดือน/ปีเกิด"}),t.jsx(Je,{name:"dob",value:o.dob,onChange:M,max:z,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"อายุ"}),t.jsx("div",{className:Z,children:o.age||"-"})]})]})]}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{type:"button",onClick:U,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"ถัดไป"})})]}),l===2&&t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"2. ข้อมูลทางการแพทย์เบื้องต้น"}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(_r,{id:"patientType",options:qS,selectedItems:h,setSelectedItems:p,placeholder:"เลือกประเภทผู้ป่วย (ได้มากกว่า 1)..."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(Ma,{tags:y,setTags:x,placeholder:"เพิ่มโรคประจำตัว...ทีละรายการ"}),t.jsx(Ma,{tags:v,setTags:b,placeholder:"เพิ่มประวัติการแพ้ยา/อาหาร..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"bloodType",className:"block text-sm font-medium text-gray-700",children:"กรุ๊ปเลือด"}),t.jsxs("select",{id:"bloodType",name:"bloodType",value:o.bloodType,onChange:M,"aria-label":"กรุ๊ปเลือด",children:[t.jsx("option",{value:"",children:"-- กรุ๊ปเลือด --"}),BS.map($=>t.jsx("option",{value:$,children:$},$))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"rhFactor",className:"block text-sm font-medium text-gray-700",children:"ปัจจัย Rh"}),t.jsxs("select",{id:"rhFactor",name:"rhFactor",value:o.rhFactor,onChange:M,"aria-label":"ปัจจัย Rh",children:[t.jsx("option",{value:"",children:"-- Rh --"}),VS.map($=>t.jsx("option",{value:$,children:$},$))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"healthCoverage",className:"block text-sm font-medium text-gray-700",children:"สิทธิการรักษา"}),t.jsxs("select",{id:"healthCoverage",name:"healthCoverage",value:o.healthCoverage,onChange:M,"aria-label":"สิทธิการรักษา",children:[t.jsx("option",{value:"",children:"-- สิทธิการรักษา --"}),zS.map($=>t.jsx("option",{value:$,children:$},$))]})]})]})]}),t.jsxs("div",{className:"flex justify-between mt-6",children:[t.jsx("button",{type:"button",onClick:ae,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"ย้อนกลับ"}),t.jsx("button",{type:"button",onClick:U,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"ถัดไป"})]})]}),l===3&&t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"3. ที่อยู่และข้อมูลติดต่อ"}),t.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ส่วนที่ 1: ที่อยู่ตามบัตรประชาชน"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"บ้านเลขที่"}),t.jsx("input",{type:"text",name:"houseNumber",value:o.idCardAddress.houseNumber,onChange:$=>k($,"idCardAddress"),className:"mt-1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"หมู่บ้าน"}),t.jsxs("select",{name:"village",value:o.idCardAddress.village,onChange:$=>k($,"idCardAddress"),className:"mt-1",children:[t.jsx("option",{value:"",children:"-- เลือก --"}),Rg.map($=>t.jsx("option",{value:$,children:$},$))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ตำบล"}),t.jsx("div",{className:"mt-1 p-2.5 bg-gray-100 rounded-lg text-gray-800 text-sm",children:o.idCardAddress.tambon})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"อำเภอ"}),t.jsx("div",{className:"mt-1 p-2.5 bg-gray-100 rounded-lg text-gray-800 text-sm",children:o.idCardAddress.amphoe})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"จังหวัด"}),t.jsx("div",{className:"mt-1 p-2.5 bg-gray-100 rounded-lg text-gray-800 text-sm",children:o.idCardAddress.changwat})]})]})]}),t.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ส่วนที่ 2: ที่อยู่ปัจจุบัน"}),t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"addressOption",value:"same",checked:o.addressOption==="same",onChange:I,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"ใช้ที่อยู่เดียวกับบัตรประชาชน"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"addressOption",value:"new",checked:o.addressOption==="new",onChange:I,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"กรอกที่อยู่ใหม่"})]})]}),o.addressOption==="new"&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 animate-scale-in",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"บ้านเลขที่"}),t.jsx("input",{type:"text",name:"houseNumber",value:o.currentAddress.houseNumber,onChange:$=>k($,"currentAddress"),className:"mt-1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"หมู่บ้าน"}),t.jsxs("select",{name:"village",value:o.currentAddress.village,onChange:$=>k($,"currentAddress"),className:"mt-1",children:[t.jsx("option",{value:"",children:"-- เลือก --"}),Rg.map($=>t.jsx("option",{value:$,children:$},$))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ตำบล"}),t.jsx("input",{type:"text",name:"tambon",value:o.currentAddress.tambon,onChange:$=>k($,"currentAddress"),className:"mt-1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"อำเภอ"}),t.jsx("input",{type:"text",name:"amphoe",value:o.currentAddress.amphoe,onChange:$=>k($,"currentAddress"),className:"mt-1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"จังหวัด"}),t.jsx("input",{type:"text",name:"changwat",value:o.currentAddress.changwat,onChange:$=>k($,"currentAddress"),className:"mt-1"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ส่วนที่ 3: ข้อมูลติดต่อเพิ่มเติม"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"เบอร์โทรศัพท์ผู้ป่วย/ผู้ดูแล"}),t.jsx("input",{type:"tel",name:"contactPhone",value:o.contactPhone,onChange:M,className:"mt-1",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"จุดสังเกต/รายละเอียดที่อยู่เพิ่มเติม"}),t.jsx("textarea",{name:"landmark",rows:2,value:o.landmark,onChange:M,className:"mt-1"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ปักหมุดตำแหน่งที่อยู่ปัจจุบัน"}),t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsx(qp,{position:H,onLocationChange:te})})]})]})]}),t.jsxs("div",{className:"flex justify-between mt-6",children:[t.jsx("button",{type:"button",onClick:ae,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"ย้อนกลับ"}),t.jsx("button",{type:"button",onClick:U,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"ถัดไป"})]})]}),l===4&&t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"4. เอกสารแนบ"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx($u,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsxs("label",{htmlFor:"attachments",className:"mt-2 block text-sm font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:["เลือกไฟล์ (สูงสุด 5 ไฟล์)",t.jsx("input",{type:"file",id:"attachments",multiple:!0,onChange:B,className:"sr-only"})]})]}),A.length>0?t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"text-sm font-medium",children:"ไฟล์ที่อัปโหลดแล้ว:"}),t.jsx("ul",{className:"mt-2 divide-y border rounded-md",children:A.map(($,P)=>t.jsxs("li",{className:"flex items-center justify-between p-3",children:[t.jsxs("div",{className:"flex items-center min-w-0",children:[t.jsx(Au,{className:"w-5 h-5 text-gray-400"}),t.jsx("p",{className:"ml-2 text-sm truncate",children:$.name})]}),t.jsx("button",{type:"button",onClick:()=>L(P),className:"text-red-600 hover:text-red-800","aria-label":`ลบไฟล์ ${$.name}`,title:"ลบไฟล์",children:t.jsx(Gt,{className:"w-5 h-5"})})]},P))})]}):t.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:t.jsx("p",{children:"ยังไม่มีเอกสารแนบ"})}),t.jsxs("div",{className:"flex justify-between mt-6",children:[t.jsx("button",{type:"button",onClick:ae,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"ย้อนกลับ"}),t.jsx("button",{type:"submit",className:"px-8 py-3 bg-[var(--wecare-blue)] text-white text-lg font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"บันทึกข้อมูล"})]})]}),t.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t mt-4",children:[t.jsx("button",{type:"button",onClick:()=>a("patients"),className:"px-6 py-2.5 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-6 py-2.5 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600",children:"บันทึกข้อมูลผู้ป่วย"})]})]})]})},Jp=({name:a,value:l,onChange:s,required:r,minTime:o})=>{const[u,h]=j.useState(""),[p,y]=j.useState("");j.useEffect(()=>{if(l&&l.match(/^\d{2}:\d{2}$/)){const[M,k]=l.split(":");h(M),y(k)}else h(""),y("")},[l]);const x=(M,k)=>{s(M&&k?{target:{name:a,value:`${M}:${k}`}}:{target:{name:a,value:""}})},{minHour:v,minMinute:b}=j.useMemo(()=>{if(!o)return{minHour:-1,minMinute:-1};const[M,k]=o.split(":").map(Number);return{minHour:M,minMinute:k}},[o]),w=M=>{const k=M.target.value;h(k),o&&parseInt(k,10)===v&&parseInt(p,10)<b?(y(""),x(k,"")):x(k,p)},C=M=>{const k=M.target.value;y(k),x(u,k)},A=j.useMemo(()=>Array.from({length:24},(M,k)=>({value:k.toString().padStart(2,"0"),disabled:k<v})),[v]),_=j.useMemo(()=>{const M=parseInt(u,10)===v;return Array.from({length:60},(k,I)=>({value:I.toString().padStart(2,"0"),disabled:M&&I<b}))},[u,v,b]);return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{value:u,onChange:w,required:r,children:[t.jsx("option",{value:"",children:"-- ชั่วโมง --"}),A.map(M=>t.jsx("option",{value:M.value,disabled:M.disabled,children:M.value},M.value))]}),t.jsx("span",{className:"text-gray-700 font-bold",children:":"}),t.jsxs("select",{value:p,onChange:C,required:r,children:[t.jsx("option",{value:"",children:"-- นาที --"}),_.map(M=>t.jsx("option",{value:M.value,disabled:M.disabled,children:M.value},M.value))]})]})},HS=({isOpen:a,onClose:l,title:s,message:r})=>a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity duration-300",role:"dialog","aria-modal":"true","aria-labelledby":"success-title",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all duration-300 scale-95 animate-scale-in",children:[t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 p-2 flex items-center justify-center mx-auto mb-4",children:t.jsx(Bu,{className:"w-10 h-10 text-green-600"})}),t.jsx("h3",{id:"success-title",className:"text-xl font-bold text-gray-800",children:s}),t.jsx("p",{className:"text-md text-gray-600 mt-2",children:r})]}),t.jsx("div",{className:"flex justify-center items-center p-4 bg-gray-50 border-t",children:t.jsx("button",{onClick:l,className:"w-full px-8 py-2.5 text-sm font-semibold text-white bg-[#28A745] rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"ตกลง"})})]})}):null,du=["นัดหมอตามปกติ","รับยา","ฉุกเฉิน","กายภาพบำบัด","อื่นๆ"],FS=({setActiveView:a,preselectedPatientId:l,addNotification:s})=>{const[r,o]=j.useState({patientId:"",appointmentDate:"",appointmentTime:"",tripType:du[0],caregiverCount:0,contactPhone:"",pickupLocation:"",destination:"โรงพยาบาลฝาง"}),[u,h]=j.useState([]),[p,y]=j.useState(!1),[x,v]=j.useState([]),[b,w]=j.useState(null),[C,A]=j.useState(!1),_=new Date().toISOString().split("T")[0];j.useEffect(()=>{l&&o(V=>({...V,patientId:l}))},[l]),j.useEffect(()=>{(async()=>{y(!0);try{const L=(await Lu.getPatients()||[]).map(te=>({id:te.id,fullName:te.full_name||te.fullName}));h(L)}catch{s({message:"ไม่สามารถโหลดรายชื่อผู้ป่วยได้",isRead:!1})}finally{y(!1)}})()},[]),j.useEffect(()=>{const V=new Date,B=V.toISOString().split("T")[0];if(r.appointmentDate===B){const L=V.getHours(),te=V.getMinutes(),W=`${String(L).padStart(2,"0")}:${String(te).padStart(2,"0")}`;if(w(W),r.appointmentTime){const[z,H]=r.appointmentTime.split(":").map(Number);(z<L||z===L&&H<te)&&o(Z=>({...Z,appointmentTime:""}))}}else w(null)},[r.appointmentDate,r.appointmentTime]);const M=V=>{const{name:B,value:L}=V.target;o(te=>({...te,[B]:B==="caregiverCount"?Math.max(0,parseInt(L,10)||0):L}))},k=async V=>{if(V.preventDefault(),!r.patientId||!r.appointmentDate||!r.appointmentTime||!r.pickupLocation||!r.destination){s({message:"กรุณากรอกข้อมูลให้ครบถ้วน",isRead:!1});return}const B=new Date(`${r.appointmentDate}T${r.appointmentTime}:00`).toISOString(),L={patient_id:r.patientId,appointment_time:B,pickup_location:r.pickupLocation,destination:r.destination,special_needs:x.join(", "),caregiver_count:r.caregiverCount,contact_phone:r.contactPhone};try{await Aa.createRide(L);const te=u.find(W=>W.id===r.patientId);s({message:`ส่งคำขอเดินทางสำหรับคุณ ${(te==null?void 0:te.fullName)||""} เรียบร้อยแล้ว`,isRead:!1}),A(!0),o({patientId:"",appointmentDate:"",appointmentTime:"",tripType:du[0],caregiverCount:0,contactPhone:"",pickupLocation:"",destination:"โรงพยาบาลฝาง"}),v([])}catch{s({message:"ไม่สามารถสร้างคำขอเดินทางได้ กรุณาลองใหม่",isRead:!1})}},I=()=>{A(!1),a("rides")};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"สร้างคำขอการเดินทางใหม่"}),t.jsx("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("form",{onSubmit:k,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{htmlFor:"patientId",className:"block text-sm font-medium text-gray-700 mb-1",children:"ผู้ป่วย"}),t.jsxs("select",{name:"patientId",id:"patientId",value:r.patientId,onChange:M,required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"-- กรุณาเลือกผู้ป่วย --"}),p?t.jsx("option",{children:"กำลังโหลด..."}):u.map(V=>t.jsx("option",{value:V.id,children:V.fullName},V.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"pickupLocation",className:"block text-sm font-medium text-gray-700 mb-1",children:"จุดรับผู้ป่วย"}),t.jsx("input",{type:"text",name:"pickupLocation",id:"pickupLocation",value:r.pickupLocation,onChange:M,placeholder:"เช่น บ้านเลขที่ 123 หมู่ 1 ...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-gray-700 mb-1",children:"จุดหมายปลายทาง"}),t.jsx("input",{type:"text",name:"destination",id:"destination",value:r.destination,onChange:M,placeholder:"เช่น โรงพยาบาลฝาง",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"tripType",className:"block text-sm font-medium text-gray-700 mb-1",children:"ประเภทการเดินทาง"}),t.jsx("select",{name:"tripType",id:"tripType",value:r.tripType,onChange:M,required:!0,children:du.map(V=>t.jsx("option",{value:V,children:V},V))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"appointmentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"วันนัดหมาย"}),t.jsx(Je,{name:"appointmentDate",value:r.appointmentDate,onChange:M,required:!0,min:_})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"appointmentTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"เวลานัดหมาย"}),t.jsx(Jp,{name:"appointmentTime",value:r.appointmentTime,onChange:M,required:!0,minTime:b})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ความต้องการพิเศษของผู้ป่วย"}),t.jsx(Ma,{tags:x,setTags:v,placeholder:"พิมพ์แล้วกด + หรือ Enter (เช่น 'ต้องใช้วีลแชร์')"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"caregiverCount",className:"block text-sm font-medium text-gray-700 mb-1",children:"จำนวนผู้ดูแลที่จะเดินทางไปด้วย"}),t.jsx("input",{type:"number",name:"caregiverCount",id:"caregiverCount",value:r.caregiverCount,onChange:M,min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"เบอร์โทรติดต่อระหว่างเดินทาง"}),t.jsx("input",{type:"tel",name:"contactPhone",id:"contactPhone",value:r.contactPhone,onChange:M,placeholder:"เบอร์โทรผู้ป่วย หรือผู้ดูแล",required:!0})]})]}),t.jsxs("div",{className:"flex justify-end items-center gap-4 pt-4 border-t border-gray-200 mt-8",children:[t.jsx("button",{type:"button",onClick:()=>a("dashboard"),className:"px-6 py-2.5 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-6 py-2.5 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600 transition-colors",children:"ส่งคำขอการเดินทาง"})]})]})}),t.jsx(HS,{isOpen:C,onClose:I,title:"ส่งคำขอสำเร็จ!",message:"คำขอเดินทางของคุณถูกส่งไปยังเจ้าหน้าที่เพื่อตรวจสอบแล้ว คุณสามารถติดตามสถานะได้ที่หน้า 'จัดการการเดินทาง'"})]})},YS={width:"100%",height:"400px"};function $S(){return t.jsxs("div",{style:YS,className:"flex flex-col items-center justify-center h-full bg-gray-100 text-gray-600 p-4 text-center",children:[t.jsx(as,{className:"h-12 w-12 mb-3 text-gray-400"}),t.jsx("p",{className:"font-semibold",children:"ไม่สามารถแสดงแผนที่ได้"}),t.jsx("p",{className:"text-xs mt-1",children:"(จำเป็นต้องใช้ Google Maps API Key)"})]})}const KS=it.memo($S),JS=()=>t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Map Component Test Page"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"This page is for testing the Google Maps component in isolation. It attempts to load the map using the API key from the application's environment variables. Any errors related to the API key or map loading will be displayed below."}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx(KS,{})})]}),vr=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),t.jsx("polyline",{points:"12 19 5 12 12 5"})]}),XS=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),t.jsx("polyline",{points:"15 3 21 3 21 9"}),t.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),Ku=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t.jsx("polyline",{points:"7 10 12 15 17 10"}),t.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),ZS=[{id:"PAT-001",fullName:"สมชาย ใจดี",age:72,keyInfo:"โรคเบาหวาน, ความดันสูง",registeredDate:"2023-01-15T10:00:00Z",registeredBy:"Community A",dob:"1952-03-10",contactPhone:"081-111-1111",chronicDiseases:["เบาหวาน","ความดันสูง","ไขมันในเลือดสูง"],allergies:["ไม่มี"],currentAddress:{houseNumber:"123",village:"หมู่ 1 บ้านหนองตุ้ม",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},idCardAddress:{houseNumber:"123",village:"หมู่ 1 บ้านหนองตุ้ม",tambon:"เวียง",amphoe:"ฝาง",changwat:"เชียงใหม่"},landmark:"บ้านอยู่ใกล้ตลาดสดเทศบาล",latitude:"19.9164",longitude:"99.2128",title:"นาย",gender:"ชาย",nationalId:"1-2345-67890-12-3",patientTypes:["ผู้ป่วยภาวะพึงพิง","ผู้สูงอายุ"],bloodType:"A",rhFactor:"Rh+",healthCoverage:"สิทธิบัตรทอง (UC)",attachments:[{name:"สำเนาบัตรประชาชน.pdf",url:"#",size:"1.2 MB"},{name:"ใบรับรองแพทย์.jpg",url:"#",size:"850 KB"}]}],QS=[{id:"RIDE-103",patientName:"สมชาย ใจดี",destination:"โรงพยาบาลจุฬาลงกรณ์",appointmentTime:"2024-09-19T09:00:00Z",status:ce.COMPLETED,driverName:"Driver One",pickupLocation:""},{id:"RIDE-088",patientName:"สมชาย ใจดี",destination:"โรงพยาบาลกรุงเทพ",appointmentTime:"2024-08-15T14:00:00Z",status:ce.COMPLETED,driverName:"Driver Two",pickupLocation:""},{id:"RIDE-071",patientName:"สมชาย ใจดี",destination:"โรงพยาบาลกรุงเทพ",appointmentTime:"2024-07-12T10:30:00Z",status:ce.CANCELLED,driverName:"",pickupLocation:""},{id:"RIDE-065",patientName:"สมชาย ใจดี",destination:"โรงพยาบาลฝาง",appointmentTime:"2024-06-20T11:00:00Z",status:ce.COMPLETED,driverName:"Driver One",pickupLocation:""}],WS=({patientId:a,setActiveView:l})=>{const[s,r]=j.useState(ZS.find(y=>y.id===a)),[o,u]=j.useState(!1);if(!s)return t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"ไม่พบข้อมูลผู้ป่วย"}),t.jsx("button",{onClick:()=>l("patients"),className:"mt-4 text-blue-600 hover:underline",children:"กลับไปที่หน้ารายชื่อผู้ป่วย"})]});const h=y=>{r(y),u(!1)},p=`https://www.google.com/maps/search/?api=1&query=${s.latitude},${s.longitude}`;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("button",{onClick:()=>l("patients"),className:"flex items-center text-gray-600 hover:text-gray-900 font-semibold",children:[t.jsx(vr,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"กลับไปหน้ารายชื่อ"})]}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[t.jsx("img",{src:s.profileImageUrl||Jt,alt:s.fullName,className:"w-32 h-32 rounded-full flex-shrink-0 object-cover border-4 border-blue-200"}),t.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s.fullName}),t.jsxs("p",{className:"text-gray-500 mt-1",children:["อายุ ",s.age," ปี | ID: ",s.id]}),t.jsx("div",{className:"mt-3 flex flex-wrap justify-center sm:justify-start gap-2",children:s.patientTypes.map(y=>t.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:y},y))})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsxs("button",{onClick:()=>u(!0),className:"flex items-center justify-center px-4 py-2 font-semibold text-[var(--wecare-blue)] bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors",children:[t.jsx(Qt,{className:"w-5 h-5 mr-2"})," แก้ไขข้อมูล"]}),t.jsxs("button",{onClick:()=>l("request_ride",{patientId:s.id}),className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[var(--wecare-green)] rounded-lg shadow-sm hover:bg-green-600 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"})," ร้องขอการเดินทาง"]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"ข้อมูลติดต่อและที่อยู่ปัจจุบัน"}),t.jsxs("dl",{className:"space-y-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("dt",{className:"font-semibold text-gray-600",children:"ที่อยู่:"}),t.jsx("dd",{className:"text-gray-800",children:`${s.currentAddress.houseNumber} ${s.currentAddress.village}, ต.${s.currentAddress.tambon}, อ.${s.currentAddress.amphoe}, จ.${s.currentAddress.changwat}`})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-semibold text-gray-600",children:"เบอร์โทรศัพท์:"}),t.jsx("dd",{className:"text-gray-800",children:s.contactPhone})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-semibold text-gray-600",children:"จุดสังเกต:"}),t.jsx("dd",{className:"text-gray-800",children:s.landmark||"ไม่มี"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-semibold text-gray-600",children:"พิกัด:"}),t.jsx("dd",{className:"text-gray-800 font-mono text-xs",children:`Lat: ${s.latitude}, Long: ${s.longitude}`})]})]}),t.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"mt-4 inline-flex items-center text-sm font-semibold text-blue-600 hover:text-blue-800",children:["ดูตำแหน่งบนแผนที่ ",t.jsx(XS,{className:"w-4 h-4 ml-2"})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"ข้อมูลทางการแพทย์"}),t.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm mb-4",children:[t.jsxs("div",{children:[t.jsx("dt",{className:"font-semibold text-gray-600",children:"กรุ๊ปเลือด:"}),t.jsx("dd",{className:"text-gray-800",children:`${s.bloodType} ${s.rhFactor}`})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("dt",{className:"font-semibold text-gray-600",children:"สิทธิการรักษา:"}),t.jsx("dd",{className:"text-gray-800",children:s.healthCoverage})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"โรคประจำตัว"}),t.jsx("ul",{className:"list-disc list-inside text-sm text-gray-800 space-y-1",children:s.chronicDiseases.map(y=>t.jsx("li",{children:y},y))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"ประวัติการแพ้ยา/อาหาร"}),t.jsx("ul",{className:"list-disc list-inside text-sm text-gray-800 space-y-1",children:s.allergies.map(y=>t.jsx("li",{children:y},y))})]})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] mb-4",children:"เอกสารแนบ"}),t.jsxs("ul",{className:"space-y-2",children:[s.attachments.map(y=>t.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-800",children:y.name}),t.jsx("p",{className:"text-xs text-gray-500",children:y.size})]}),t.jsx("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:t.jsx(Ku,{className:"w-5 h-5"})})]},y.name)),s.attachments.length===0&&t.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"ไม่มีเอกสารแนบ"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--wecare-blue)] p-6 pb-4",children:"ประวัติการเดินทางล่าสุด"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50/75",children:t.jsxs("tr",{className:"text-left",children:[t.jsx("th",{className:"px-6 py-3 font-semibold",children:"วัน-เวลา"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"ปลายทาง"}),t.jsx("th",{className:"px-6 py-3 font-semibold",children:"สถานะ"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:QS.map(y=>t.jsxs("tr",{className:"hover:bg-gray-50/50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:un(y.appointmentTime)}),t.jsx("td",{className:"px-6 py-4",children:y.destination}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(Ia,{status:y.status})})]},y.id))})]})})]})]})]}),t.jsx(Gp,{isOpen:o,onClose:()=>u(!1),patient:s,onSave:h})]})},eE=({team:a,driverName:l,driverProfileImageUrl:s,staffNames:r,onEdit:o,onDelete:u})=>t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col transition-all hover:shadow-md hover:border-blue-300",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsx("h3",{className:"text-lg font-bold text-gray-800",children:a.name})}),t.jsxs("div",{className:"p-4 space-y-4 flex-grow text-sm",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:s||Jt,alt:l,className:"w-16 h-16 rounded-full object-cover border-2 border-blue-200"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5",children:[t.jsx(hr,{className:"w-4 h-4 text-blue-600"})," คนขับ"]}),t.jsx("p",{className:"font-semibold text-gray-800 text-base",children:l})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-16 flex justify-center flex-shrink-0",children:t.jsx(on,{className:"w-6 h-6 mr-3 text-green-600 mt-1"})}),t.jsxs("div",{className:"ml-4",children:[t.jsxs("p",{className:"text-xs text-gray-500",children:["เจ้าหน้าที่ (",r.length,")"]}),t.jsx("ul",{className:"list-disc list-inside space-y-0.5 mt-1",children:r.map((h,p)=>t.jsx("li",{className:"text-gray-700",children:h},p))})]})]})]}),t.jsxs("div",{className:"p-3 bg-gray-50 border-t flex justify-end items-center space-x-2",children:[t.jsx("button",{onClick:o,className:"p-2 rounded-full text-gray-500 hover:bg-blue-100 hover:text-blue-700",title:"แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:u,className:"p-2 rounded-full text-gray-500 hover:bg-red-100 hover:text-red-700",title:"ลบ",children:t.jsx(Gt,{className:"w-5 h-5"})})]})]}),Ig={name:"",driverId:""},tE=({isOpen:a,onClose:l,onSave:s,team:r,availableDrivers:o,availableStaff:u})=>{const[h,p]=j.useState(""),[y,x]=j.useState(""),[v,b]=j.useState([]),[w,C]=j.useState(""),A=!!r,_=u.map(I=>I.name);if(j.useEffect(()=>{if(a){if(r){p(r.name),x(r.driverId);const I=r.staffIds.map(V=>{var B;return(B=u.find(L=>L.id===V))==null?void 0:B.name}).filter(V=>!!V);b(I)}else p(Ig.name),x(Ig.driverId),b([]);C("")}},[r,a,u]),!a)return null;const M=I=>{if(I.length>3){C("สามารถเลือกเจ้าหน้าที่ได้สูงสุด 3 คน");return}C(""),b(I)},k=I=>{if(I.preventDefault(),v.length===0||v.length>3){C("กรุณาเลือกเจ้าหน้าที่ 1-3 คน");return}const V=v.map(L=>{var te;return((te=u.find(W=>W.name===L))==null?void 0:te.id)||""}).filter(L=>L),B={id:A?r.id:`TEAM-${Date.now()}`,name:h,driverId:y,staffIds:V};s(B)};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:A?"แก้ไขทีม":"สร้างทีมใหม่"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:k,className:"overflow-y-auto",children:[t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"ชื่อทีม"}),t.jsx("input",{type:"text",name:"name",id:"name",value:h,onChange:I=>p(I.target.value),className:"mt-1",placeholder:"เช่น ชุดเวร A",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"driverId",className:"block text-sm font-medium text-gray-700",children:"คนขับ (1 คน)"}),t.jsxs("select",{name:"driverId",id:"driverId",value:y,onChange:I=>x(I.target.value),className:"mt-1",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"-- เลือกคนขับ --"}),o.map(I=>t.jsx("option",{value:I.id,children:I.fullName},I.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"staffIds",className:"block text-sm font-medium text-gray-700",children:"เจ้าหน้าที่ (เลือกได้ 3 คน)"}),t.jsx(_r,{id:"staffIds",options:_,selectedItems:v,setSelectedItems:M,placeholder:"เลือกเจ้าหน้าที่..."}),w&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:w})]})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"บันทึกทีม"})]})]})]})})},kg=()=>{const[a,l]=j.useState([]),[s,r]=j.useState([]),[o,u]=j.useState([]),[h,p]=j.useState(!0),[y,x]=j.useState(null),[v,b]=j.useState(""),[w,C]=j.useState(!1),[A,_]=j.useState(!1),[M,k]=j.useState(null),[I,V]=j.useState(null),[B,L]=j.useState(null);j.useEffect(()=>{te()},[]);const te=async()=>{try{p(!0),x(null);const[E,S,q]=await Promise.all([Ta.getTeams(),an.getDrivers(),ue("/users")]);l(Array.isArray(E)?E:(E==null?void 0:E.teams)||[]),r(Array.isArray(S)?S:(S==null?void 0:S.drivers)||[]),u(Array.isArray(q)?q:(q==null?void 0:q.users)||[])}catch(E){console.error("Failed to load data:",E),x(E.message||"ไม่สามารถโหลดข้อมูลได้")}finally{p(!1)}},W=j.useMemo(()=>{const E=new Map;return[...s,...o].forEach(q=>{const X="fullName"in q?q.fullName:q.name;E.set(q.id,{name:X,profileImageUrl:q.profileImageUrl})}),E},[s,o]),z=E=>{L(E),setTimeout(()=>L(null),3e3)},H=()=>{k(null),C(!0)},Z=E=>{k(E),C(!0)},U=async E=>{try{M?(await Ta.updateTeam(E.id,E),z(`✅ แก้ไขข้อมูลทีม "${E.name}" สำเร็จ`)):(await Ta.createTeam(E),z(`✅ สร้างทีม "${E.name}" สำเร็จ`)),await te(),C(!1)}catch(S){console.error("Failed to save team:",S),z("❌ ไม่สามารถบันทึกข้อมูลทีมได้")}C(!1)},ae=E=>{V(E),_(!0)},$=()=>{I&&(l(E=>E.filter(S=>S.id!==I.id)),z(`🗑️ ลบทีม "${I.name}" เรียบร้อยแล้ว`)),_(!1),V(null)},P=j.useMemo(()=>v?a.filter(E=>E.name.toLowerCase().includes(v.toLowerCase())):a,[a,v]);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-6 gap-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการชุดเวร (Team Management)"}),t.jsxs("button",{onClick:H,className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"สร้างทีมใหม่"})]})]}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"relative w-full md:w-1/3",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx(jl,{className:"w-5 h-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"ค้นหาด้วยชื่อทีม...",value:v,onChange:E=>b(E.target.value),className:"w-full pl-10 pr-4 py-2"})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(E=>{const S=W.get(E.driverId)||{name:"N/A",profileImageUrl:""},q=(E.staffIds||[]).map(X=>{var oe;return((oe=W.get(X))==null?void 0:oe.name)||"N/A"});return t.jsx(eE,{team:E,driverName:S.name,driverProfileImageUrl:S.profileImageUrl,staffNames:q,onEdit:()=>Z(E),onDelete:()=>ae(E)},E.id)})}),P.length===0&&t.jsxs("div",{className:"text-center py-10 px-4 col-span-full",children:[t.jsx("h3",{className:"text-xl font-bold text-[#005A9C]",children:v?"ไม่พบทีมที่ตรงกับคำค้นหา":"ยังไม่มีทีมที่สร้างไว้"}),t.jsx("p",{className:"text-gray-500 mt-2",children:v?"ลองใช้คำค้นหาอื่น":'คลิก "สร้างทีมใหม่" เพื่อเริ่มต้น'})]}),t.jsx(tE,{isOpen:w,onClose:()=>C(!1),onSave:U,team:M,availableDrivers:s,availableStaff:o}),t.jsx(La,{isOpen:A,onClose:()=>_(!1),onConfirm:$,title:`ยืนยันการลบทีม "${I==null?void 0:I.name}"`,message:"คุณแน่ใจหรือไม่ว่าต้องการลบทีมนี้? การกระทำนี้ไม่สามารถย้อนกลับได้"}),t.jsx(dn,{message:B})]})},nE=({onSelect:a,onClose:l,position:s})=>{const r=Object.values(_s),o=u=>{a(u),l()};return t.jsxs("div",{className:"absolute z-10 bg-white border border-gray-300 rounded-lg shadow-lg p-2 space-y-1 popover-content",style:{top:s.y,left:s.x},children:[r.map(u=>t.jsx("button",{onClick:()=>o(u),className:"w-full text-left px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:u},u)),t.jsx("div",{className:"border-t my-1"}),t.jsx("button",{onClick:l,className:"w-full text-left px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-md",children:"ยกเลิก"})]})},sE={[_s.MORNING]:"bg-yellow-200 text-yellow-800",[_s.AFTERNOON]:"bg-blue-200 text-blue-800",[_s.NIGHT]:"bg-indigo-200 text-indigo-800",[_s.DAY_OFF]:"bg-gray-200 text-gray-700",[_s.ON_LEAVE]:"bg-red-200 text-red-800"},lE=({drivers:a})=>{const[l,s]=j.useState(me().startOf("week")),[r,o]=j.useState({}),[u,h]=j.useState(null),p=j.useRef(null),y=(C,A,_)=>{var V;const M=`${C}-${A.format("YYYY-MM-DD")}`,k=_.target.getBoundingClientRect(),I=(V=p.current)==null?void 0:V.getBoundingClientRect();h({key:M,visible:!0,x:k.left-((I==null?void 0:I.left)||0),y:k.top-((I==null?void 0:I.top)||0)+k.height})},x=C=>{u&&o(A=>({...A,[u.key]:C})),h(null)};j.useEffect(()=>{const C=A=>{u&&!A.target.closest(".schedule-cell, .popover-content")&&h(null)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[u]);const v=Array.from({length:7},(C,A)=>l.add(A,"day")),b=l.format("D MMM"),w=l.add(6,"day").format("D MMM YYYY");return t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative",ref:p,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("button",{onClick:()=>s(l.subtract(1,"week")),className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Zt,{})}),t.jsxs("h3",{className:"font-bold text-lg",children:["สัปดาห์: ",b," - ",w]}),t.jsx("button",{onClick:()=>s(l.add(1,"week")),className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Ht,{})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50",children:[t.jsx("th",{className:"p-3 text-left font-semibold text-sm text-gray-600 border",children:"คนขับ"}),v.map(C=>t.jsxs("th",{className:"p-3 text-center font-semibold text-sm text-gray-600 border",children:[C.format("ddd"),t.jsx("br",{}),C.format("D")]},C.format("YYYY-MM-DD")))]})}),t.jsx("tbody",{children:a.map(C=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 font-medium text-gray-800 border",children:C.fullName}),v.map(A=>{const _=`${C.id}-${A.format("YYYY-MM-DD")}`,M=r[_];return t.jsx("td",{onClick:k=>y(C.id,A,k),className:"p-1 border text-center cursor-pointer hover:bg-gray-100 transition-colors schedule-cell h-16",children:M&&t.jsx("div",{className:`text-xs font-bold rounded p-1 ${sE[M]}`,children:M})},_)})]},C.id))})]})}),(u==null?void 0:u.visible)&&t.jsx(nE,{onSelect:x,onClose:()=>h(null),position:{x:u.x,y:u.y}})]})},aE=({isOpen:a,onClose:l,onSave:s,team:r,date:o,allVehicles:u,currentSchedule:h})=>{const[p,y]=j.useState(""),[x,v]=j.useState(""),[b,w]=j.useState("");j.useEffect(()=>{if(a){const _=`${r.id}-${o.format("YYYY-MM-DD")}`,M=h[_];M?(y(M.status),v(M.vehicleId||"")):(y(""),v("")),w("")}},[a,r,o,h]);const C=j.useMemo(()=>{const _=o.format("YYYY-MM-DD"),M=new Set(Object.keys(h).filter(k=>k.endsWith(_)&&!k.startsWith(r.id)).map(k=>h[k].vehicleId).filter(k=>!!k));return u.filter(k=>k.status!==bt.MAINTENANCE&&!M.has(k.id))},[o,h,u,r.id]),A=()=>{if(w(""),p===ls.ON_DUTY&&!x){w("กรุณาเลือกยานพาหนะสำหรับทีมที่เข้าเวร");return}if(!p)s(r.id,o,null);else{const _={status:p,vehicleId:p===ls.ON_DUTY?x:void 0};s(r.id,o,_)}};return a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"กำหนดเวร"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"ทีม:"})," ",r.name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"วันที่:"})," ",o.format("D MMMM BBBB")]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"สถานะ"}),t.jsxs("select",{id:"status",value:p,onChange:_=>y(_.target.value),className:"mt-1 w-full",children:[t.jsx("option",{value:"",children:"-- ไม่กำหนด --"}),t.jsx("option",{value:ls.ON_DUTY,children:"เข้าเวร (24 ชม.)"}),t.jsx("option",{value:ls.REST_DAY,children:"วันพัก"})]})]}),p===ls.ON_DUTY&&t.jsxs("div",{className:"animate-fade-in-up",children:[t.jsx("label",{htmlFor:"vehicleId",className:"block text-sm font-medium text-gray-700",children:"ยานพาหนะ"}),t.jsxs("select",{id:"vehicleId",value:x,onChange:_=>v(_.target.value),className:"mt-1 w-full",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"-- เลือกรถที่ว่าง --"}),C.map(_=>t.jsxs("option",{value:_.id,children:[_.licensePlate," (",_.model,")"]},_.id))]}),C.length===0&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"ไม่มีรถว่างในวันนี้"})]}),b&&t.jsx("p",{className:"text-sm text-red-600",children:b})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3",children:[t.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"ยืนยัน"})]})]})}):null},iE={[ls.ON_DUTY]:"bg-green-200 text-green-800",[ls.REST_DAY]:"bg-gray-200 text-gray-700"},rE=({teams:a,vehicles:l})=>{const[s,r]=j.useState(me()),[o,u]=j.useState({}),[h,p]=j.useState(!1),[y,x]=j.useState(null),v=j.useMemo(()=>new Map(l.map(M=>[M.id,M])),[l]),b=(M,k)=>{x({team:M,date:k}),p(!0)},w=(M,k,I)=>{const V=`${M}-${k.format("YYYY-MM-DD")}`;u(B=>{const L={...B};return I&&I.status?L[V]=I:delete L[V],L}),p(!1)},C=s.startOf("month"),A=s.daysInMonth(),_=Array.from({length:A},(M,k)=>C.date(k+1));return t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("button",{onClick:()=>r(s.subtract(1,"month")),className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Zt,{})}),t.jsx("h3",{className:"font-bold text-lg",children:s.format("MMMM BBBB")}),t.jsx("button",{onClick:()=>r(s.add(1,"month")),className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Ht,{})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-collapse min-w-[800px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50",children:[t.jsx("th",{className:"p-2 text-left font-semibold text-sm text-gray-600 border",children:"ทีม"}),_.map(M=>t.jsxs("th",{className:"p-2 text-center font-semibold text-sm text-gray-600 border w-20",children:[t.jsx("div",{className:"text-xs",children:M.format("ddd")}),t.jsx("div",{children:M.format("D")})]},M.format("YYYY-MM-DD")))]})}),t.jsx("tbody",{children:a.map(M=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-2 font-medium text-gray-800 border",children:M.name}),_.map(k=>{const I=`${M.id}-${k.format("YYYY-MM-DD")}`,V=o[I],B=V!=null&&V.vehicleId?v.get(V.vehicleId):null;return t.jsx("td",{onClick:()=>b(M,k),className:"p-1 border text-center cursor-pointer hover:bg-gray-100 transition-colors h-16 align-top",children:V&&t.jsxs("div",{className:`text-xs font-bold rounded p-1 text-left ${iE[V.status]}`,children:[t.jsx("p",{children:V.status}),B&&t.jsx("p",{className:"font-mono text-[10px] truncate",children:B.licensePlate})]})},I)})]},M.id))})]})}),h&&y&&t.jsx(aE,{isOpen:h,onClose:()=>p(!1),onSave:w,team:y.team,date:y.date,allVehicles:l,currentSchedule:o})]})};Be.AVAILABLE,Be.ON_TRIP,Be.AVAILABLE,Be.OFFLINE,Be.INACTIVE;const oE={"TEAM-A":"ชุดเวร A","TEAM-B":"ชุดเวร B"};bt.AVAILABLE,me().add(3,"month").toISOString(),bt.AVAILABLE,me().add(1,"month").toISOString(),bt.MAINTENANCE,me().subtract(1,"week").toISOString(),bt.AVAILABLE,me().add(6,"month").toISOString(),bt.ASSIGNED,me().add(4,"month").toISOString();me().subtract(2,"day").toISOString(),me().subtract(1,"week").toISOString();const Lg={systemSettings:{schedulingModel:"individual"}},Ug=()=>{const[a,l]=j.useState(Lg.systemSettings.schedulingModel),[s,r]=j.useState([]),[o,u]=j.useState([]),[h,p]=j.useState([]),[y,x]=j.useState(!0);j.useEffect(()=>{v()},[]);const v=async()=>{try{x(!0);const[w,C,A]=await Promise.all([an.getDrivers(),Ta.getTeams(),ue("/vehicles")]);r(Array.isArray(w)?w:(w==null?void 0:w.drivers)||[]),u(Array.isArray(C)?C:(C==null?void 0:C.teams)||[]),p(Array.isArray(A)?A:(A==null?void 0:A.vehicles)||[])}catch(w){console.error("Failed to load data:",w)}finally{x(!1)}},b=w=>{const C=w?"team":"individual";l(C),Lg.systemSettings.schedulingModel=C};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการตารางเวร"}),t.jsx("p",{className:"mt-1 text-gray-600",children:"กำหนดตารางเวรสำหรับคนขับหรือทีม"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border shadow-sm",children:[t.jsx("span",{className:`font-semibold ${a==="individual"?"text-[#005A9C]":"text-gray-500"}`,children:"รายบุคคล"}),t.jsx(Yp,{name:"schedulingModelToggle",checked:a==="team",onChange:b}),t.jsx("span",{className:`font-semibold ${a==="team"?"text-[#005A9C]":"text-gray-500"}`,children:"แบบชุดเวร"})]})]}),y?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"กำลังโหลดข้อมูล..."})}):a==="individual"?t.jsx(lE,{drivers:s}):t.jsx(rE,{teams:o,vehicles:h})]})},Og={licensePlate:"",type:"",brand:"",model:"",status:bt.AVAILABLE,nextMaintenanceDate:""},cE=({isOpen:a,onClose:l,onSave:s,vehicle:r,availableVehicleTypes:o})=>{const[u,h]=j.useState(r||Og),p=!!r;if(j.useEffect(()=>{a&&h(r||Og)},[r,a]),!a)return null;const y=v=>{const{name:b,value:w}=v.target;h(C=>({...C,[b]:w}))},x=v=>{v.preventDefault();const b={id:p?r.id:`VEH-${Date.now()}`,...u};s(b)};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:p?"แก้ไขข้อมูลยานพาหนะ":"เพิ่มยานพาหนะใหม่"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:x,children:[t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"licensePlate",className:"block text-sm font-medium text-gray-700",children:"ทะเบียนรถ"}),t.jsx("input",{type:"text",name:"licensePlate",id:"licensePlate",value:u.licensePlate,onChange:y,className:"mt-1",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"ประเภทรถ"}),t.jsxs("select",{name:"type",id:"type",value:u.type,onChange:y,className:"mt-1",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"-- เลือกประเภทรถ --"}),o.map(v=>t.jsx("option",{value:v.name,children:v.name},v.id))]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700",children:"ยี่ห้อ"}),t.jsx("input",{type:"text",name:"brand",id:"brand",value:u.brand,onChange:y,className:"mt-1"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700",children:"รุ่น"}),t.jsx("input",{type:"text",name:"model",id:"model",value:u.model,onChange:y,className:"mt-1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"สถานะ"}),t.jsxs("select",{name:"status",id:"status",value:u.status,onChange:y,className:"mt-1",required:!0,children:[t.jsx("option",{value:bt.AVAILABLE,children:"พร้อมใช้งาน"}),t.jsx("option",{value:bt.MAINTENANCE,children:"ซ่อมบำรุง"}),t.jsx("option",{value:bt.ASSIGNED,children:"ผูกกับทีมแล้ว"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"nextMaintenanceDate",className:"block text-sm font-medium text-gray-700",children:"วันตรวจสภาพครั้งต่อไป"}),t.jsx(Je,{name:"nextMaintenanceDate",value:u.nextMaintenanceDate||"",onChange:y,min:new Date().toISOString().split("T")[0]})]})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"บันทึกข้อมูล"})]})]})]})})},fu=10,uE=({vehicle:a})=>{switch(a.status){case bt.AVAILABLE:return t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800",children:[t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),"ว่าง"]});case bt.ASSIGNED:const l=a.assignedTeamId?oE[a.assignedTeamId]:"N/A";return t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:[t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-blue-500"}),"กำลังใช้งาน - ",l]});case bt.MAINTENANCE:return t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:[t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-yellow-500"}),"ซ่อมบำรุง"]});default:return t.jsx("span",{className:"text-gray-500",children:"N/A"})}},dE=()=>{const[a,l]=j.useState([]),[s,r]=j.useState([]),[o,u]=j.useState(!0),[h,p]=j.useState(""),[y,x]=j.useState("All"),[v,b]=j.useState(1),[w,C]=j.useState(!1),[A,_]=j.useState(!1),[M,k]=j.useState(null),[I,V]=j.useState(null),[B,L]=j.useState(null);j.useEffect(()=>{te()},[]);const te=async()=>{try{u(!0);const[S,q]=await Promise.all([ue("/vehicles"),ue("/vehicle-types")]);l(Array.isArray(S)?S:(S==null?void 0:S.vehicles)||[]),r(Array.isArray(q)?q:(q==null?void 0:q.vehicleTypes)||[])}catch(S){console.error("Failed to load data:",S)}finally{u(!1)}},W=S=>{L(S),setTimeout(()=>L(null),3e3)},z=j.useMemo(()=>a.filter(S=>{const q=S.licensePlate.toLowerCase().includes(h.toLowerCase())||S.model.toLowerCase().includes(h.toLowerCase()),X=y==="All"||S.type===y;return q&&X}),[a,h,y]),H=Math.ceil(z.length/fu),Z=z.slice((v-1)*fu,v*fu),U=()=>{k(null),C(!0)},ae=S=>{k(S),C(!0)},$=async S=>{try{M?(await ue(`/vehicles/${S.id}`,{method:"PUT",body:JSON.stringify(S)}),W(`✅ แก้ไขข้อมูลรถทะเบียน "${S.licensePlate}" สำเร็จ`)):(await ue("/vehicles",{method:"POST",body:JSON.stringify(S)}),W(`🎉 เพิ่มรถทะเบียน "${S.licensePlate}" ใหม่สำเร็จ`)),await te(),C(!1)}catch(q){console.error("Failed to save vehicle:",q),W("❌ ไม่สามารถบันทึกข้อมูลได้")}},P=S=>{V(S),_(!0)},E=async()=>{if(I)try{await ue(`/vehicles/${I.id}`,{method:"DELETE"}),W(`🗑️ ลบรถทะเบียน "${I.licensePlate}" เรียบร้อยแล้ว`),await te()}catch(S){console.error("Failed to delete vehicle:",S),W("❌ ไม่สามารถลบข้อมูลได้")}_(!1),V(null)};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการยานพาหนะ"}),t.jsxs("button",{onClick:U,className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"เพิ่มยานพาหนะใหม่"})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-3 md:space-y-0",children:[t.jsxs("div",{className:"relative w-full md:w-auto",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx(jl,{className:"w-5 h-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"ค้นหาทะเบียนรถ...",value:h,onChange:S=>p(S.target.value),className:"w-full md:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#005A9C]"})]}),t.jsxs("div",{className:"relative w-full md:w-auto",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:t.jsx(Vu,{className:"w-5 h-5 text-gray-400"})}),t.jsxs("select",{value:y,onChange:S=>x(S.target.value),className:"w-full md:w-56 pl-10 pr-4 py-2 border border-gray-300 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-[#005A9C] bg-white",children:[t.jsx("option",{value:"All",children:"รถทุกประเภท"}),s.map(S=>t.jsx("option",{value:S.name,children:S.name},S.id))]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"ทะเบียนรถ"}),t.jsx("th",{className:"px-4 py-3",children:"ประเภทรถ"}),t.jsx("th",{className:"px-4 py-3",children:"ยี่ห้อ/รุ่น"}),t.jsx("th",{className:"px-4 py-3",children:"สถานะปัจจุบัน"}),t.jsx("th",{className:"px-4 py-3",children:"วันตรวจสภาพครั้งต่อไป"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{children:Z.map(S=>t.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:S.licensePlate}),t.jsx("td",{className:"px-4 py-3",children:S.type}),t.jsxs("td",{className:"px-4 py-3",children:[S.brand," ",S.model]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(uE,{vehicle:S})}),t.jsx("td",{className:"px-4 py-3",children:S.nextMaintenanceDate?Is(S.nextMaintenanceDate):"N/A"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("button",{onClick:()=>ae(S),className:"text-gray-500 hover:text-blue-600",title:"แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>P(S),className:"text-gray-500 hover:text-red-600",title:"ลบ",children:t.jsx(Gt,{className:"w-5 h-5"})})]})})]},S.id))})]})})}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",Z.length," of ",z.length," results"]}),t.jsxs("div",{className:"inline-flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>b(S=>S>1?S-1:S),disabled:v===1,className:"px-3 py-1 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Zt,{className:"w-4 h-4"})}),t.jsxs("span",{className:"text-sm",children:["Page ",v," of ",H]}),t.jsx("button",{onClick:()=>b(S=>S<H?S+1:S),disabled:v===H,className:"px-3 py-1 text-sm bg-white border rounded-md disabled:opacity-50",children:t.jsx(Ht,{className:"w-4 h-4"})})]})]}),t.jsx(cE,{isOpen:w,onClose:()=>C(!1),onSave:$,vehicle:M,availableVehicleTypes:s}),t.jsx(La,{isOpen:A,onClose:()=>_(!1),onConfirm:E,title:`ยืนยันการลบรถทะเบียน "${I==null?void 0:I.licensePlate}"`,message:"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลยานพาหนะนี้? การกระทำนี้ไม่สามารถย้อนกลับได้"}),t.jsx(dn,{message:B})]})},fE=({isOpen:a,onClose:l,onSave:s,vehicleType:r})=>{const[o,u]=j.useState(""),h=!!r;if(j.useEffect(()=>{a&&u((r==null?void 0:r.name)||"")},[r,a]),!a)return null;const p=y=>{y.preventDefault(),s({name:o})};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:h?"แก้ไขประเภทรถ":"เพิ่มประเภทรถใหม่"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:p,children:[t.jsxs("div",{className:"p-6",children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"ชื่อประเภทรถ"}),t.jsx("input",{type:"text",name:"name",id:"name",value:o,onChange:y=>u(y.target.value),className:"mt-1",required:!0})]}),t.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100",children:"ยกเลิก"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-[#005A9C] rounded-md hover:bg-blue-800",children:"บันทึก"})]})]})]})})},mE=()=>{const[a,l]=j.useState([]),[s,r]=j.useState([]),[o,u]=j.useState(!0),[h,p]=j.useState(!1),[y,x]=j.useState(!1),[v,b]=j.useState(null),[w,C]=j.useState(null),[A,_]=j.useState(null);j.useEffect(()=>{M()},[]);const M=async()=>{try{u(!0);const[z,H]=await Promise.all([ue("/vehicle-types"),ue("/vehicles")]);l(Array.isArray(z)?z:(z==null?void 0:z.vehicleTypes)||[]),r(Array.isArray(H)?H:(H==null?void 0:H.vehicles)||[])}catch(z){console.error("Failed to load data:",z)}finally{u(!1)}},k=j.useMemo(()=>{const z=new Map;return s.forEach(H=>{z.set(H.type,(z.get(H.type)||0)+1)}),z},[s]),I=z=>{_(z),setTimeout(()=>_(null),3e3)},V=()=>{b(null),p(!0)},B=z=>{b(z),p(!0)},L=async z=>{try{v?(await ue(`/vehicle-types/${v.id}`,{method:"PUT",body:JSON.stringify(z)}),I(`✅ แก้ไขประเภทรถ "${z.name}" สำเร็จ`)):(await ue("/vehicle-types",{method:"POST",body:JSON.stringify(z)}),I(`🎉 เพิ่มประเภทรถ "${z.name}" ใหม่สำเร็จ`)),await M(),p(!1)}catch(H){console.error("Failed to save vehicle type:",H),I("❌ ไม่สามารถบันทึกข้อมูลได้")}p(!1)},te=z=>{C(z),x(!0)},W=async()=>{if(w)try{await ue(`/vehicle-types/${w.id}`,{method:"DELETE"}),I(`🗑️ ลบประเภทรถ "${w.name}" เรียบร้อยแล้ว`),await M()}catch(z){console.error("Failed to delete vehicle type:",z),I("❌ ไม่สามารถลบข้อมูลได้")}x(!1),C(null)};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการประเภทรถ"}),t.jsxs("button",{onClick:V,className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"เพิ่มประเภทรถใหม่"})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3",children:"ชื่อประเภทรถ"}),t.jsx("th",{className:"px-6 py-3",children:"จำนวนรถที่ใช้ประเภทนี้"}),t.jsx("th",{className:"px-6 py-3 text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{children:a.map(z=>t.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:z.name}),t.jsx("td",{className:"px-6 py-4",children:k.get(z.name)||0}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("button",{onClick:()=>B(z),className:"text-gray-500 hover:text-blue-600",title:"แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>te(z),className:"text-gray-500 hover:text-red-600",title:"ลบ",children:t.jsx(Gt,{className:"w-5 h-5"})})]})})]},z.id))})]})})}),t.jsx(fE,{isOpen:h,onClose:()=>p(!1),onSave:L,vehicleType:v}),t.jsx(La,{isOpen:y,onClose:()=>x(!1),onConfirm:W,title:`ยืนยันการลบประเภทรถ "${w==null?void 0:w.name}"`,message:"คุณแน่ใจหรือไม่ว่าต้องการลบประเภทรถนี้? การกระทำนี้ไม่สามารถย้อนกลับได้"}),t.jsx(dn,{message:A})]})},hE=a=>{switch(a){case"driver":return[{id:"today_jobs",label:"งานวันนี้",icon:Ms},{id:"history",label:"ประวัติ",icon:wr},{id:"profile",label:"โปรไฟล์",icon:on}];case"community":return[{id:"dashboard",label:"หน้าหลัก",icon:Ms},{id:"patients",label:"ผู้ป่วย",icon:Kt},{id:"rides",label:"เดินทาง",icon:Rt},{id:"profile",label:"โปรไฟล์",icon:on}];default:return[]}},xE=({user:a,activeView:l,setActiveView:s})=>{const r=hE(a.role);return r.length===0?null:t.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_10px_rgba(0,0,0,0.1)] z-40",children:t.jsx("div",{className:"flex justify-around",children:r.map(o=>{const u=l===o.id;return t.jsxs("button",{onClick:()=>s(o.id),className:`flex flex-col items-center justify-center w-full pt-2 pb-1 px-1 text-sm transition-colors duration-200 relative ${u?"text-[var(--wecare-blue)]":"text-gray-600 hover:text-[var(--wecare-blue)]"}`,children:[t.jsx(o.icon,{className:`w-6 h-6 mb-1 ${u?"text-[var(--wecare-blue)]":"text-gray-500"}`}),t.jsx("span",{className:"font-medium text-xs",children:o.label}),u&&t.jsx("div",{className:"absolute bottom-0 h-1 w-12 bg-[var(--wecare-blue)] rounded-t-full"})]},o.id)})})})},gE=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),pE={published:{text:"เผยแพร่แล้ว",classes:"bg-green-100 text-green-800"},draft:{text:"ฉบับร่าง",classes:"bg-gray-200 text-gray-700"}},yE=({status:a})=>{const l=pE[a]||{text:"ไม่ทราบสถานะ",classes:"bg-gray-200 text-gray-700"};return t.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full ${l.classes}`,children:l.text})},Pg=({setActiveView:a})=>{const[l,s]=j.useState([]),[r,o]=j.useState(!0),[u,h]=j.useState(""),[p,y]=j.useState("all"),[x,v]=j.useState(!1),[b,w]=j.useState(null),[C,A]=j.useState(null);j.useEffect(()=>{_()},[]);const _=async()=>{try{o(!0);const B=await ue("/news");s(Array.isArray(B)?B:(B==null?void 0:B.news)||[])}catch(B){console.error("Failed to load news:",B)}finally{o(!1)}},M=B=>{A(B),setTimeout(()=>A(null),3e3)},k=j.useMemo(()=>l.filter(B=>{const L=B.title.toLowerCase().includes(u.toLowerCase()),te=p==="all"||B.status===p;return L&&te}),[l,u,p]),I=B=>{w(B),v(!0)},V=async()=>{if(b)try{await ue(`/news/${b.id}`,{method:"DELETE"}),M(`🗑️ ลบข่าว "${b.title}" เรียบร้อยแล้ว`),await _()}catch(B){console.error("Failed to delete news:",B),M("❌ ไม่สามารถลบข่าวได้")}v(!1),w(null)};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"จัดการข่าวสารและประชาสัมพันธ์"}),t.jsxs("button",{onClick:()=>a("edit_news"),className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(Dn,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"เขียนข่าวใหม่"})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-3 md:space-y-0 p-4 bg-white rounded-lg shadow-sm border",children:[t.jsxs("div",{className:"relative w-full md:w-1/3",children:[t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx(jl,{className:"w-5 h-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"ค้นหาหัวข้อข่าว...",value:u,onChange:B=>h(B.target.value),className:"w-full pl-10"})]}),t.jsxs("select",{value:p,onChange:B=>y(B.target.value),className:"w-full md:w-auto",children:[t.jsx("option",{value:"all",children:"สถานะทั้งหมด"}),t.jsx("option",{value:"published",children:"เผยแพร่แล้ว"}),t.jsx("option",{value:"draft",children:"ฉบับร่าง"})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3",children:"หัวข้อข่าว"}),t.jsx("th",{className:"px-6 py-3",children:"สถานะ"}),t.jsx("th",{className:"px-6 py-3",children:"ผู้เขียน"}),t.jsx("th",{className:"px-6 py-3",children:"วันที่เผยแพร่"}),t.jsx("th",{className:"px-6 py-3 text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{children:k.map(B=>t.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:B.title}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(yE,{status:B.status})}),t.jsx("td",{className:"px-6 py-4",children:B.author}),t.jsx("td",{className:"px-6 py-4",children:B.publishedDate?Is(B.publishedDate):"ยังไม่เผยแพร่"}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("button",{onClick:()=>alert("Previewing..."),className:"text-gray-500 hover:text-green-600",title:"ดูตัวอย่าง",children:t.jsx(gE,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>a("edit_news",{articleId:B.id}),className:"text-gray-500 hover:text-blue-600",title:"แก้ไข",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>I(B),className:"text-gray-500 hover:text-red-600",title:"ลบ",children:t.jsx(Gt,{className:"w-5 h-5"})})]})})]},B.id))})]})})}),t.jsx(La,{isOpen:x,onClose:()=>v(!1),onConfirm:V,title:"ยืนยันการลบข่าว",message:`คุณแน่ใจหรือไม่ว่าต้องการลบข่าว "${b==null?void 0:b.title}"?`}),t.jsx(dn,{message:C})]})},vE=({value:a,onChange:l})=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center p-2 border-b mb-2 space-x-2 bg-gray-50 rounded-t-md",children:[t.jsx("button",{type:"button",className:"p-2 rounded hover:bg-gray-200 font-bold",children:"B"}),t.jsx("button",{type:"button",className:"p-2 rounded hover:bg-gray-200 italic",children:"I"}),t.jsx("button",{type:"button",className:"p-2 rounded hover:bg-gray-200",children:"List"}),t.jsx("button",{type:"button",className:"p-2 rounded hover:bg-gray-200",children:"Link"}),t.jsx("button",{type:"button",className:"p-2 rounded hover:bg-gray-200",children:t.jsx($p,{className:"w-5 h-5"})})]}),t.jsx("textarea",{value:a,onChange:s=>l(s.target.value),placeholder:"เริ่มเขียนเนื้อหาของคุณ...",className:"w-full h-96 p-2 border-gray-300 rounded-b-md focus:ring-[#005A9C] focus:border-[#005A9C]"})]}),bE=({article:a,onArticleChange:l,onSave:s,isNew:r})=>{const o=p=>{if(p.target.files&&p.target.files[0]){const y=p.target.files[0],x=new FileReader;x.onloadend=()=>{l({...a,featuredImageUrl:x.result})},x.readAsDataURL(y)}},u=p=>{const{value:y}=p.target,x=a.scheduledDate?new Date(a.scheduledDate):new Date;x.setFullYear(parseInt(y.substring(0,4),10)),x.setMonth(parseInt(y.substring(5,7),10)-1),x.setDate(parseInt(y.substring(8,10),10)),l({...a,scheduledDate:x.toISOString()})},h=p=>{const{value:y}=p.target,x=a.scheduledDate?new Date(a.scheduledDate):new Date;x.setHours(parseInt(y.substring(0,2),10)),x.setMinutes(parseInt(y.substring(3,5),10)),l({...a,scheduledDate:x.toISOString()})};return t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-6",children:[t.jsxs("div",{className:"space-y-3 border-b pb-6",children:[t.jsx("button",{onClick:()=>s("draft"),className:"w-full text-center px-4 py-2 font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100",children:"บันทึกฉบับร่าง"}),t.jsx("button",{onClick:()=>s("published"),className:"w-full text-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800",children:r?"เผยแพร่":"อัปเดต"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"สถานะ"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"radio",id:"status_published",name:"status",value:"published",checked:a.status==="published",onChange:()=>l({...a,status:"published"})}),t.jsx("label",{htmlFor:"status_published",className:"ml-2",children:"เผยแพร่แล้ว"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"radio",id:"status_draft",name:"status",value:"draft",checked:a.status==="draft",onChange:()=>l({...a,status:"draft"})}),t.jsx("label",{htmlFor:"status_draft",className:"ml-2",children:"ฉบับร่าง"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"รูปภาพหน้าปก"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[a.featuredImageUrl?t.jsx("img",{src:a.featuredImageUrl,alt:"Featured",className:"w-full h-auto rounded-md mb-2"}):t.jsx($u,{className:"mx-auto h-10 w-10 text-gray-400"}),t.jsxs("label",{htmlFor:"featuredImage",className:"mt-2 block text-sm font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:[a.featuredImageUrl?"เปลี่ยนรูปภาพ":"อัปโหลดรูปภาพ",t.jsx("input",{type:"file",id:"featuredImage",accept:"image/*",onChange:o,className:"sr-only"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"กำหนดเวลาเผยแพร่"}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"หากไม่กำหนด จะเผยแพร่ทันที"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Je,{name:"scheduledDate",value:a.scheduledDate?a.scheduledDate.split("T")[0]:"",onChange:u}),t.jsx(Jp,{name:"scheduledTime",value:a.scheduledDate?new Date(a.scheduledDate).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"",onChange:h})]})]})]})},Bg={title:"",content:"",author:"Current User",status:"draft",featuredImageUrl:void 0,publishedDate:void 0,scheduledDate:void 0},Vg=({setActiveView:a,articleId:l})=>{const[s,r]=j.useState(Bg),[o,u]=j.useState(!0);j.useEffect(()=>{l?h(l):(r(Bg),u(!0))},[l]);const h=async y=>{try{const x=await ue(`/news/${y}`);r(x),u(!1)}catch(x){console.error("Failed to load article:",x)}},p=async y=>{try{const x={...s,status:y};o?await ue("/news",{method:"POST",body:JSON.stringify(x)}):await ue(`/news/${l}`,{method:"PUT",body:JSON.stringify(x)}),alert(`Article "${s.title}" has been saved as ${y}!`),a("news")}catch(x){console.error("Failed to save article:",x),alert("Failed to save article")}};return t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>a("news"),className:"flex items-center text-gray-600 hover:text-gray-900 font-semibold mb-6",children:[t.jsx(vr,{className:"w-6 h-6 mr-2"}),t.jsx("span",{children:"กลับไปหน้ารายการข่าว"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:t.jsx("input",{type:"text",placeholder:"ใส่หัวข้อข่าวที่นี่",value:s.title,onChange:y=>r(x=>({...x,title:y.target.value})),className:"w-full text-3xl font-bold border-none focus:ring-0 p-2 -ml-2"})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:t.jsx(vE,{value:s.content,onChange:y=>r(x=>({...x,content:y}))})})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsx(bE,{article:s,onArticleChange:r,onSave:p,isNew:o})})]})]})},NE=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"6",cy:"18",r:"3"}),t.jsx("circle",{cx:"18",cy:"6",r:"3"}),t.jsx("path",{d:"M6 9v6c0 3 3 3 3 3h3"}),t.jsx("path",{d:"M18 9v-3c0-3-3-3-3-3h-3"})]}),jE=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),t.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),wE=({data:a})=>{const l=Math.max(...a.map(o=>o.value),0),s=5,r=Math.ceil(l/s/10)*10;return Array.from({length:s+1},(o,u)=>u*r),t.jsxs("div",{className:"w-full h-full flex flex-col",children:[t.jsx("div",{className:"flex-grow flex items-end space-x-2 px-4",children:a.map((o,u)=>{const h=l>0?o.value/(r*s)*100:0;return t.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[t.jsx("div",{className:"w-full bg-blue-400 hover:bg-blue-600 transition-colors rounded-t-md",style:{height:`${h}%`},title:`${o.label}: ${o.value}`}),t.jsx("span",{className:"text-xs text-gray-500 mt-1",children:o.label})]},u)})}),t.jsx("div",{className:"border-t border-gray-200 mt-2"})]})},CE=({data:a})=>{const l=a.reduce((h,p)=>h+p.value,0),s=80,r=2*Math.PI*s;let o=0;const u=a.map(h=>{const p=h.value/l*100,y=r-p/100*r,x=`rotate(${o} 100 100)`;return o+=p/100*360,{...h,percentage:p.toFixed(1),strokeDashoffset:y,rotate:x}});return t.jsxs("div",{className:"w-full h-full flex items-center justify-center gap-8",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:[t.jsx("circle",{cx:"100",cy:"100",r:s,fill:"transparent",stroke:"#e5e7eb",strokeWidth:"20"}),u.map((h,p)=>t.jsx("circle",{cx:"100",cy:"100",r:s,fill:"transparent",stroke:h.color,strokeWidth:"20",strokeDasharray:r,strokeDashoffset:h.strokeDashoffset,transform:h.rotate,strokeLinecap:"butt"},p))]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[t.jsx("span",{className:"text-3xl font-bold text-gray-800",children:l}),t.jsx("span",{className:"text-sm text-gray-500",children:"ผู้ป่วย"})]})]}),t.jsx("div",{className:"space-y-2",children:a.map((h,p)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:h.color}}),t.jsxs("span",{className:"text-sm text-gray-600",children:[h.label," (",h.value,")"]})]},p))})]})},TE=({data:a})=>{const l=Math.max(...a.map(s=>s.value),0);return t.jsx("div",{className:"space-y-4",children:a.map((s,r)=>{const o=l>0?s.value/l*100:0;return t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600 w-32 truncate pr-4 text-right",children:s.label}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6",children:t.jsx("div",{className:"bg-green-500 h-6 rounded-full flex items-center justify-end px-2",style:{width:`${o}%`},children:t.jsx("span",{className:"text-xs font-bold text-white",children:s.value})})})]},r)})})},SE=({isOpen:a,onClose:l})=>{const[s,r]=j.useState("summary"),[o,u]=j.useState("pdf");if(!a)return null;const h=()=>{console.log(`Downloading report: ${s} as ${o}`),alert(`กำลังดาวน์โหลดรายงาน: ${s} ในรูปแบบ ${o}`),l()};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",role:"dialog","aria-modal":"true",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-scale-in",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"เลือกรายงานที่ต้องการส่งออก"}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:t.jsx(ht,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700",children:"ประเภทรายงาน"}),t.jsxs("select",{id:"reportType",value:s,onChange:p=>r(p.target.value),className:"mt-1 w-full",children:[t.jsx("option",{value:"summary",children:"รายงานสรุปภาพรวม"}),t.jsx("option",{value:"detailed_rides",children:"รายงานการเดินทางทั้งหมด (ละเอียด)"}),t.jsx("option",{value:"patient_by_village",children:"รายงานผู้ป่วยแยกตามหมู่บ้าน"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"รูปแบบไฟล์"}),t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"fileFormat",value:"pdf",checked:o==="pdf",onChange:p=>u(p.target.value),className:"h-4 w-4 text-blue-600 border-gray-300"}),t.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"PDF"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"fileFormat",value:"csv",checked:o==="csv",onChange:p=>u(p.target.value),className:"h-4 w-4 text-blue-600 border-gray-300"}),t.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Excel (CSV)"})]})]})]})]}),t.jsx("div",{className:"flex justify-end items-center p-4 bg-gray-50 border-t",children:t.jsxs("button",{onClick:h,className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(Ku,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"ดาวน์โหลด"})]})})]})})},er=({icon:a,label:l,value:s})=>t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex items-center gap-4",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:t.jsx(a,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:l}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s})]})]}),zg=()=>{const[a,l]=j.useState(!1),[s,r]=j.useState({monthlyRideData:[],patientDistributionData:[],topTripTypesData:[],stats:{totalRides:0,totalPatients:0,avgDistance:0,efficiency:0}}),[o,u]=j.useState(!0);j.useEffect(()=>{h()},[]);const h=async()=>{try{u(!0);const p=await ue("/dashboard/executive");r(p||{monthlyRideData:[],patientDistributionData:[],topTripTypesData:[],stats:{totalRides:0,totalPatients:0,avgDistance:0,efficiency:0}})}catch(p){console.error("Failed to load dashboard data:",p)}finally{u(!1)}};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ภาพรวมโครงการ WeCare"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"สรุปข้อมูลเชิงกลยุทธ์ในรูปแบบที่เข้าใจง่าย"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{className:"w-full sm:w-auto",children:[t.jsx("option",{children:"เดือนนี้"}),t.jsx("option",{children:"ไตรมาสล่าสุด"}),t.jsx("option",{children:"ปีนี้"}),t.jsx("option",{children:"กำหนดเอง"})]}),t.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center px-4 py-2 font-semibold text-white bg-[#005A9C] rounded-lg shadow-sm hover:bg-blue-800 transition-colors",children:[t.jsx(Ku,{className:"w-5 h-5 mr-2"}),t.jsx("span",{children:"ส่งออกรายงาน"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(er,{icon:Rt,label:"จำนวนเที่ยววิ่งทั้งหมด",value:s.stats.totalRides.toLocaleString()}),t.jsx(er,{icon:Kt,label:"จำนวนผู้ป่วยที่ใซ้บริการ",value:s.stats.totalPatients.toLocaleString()}),t.jsx(er,{icon:NE,label:"ระยะทางเฉลี่ยต่อเที่ยว",value:`${s.stats.avgDistance} กม.`}),t.jsx(er,{icon:jE,label:"ประสิทธิภาพการดำเนินงาน",value:`${s.stats.efficiency}%`})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"สถิติการเดินทางรายเดือน"}),t.jsx("div",{className:"h-64",children:t.jsx(wE,{data:s.monthlyRideData,title:"แนวโน้มการเดินทางรายเดือน"})})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"การกระจายตัวของผู้ป่วยตามหมู่บ้าน"}),t.jsx("div",{className:"h-64 flex items-center justify-center",children:t.jsx(CE,{data:s.patientDistributionData,title:"สัดส่วนผู้ป่วยตามหมู่บ้าน"})})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"ประเภทการเดินทางยอดนิยม 5 อันดับแรก"}),t.jsx(TE,{data:s.topTripTypesData,title:"ประเภทการเดินทางที่มีความต้องการสูงสุด"})]}),t.jsx(SE,{isOpen:a,onClose:()=>l(!1)})]})},tr=({title:a,description:l,children:s,actionButtonText:r,onActionClick:o,isLoading:u=!1,disabled:h=!1,icon:p})=>t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 flex flex-col h-full",children:[t.jsxs("div",{className:"flex-grow",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[p&&t.jsx(p,{className:"w-6 h-6 text-gray-500"}),t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:a})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 mb-6",children:l}),t.jsx("div",{className:"space-y-4",children:s})]}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:o,disabled:h||u,className:"w-full flex items-center justify-center px-4 py-2.5 font-semibold text-white bg-[var(--wecare-blue)] rounded-lg shadow-sm hover:bg-blue-800 transition-colors duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed",children:u?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),t.jsx("span",{children:"กำลังสร้าง..."})]}):r})})]}),EE=a=>t.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),AE=["หมู่ 1 บ้านหนองตุ้ม","หมู่ 2 ป่าบง","หมู่ 3 เต๋าดิน, เวียงสุทโธ","หมู่ 4 สวนดอก","หมู่ 5 ต้นหนุน","หมู่ 6 สันทรายคองน้อย","หมู่ 7 แม่ใจใต้","หมู่ 8 แม่ใจเหนือ","หมู่ 9 ริมฝาง,สันป่าไหน่","หมู่ 10 ห้วยเฮี่ยน,สันป่ายางยาง","หมู่ 11 ท่าสะแล","หมู่ 12 โป่งถืบ","หมู่ 13 ห้วยบอน","หมู่ 14 เสาหิน","หมู่ 15 โป่งถืบใน","หมู่ 16 ปางผึ้ง","หมู่ 17 ใหม่คองน้อย","หมู่ 18 ศรีดอนชัย","หมู่ 19 ใหม่ชยาราม","หมู่ 20 สระนิคม"],qg=()=>{const a=new Date().toISOString().split("T")[0],[l,s]=j.useState(null),[r,o]=j.useState([]),[u,h]=j.useState([]);j.useEffect(()=>{p()},[]);const p=async()=>{try{const[W,z]=await Promise.all([an.getDrivers(),Ta.getTeams()]);o(Array.isArray(W)?W:(W==null?void 0:W.drivers)||[]),h(Array.isArray(z)?z:(z==null?void 0:z.teams)||[])}catch(W){console.error("Failed to load data:",W)}},[y,x]=j.useState({startDate:"",endDate:"",teamId:"all"}),[v,b]=j.useState({startDate:"",endDate:"",driverId:"all"}),[w,C]=j.useState("all"),[A,_]=j.useState({startDate:"",endDate:""}),[M,k]=j.useState([]),I=(W,z)=>{W(H=>({...H,[z.target.name]:z.target.value}))},V=W=>{s(W),console.log(`Generating report: ${W}`),setTimeout(()=>{alert(`สร้าง "${W}" สำเร็จแล้ว`),s(null)},2e3)},B=!y.startDate||!y.endDate,L=!v.startDate||!v.endDate,te=!A.startDate||!A.endDate||M.length===0;return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ศูนย์กลางรายงาน"}),t.jsx("p",{className:"mt-1 text-gray-600",children:"สร้างและดาวน์โหลดรายงานเชิงปฏิบัติการสำหรับการสรุปผลและวางแผนงาน"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-8",children:[t.jsx(tr,{title:"1. รายงานเวร",description:"สรุปการปฏิบัติงานและตารางเวรของทีม",actionButtonText:"สร้างรายงาน (PDF)",onActionClick:()=>V("รายงานเวร"),isLoading:l==="รายงานเวร",disabled:B,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ช่วงวันที่ *"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(Je,{name:"startDate",value:y.startDate,onChange:W=>I(x,W),max:a}),t.jsx(Je,{name:"endDate",value:y.endDate,onChange:W=>I(x,W),max:a})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"เลือกทีม"}),t.jsxs("select",{name:"teamId",value:y.teamId,onChange:W=>I(x,W),children:[t.jsx("option",{value:"all",children:"ทุกทีม"}),u.map(W=>t.jsx("option",{value:W.id,children:W.name},W.id))]})]})]})}),t.jsx(tr,{title:"2. รายงานข้อมูลบุคลากร",description:"ข้อมูลเชิงลึกของคนขับแต่ละคน",actionButtonText:"สร้างรายงาน (PDF)",onActionClick:()=>V("รายงานข้อมูลบุคลากร"),isLoading:l==="รายงานข้อมูลบุคลากร",disabled:L,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ช่วงวันที่ *"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(Je,{name:"startDate",value:v.startDate,onChange:W=>I(b,W),max:a}),t.jsx(Je,{name:"endDate",value:v.endDate,onChange:W=>I(b,W),max:a})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"เลือกคนขับ"}),t.jsxs("select",{name:"driverId",value:v.driverId,onChange:W=>I(b,W),children:[t.jsx("option",{value:"all",children:"คนขับทั้งหมด"}),r.map(W=>t.jsx("option",{value:W.id,children:W.fullName},W.id))]})]})]})}),t.jsx(tr,{title:"3. รายงานซ่อมบำรุง",description:"ติดตามและวางแผนการนำรถเข้าตรวจสภาพตาม 'วันตรวจสภาพครั้งต่อไป'",actionButtonText:"สร้างรายงาน (Excel/CSV)",icon:EE,onActionClick:()=>V("รายงานซ่อมบำรุง"),isLoading:l==="รายงานซ่อมบำรุง",disabled:!1,children:t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"กรองตามสถานะ"}),t.jsxs("select",{value:w,onChange:W=>C(W.target.value),children:[t.jsx("option",{value:"all",children:"ทั้งหมด"}),t.jsx("option",{value:"upcoming",children:"ใกล้ถึงกำหนด"}),t.jsx("option",{value:"overdue",children:"เกินกำหนด"})]})]})})}),t.jsx(tr,{title:"4. รายงานข้อมูลผู้ป่วย",description:"ข้อมูลผู้ป่วยในเชิงสถิติเพื่อการวิเคราะห์",actionButtonText:"สร้างรายงาน (Excel/CSV)",onActionClick:()=>V("รายงานข้อมูลผู้ป่วย"),isLoading:l==="รายงานข้อมูลผู้ป่วย",disabled:te,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ช่วงวันที่ลงทะเบียน *"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(Je,{name:"startDate",value:A.startDate,onChange:W=>I(_,W),max:a}),t.jsx(Je,{name:"endDate",value:A.endDate,onChange:W=>I(_,W),max:a})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"เลือกหมู่บ้าน *"}),t.jsx(_r,{options:AE,selectedItems:M,setSelectedItems:k,placeholder:"เลือกหมู่บ้าน (อย่างน้อย 1)..."})]})]})})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"* จำเป็นต้องกรอกข้อมูล"})]})},ME=a=>{switch(a){case"driver":return"today_jobs";case"community":return"dashboard";case"radio":return"dashboard";case"radio_center":return"dashboard";case"OFFICER":return"dashboard";case"admin":return"dashboard";case"EXECUTIVE":return"executive_dashboard";case"DEVELOPER":return"dashboard";default:return"dashboard"}},_E=[{id:"N01",message:"คำขอเดินทาง #RIDE-105 ได้รับการอนุมัติแล้ว",timestamp:new Date().toISOString(),isRead:!1},{id:"N02",message:"คนขับ สมศักดิ์ เริ่มเดินทางไปรับผู้ป่วยแล้ว",timestamp:new Date(Date.now()-1e3*60*5).toISOString(),isRead:!1},{id:"N03",message:"การเดินทาง #RIDE-103 เสร็จสิ้น",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),isRead:!0}],DE=({user:a,onLogout:l})=>{const[s,r]=j.useState(ME(a.role)),[o,u]=j.useState(null),[h,p]=j.useState(_E),y=w=>{const C={...w,id:`N${Date.now()}`,timestamp:new Date().toISOString()};p(A=>[C,...A])},x=(w,C=null)=>{r(w),u(C)},v=()=>{switch(a.role){case"driver":switch(s){case"today_jobs":return t.jsx(bg,{});case"history":return t.jsx(rS,{});case"profile":return t.jsx(oS,{user:a,onLogout:l});default:return t.jsx(bg,{})}case"community":switch(s){case"dashboard":return t.jsx(mx,{setActiveView:x});case"patients":return t.jsx(hx,{setActiveView:x});case"rides":return t.jsx(ZN,{setActiveView:x,initialFilter:o==null?void 0:o.filter});case"profile":return t.jsx(uu,{user:a,onLogout:l});case"register_patient":return t.jsx(GS,{setActiveView:x});case"request_ride":return t.jsx(FS,{setActiveView:x,preselectedPatientId:o==null?void 0:o.patientId,addNotification:y});case"patient_detail":return o!=null&&o.patientId?t.jsx(WS,{patientId:o.patientId,setActiveView:x}):t.jsx(hx,{setActiveView:x});default:return t.jsx(mx,{setActiveView:x})}case"OFFICER":case"radio":case"radio_center":switch(s){case"dashboard":return t.jsx(wg,{setActiveView:x});case"rides":return t.jsx(Cg,{});case"patients":return t.jsx(Sg,{});case"drivers":return t.jsx(Ag,{});case"manage_teams":return t.jsx(kg,{});case"manage_schedules":return t.jsx(Ug,{});case"news":return t.jsx(Pg,{setActiveView:x});case"edit_news":return t.jsx(Vg,{setActiveView:x,articleId:o==null?void 0:o.articleId});case"reports":return t.jsx(qg,{});case"profile":return t.jsx(uu,{user:a,onLogout:l});default:return t.jsx(wg,{setActiveView:x})}case"EXECUTIVE":switch(s){case"executive_dashboard":return t.jsx(zg,{});default:return t.jsx(zg,{})}case"DEVELOPER":case"admin":switch(s){case"dashboard":return t.jsx(Mg,{setActiveView:x});case"users":return t.jsx(RS,{currentUser:a});case"rides":return t.jsx(Cg,{});case"patients":return t.jsx(Sg,{});case"drivers":return t.jsx(Ag,{});case"manage_teams":return t.jsx(kg,{});case"manage_schedules":return t.jsx(Ug,{});case"manage_vehicles":return t.jsx(dE,{});case"manage_vehicle_types":return t.jsx(mE,{});case"news":return t.jsx(Pg,{setActiveView:x});case"edit_news":return t.jsx(Vg,{setActiveView:x,articleId:o==null?void 0:o.articleId});case"reports":return t.jsx(qg,{});case"logs":return t.jsx(kS,{});case"settings":return t.jsx(LS,{});case"profile":return t.jsx(uu,{user:a,onLogout:l});case"test_map":return t.jsx(JS,{});default:return t.jsx(Mg,{setActiveView:x})}default:return null}},b=a.role==="driver"||a.role==="community";return t.jsxs("div",{className:"flex h-screen bg-[var(--bg-main)]",children:[t.jsx(pN,{user:a,activeView:s,setActiveView:x,onLogout:l}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(BN,{user:a,activeView:s,notifications:h,setNotifications:p}),t.jsx("main",{className:`flex-1 overflow-x-hidden overflow-y-auto bg-[var(--bg-main)] ${b?"pb-16 md:pb-0":""}`,children:t.jsx("div",{className:"container mx-auto px-8 py-8",children:v()})}),b&&t.jsx(xE,{user:a,activeView:s,setActiveView:x})]})]})},RE=a=>t.jsxs("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),t.jsx("polyline",{points:"12 5 19 12 12 19"})]}),IE=({article:a,onViewArticle:l})=>{const r=((o,u=120)=>{if(!o)return"";const h=o.replace(/<[^>]+>/g,"");return h.length<=u?h:h.substring(0,u)+"..."})(a.content);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden flex flex-col md:flex-row group transition-all duration-300 hover:shadow-lg hover:border-blue-300",children:[a.featuredImageUrl&&t.jsx("div",{className:"md:w-1/3 h-48 md:h-auto overflow-hidden",children:t.jsx("img",{src:a.featuredImageUrl,alt:a.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"})}),t.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 group-hover:text-blue-600 transition-colors",children:a.title}),t.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["เผยแพร่เมื่อ: ",Is(a.publishedDate)," โดย ",a.author]}),t.jsx("p",{className:"text-gray-600 mt-4 flex-grow",children:r}),t.jsx("div",{className:"mt-4",children:t.jsxs("button",{onClick:()=>l(a.id),className:"inline-flex items-center font-semibold text-blue-600 hover:text-blue-800",children:["อ่านต่อ...",t.jsx(RE,{className:"w-4 h-4 ml-1"})]})})]})]})},mu=5,Gg=({onViewArticle:a})=>{const[l,s]=j.useState(1),[r,o]=j.useState([]),[u,h]=j.useState(!0),[p,y]=j.useState(null);it.useEffect(()=>{const A=(M,k)=>{const I=M.replace(/\/$/,""),V=k.startsWith("/")?k:`/${k}`;return`${I}${V}`};(async()=>{h(!0),y(null);try{const M="https://wiangwecare.com/api";let k=await fetch(A(M,"/api/news"),{method:"GET",mode:"cors",headers:{Accept:"application/json"}});if(!k.ok){const V=await fetch(A(M,"/api/news/"),{method:"GET",mode:"cors",headers:{Accept:"application/json"}});if(V.ok)k=V;else{const B=A(window.location.origin,"/api-proxy/news.php"),L=await fetch(B.replace(/\/$/,""),{method:"GET",headers:{Accept:"application/json"}});if(!L.ok){let te="";try{te=await L.text()}catch{}throw new Error(`Failed to load news via proxy: ${L.status} ${te}`.trim())}k=L}}const I=await k.json();o(Array.isArray(I)?I:I.items||[])}catch(M){y(M.message||"เกิดข้อผิดพลาดในการโหลดข่าวสาร")}finally{h(!1)}})()},[]);const x=j.useMemo(()=>r.filter(A=>A.status==="published"&&A.publishedDate).sort((A,_)=>new Date(_.publishedDate).getTime()-new Date(A.publishedDate).getTime()),[r]),v=Math.ceil(x.length/mu),b=x.slice((l-1)*mu,l*mu),w=()=>{l<v&&s(l+1)},C=()=>{l>1&&s(l-1)};return t.jsx("div",{className:"bg-white pt-20",children:t.jsx("main",{className:"py-12 sm:py-16",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[u&&t.jsx("div",{className:"text-center py-8 text-gray-600",children:"กำลังโหลดข่าวสาร..."}),p&&t.jsx("div",{className:"text-center py-8 text-red-600",children:p}),t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-[#005A9C]",children:"ข่าวสารและประชาสัมพันธ์"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"ติดตามข่าวสาร, กิจกรรม, และประกาศล่าสุดจากโครงการ WeCare"})]}),b.length>0?t.jsx("div",{className:"space-y-8",children:b.map(A=>t.jsx(IE,{article:A,onViewArticle:a},A.id))}):t.jsxs("div",{className:"text-center py-16 px-4 bg-gray-50 rounded-lg",children:[t.jsx(xu,{className:"mx-auto h-16 w-16 text-gray-400"}),t.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"ยังไม่มีข่าวสารในขณะนี้"}),t.jsx("p",{className:"mt-2 text-gray-500",children:"กรุณากลับมาตรวจสอบอีกครั้งในภายหลัง"})]}),v>1&&t.jsxs("div",{className:"flex justify-between items-center mt-12 border-t pt-6",children:[t.jsxs("button",{onClick:C,disabled:l===1,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Zt,{className:"w-5 h-5 mr-2"}),"หน้าก่อนหน้า"]}),t.jsxs("span",{className:"text-sm text-gray-600",children:["หน้า ",l," จาก ",v]}),t.jsxs("button",{onClick:w,disabled:l===v,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["หน้าถัดไป",t.jsx(Ht,{className:"w-5 h-5 ml-2"})]})]})]})})})},kE=({articleId:a,onBackToList:l})=>{const[s,r]=it.useState(null),[o,u]=it.useState(!0),[h,p]=it.useState(null);if(it.useEffect(()=>{const x=(b,w)=>{const C=b.replace(/\/$/,""),A=w.startsWith("/")?w:`/${w}`;return`${C}${A}`};(async()=>{u(!0),p(null);try{const b="https://wiangwecare.com/api";let w=await fetch(x(b,`/api/news/${a}`),{method:"GET",mode:"cors",headers:{Accept:"application/json"}});if(!w.ok){const A=await fetch(x(b,`/api/news/${a}/`),{method:"GET",mode:"cors",headers:{Accept:"application/json"}});if(A.ok)w=A;else{const _=x(window.location.origin,`/api-proxy/news_item.php?id=${encodeURIComponent(a)}`),M=await fetch(_.replace(/\/$/,""),{method:"GET",headers:{Accept:"application/json"}});if(!M.ok){let k="";try{k=await M.text()}catch{}throw new Error(`Failed to load news detail via proxy: ${M.status} ${k}`.trim())}w=M}}const C=await w.json();r(C)}catch(b){p(b.message||"เกิดข้อผิดพลาดในการโหลดข่าว")}finally{u(!1)}})()},[a]),o)return t.jsx("div",{className:"bg-white pt-20",children:t.jsx("main",{className:"py-16 sm:py-24 text-center",children:t.jsx("div",{className:"text-gray-600",children:"กำลังโหลดข่าว..."})})});if(h||!s)return t.jsx("div",{className:"bg-white pt-20",children:t.jsxs("main",{className:"py-16 sm:py-24 text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"ไม่พบข่าวสาร"}),t.jsx("p",{className:"mt-4 text-gray-600",children:h||"ข่าวที่คุณกำลังค้นหาอาจถูกลบหรือยังไม่ได้รับการเผยแพร่"}),t.jsxs("button",{onClick:l,className:"mt-8 inline-flex items-center px-6 py-3 font-semibold text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700",children:[t.jsx(vr,{className:"w-5 h-5 mr-2"}),"กลับไปที่หน้ารวมข่าวสาร"]})]})});const y={__html:(s.content||"").replace(/\n/g,"<br />")};return t.jsx("div",{className:"bg-white pt-20",children:t.jsx("main",{className:"py-12 sm:py-16",children:t.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("button",{onClick:l,className:"mb-8 inline-flex items-center font-semibold text-gray-600 hover:text-gray-900",children:[t.jsx(vr,{className:"w-5 h-5 mr-2"}),"กลับไปที่หน้ารวมข่าวสาร"]}),t.jsxs("article",{children:[t.jsxs("header",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 leading-tight",children:s.title}),t.jsxs("p",{className:"mt-4 text-md text-gray-500",children:["เผยแพร่เมื่อ ",fp(s.publishedDate)," โดย ",s.author]})]}),s.featuredImageUrl&&t.jsx("figure",{className:"mb-8",children:t.jsx("img",{src:s.featuredImageUrl,alt:s.title,className:"w-full h-auto rounded-lg shadow-lg object-cover"})}),t.jsx("div",{className:"prose prose-lg max-w-none text-gray-700",dangerouslySetInnerHTML:y})]})]})})})},LE=()=>{var te,W;const[a,l]=j.useState(null),[s,r]=j.useState("landing"),[o,u]=j.useState(null),h=((W=(te=import.meta)==null?void 0:te.env)==null?void 0:W.VITE_BASE)||"/",p=(()=>{const z=window.location.pathname;return z.startsWith("/ems_staging/")||z==="/ems_staging"?"/ems_staging/":h})(),y=p.endsWith("/")?p:p+"/",x=z=>{let H=z;y!=="/"&&H.startsWith(y)&&(H="/"+H.slice(y.length)),H.startsWith("/")||(H="/"+H);const Z=H.replace(/^\/+/,"").split("/"),U=Z[0]||"";if(U===""||U==="index.html"){r("landing"),u(null);return}if(U==="login"){r("login"),u(null);return}if(U==="register"){r("register"),u(null);return}if(U==="about"){r("about"),u(null);return}if(U==="contact"){r("contact"),u(null);return}if(U==="news"){const ae=Z[1];if(ae){u(ae),r("news_single");return}u(null),r("news");return}r("landing"),u(null)};j.useEffect(()=>{x(window.location.pathname);const z=()=>x(window.location.pathname);return window.addEventListener("popstate",z),()=>window.removeEventListener("popstate",z)},[]),j.useEffect(()=>{try{const z=localStorage.getItem("wecare_token"),H=localStorage.getItem("wecare_user");if(z&&H){const Z=JSON.parse(H);l(Z)}}catch{}},[]);const v=(z,H)=>((async()=>{try{const Z=z.toLowerCase(),{user:U,token:ae}=await rp.login(z,H),$={id:U==null?void 0:U.id,name:(U==null?void 0:U.full_name)||(U==null?void 0:U.name)||z,email:(U==null?void 0:U.email)||z,role:(U==null?void 0:U.role)||"user"};if(Z==="office1@wecare.dev"&&H==="password")return l({name:"Radio Center Staff",email:"office1@wecare.dev",role:"radio"}),!0;try{localStorage.setItem("wecare_token",ae),localStorage.setItem("wecare_user",JSON.stringify($))}catch{}l($)}catch(Z){console.error("Login error",Z),alert("ไม่สามารถเข้าสู่ระบบได้ กรุณาตรวจสอบอีเมล/รหัสผ่าน")}})(),!0),b=()=>{l(null),r("landing");try{localStorage.removeItem("jwt"),localStorage.removeItem("wecare_token"),localStorage.removeItem("wecare_user")}catch{}},w=z=>{const H=y.replace(/\/$/,"")+(z.startsWith("/")?z:`/${z}`);window.history.pushState({},"",H),x(window.location.pathname)},C=()=>w("/login"),A=()=>w("/register"),_=()=>w("/"),M=()=>w("/about"),k=()=>w("/contact"),I=()=>w("/news"),V=z=>{w(`/news/${z}`)};if(a)return t.jsx(DE,{user:a,onLogout:b});const B=s==="landing"||s==="about"||s==="contact"||s==="news"||s==="news_single",L=()=>{switch(s){case"landing":return t.jsx(sx,{onRegisterClick:A});case"login":return t.jsx(eN,{onLogin:v,onRegisterClick:A});case"register":return t.jsx(cN,{onLoginClick:C});case"about":return t.jsx(dN,{});case"contact":return t.jsx(mN,{});case"news":return t.jsx(Gg,{onViewArticle:V});case"news_single":return o?t.jsx(kE,{articleId:o,onBackToList:I}):t.jsx(Gg,{onViewArticle:V});default:return t.jsx(sx,{onRegisterClick:A})}};return t.jsxs("div",{className:"bg-slate-50 min-h-screen",children:[t.jsx(iN,{onLoginClick:C,onRegisterClick:A,onLogoClick:_,onAboutClick:M,onContactClick:k,onNewsClick:I}),t.jsx("main",{children:L()}),B&&t.jsx(fN,{})]})},UE=()=>window.location.pathname.startsWith("/ems_staging")?"/ems_staging":"",Xp=UE();window.__BASE_PATH__=Xp;window.__API_BASE__="https://wiangwecare.com/api";const Zp=document.getElementById("root");if(!Zp)throw new Error("Could not find root element to mount to");const OE=_v.createRoot(Zp);OE.render(t.jsx(it.StrictMode,{children:t.jsx(Gb,{basename:Xp,children:t.jsx(LE,{})})}));
